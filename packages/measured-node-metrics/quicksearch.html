<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"nodeOsMetrics.js.html":{"id":"nodeOsMetrics.js.html","title":"Source: nodeOsMetrics.js","body":" Measured Modules CpuUtilsmeasured-node-metricsnode-http-request-metricsnode-os-metricsnode-process-metrics Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: nodeOsMetrics.js const { Gauge, CachedGauge } = require('measured-core'); const { cpuAverage, calculateCpuUsagePercent } = require('./utils/CpuUtils'); const os = require('os'); /** * The default reporting interval for node os metrics is 30 seconds. * * @type {number} */ const DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDS = 30; /** * A map of Metric generating functions, that create Metrics to measure node os stats. */ const nodeOsMetrics = { /** * https://nodejs.org/api/os.html#os_os_loadavg * @return {Gauge} */ 'node.os.loadavg.1m': () =&gt; { return new Gauge(() =&gt; { return os.loadavg()[0]; }); }, /** * https://nodejs.org/api/os.html#os_os_loadavg * @return {Gauge} */ 'node.os.loadavg.5m': () =&gt; { return new Gauge(() =&gt; { return os.loadavg()[1]; }); }, /** * https://nodejs.org/api/os.html#os_os_loadavg * @return {Gauge} */ 'node.os.loadavg.15m': () =&gt; { return new Gauge(() =&gt; { return os.loadavg()[2]; }); }, 'node.os.freemem': () =&gt; { return new Gauge(() =&gt; { return os.freemem(); }); }, 'node.os.totalmem': () =&gt; { return new Gauge(() =&gt; { return os.totalmem(); }); }, /** * Gauge to track how long the os has been running. *\\ *]=- * See {@link https://nodejs.org/api/os.html#os_os_uptime} for more information. * @return {Gauge} */ 'node.os.uptime': () =&gt; { return new Gauge(() =&gt; { // The os.uptime() method returns the system uptime in number of seconds. return os.uptime(); }); }, /** * Creates a {@link CachedGauge} that will self update every updateIntervalInSeconds and sample the * cpu usage across all cores for sampleTimeInSeconds. * * @param {number} [updateIntervalInSeconds] How often to update and cache the cpu usage average, defaults to 30 seconds. * @param {number} [sampleTimeInSeconds] How long to sample the cpu usage over, defaults to 5 seconds. */ 'node.os.cpu.all-cores-avg': (updateIntervalInSeconds, sampleTimeInSeconds) =&gt; { updateIntervalInSeconds = updateIntervalInSeconds || 30; sampleTimeInSeconds = sampleTimeInSeconds || 5; return new CachedGauge(() =&gt; { return new Promise(resolve =&gt; { //Grab first CPU Measure const startMeasure = cpuAverage(); setTimeout(() =&gt; { //Grab second Measure const endMeasure = cpuAverage(); const percentageCPU = calculateCpuUsagePercent(startMeasure, endMeasure); resolve(percentageCPU); }, sampleTimeInSeconds); }); }, updateIntervalInSeconds); } }; /** * This module contains the methods to create and register default node os metrics to a metrics registry. * * @module node-os-metrics */ module.exports = { /** * Method that can be used to add a set of default node process metrics to your app. * * @param {SelfReportingMetricsRegistry} metricsRegistry * @param {Dimensions} customDimensions * @param {number} reportingIntervalInSeconds */ createOSMetrics: (metricsRegistry, customDimensions, reportingIntervalInSeconds) =&gt; { customDimensions = customDimensions || {}; reportingIntervalInSeconds = reportingIntervalInSeconds || DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDS; Object.keys(nodeOsMetrics).forEach(metricName =&gt; { metricsRegistry.register(metricName, nodeOsMetrics[metricName](), customDimensions, reportingIntervalInSeconds); }); }, /** * Map of metric names to a corresponding function that creates and returns a Metric that tracks it. * See {@link nodeOsMetrics} */ nodeOsMetrics }; × Search results Close "},"nodeProcessMetrics.js.html":{"id":"nodeProcessMetrics.js.html","title":"Source: nodeProcessMetrics.js","body":" Measured Modules CpuUtilsmeasured-node-metricsnode-http-request-metricsnode-os-metricsnode-process-metrics Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: nodeProcessMetrics.js const { Gauge } = require('measured-core'); const process = require('process'); /** * The default reporting interval for node process metrics is 30 seconds. * * @type {number} */ const DEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDS = 30; /** * A map of Metric generating functions, that create Metrics to measure node process stats. * @type {Object.&lt;string, function&gt;} */ const nodeProcessMetrics = { /** * Creates a gauge that reports the rss from the node memory usage api. * See {@link https://nodejs.org/api/process.html#process_process_memoryusage} for more information. * * @return {Gauge} */ 'node.process.memory-usage.rss': () =&gt; { return new Gauge(() =&gt; { return process.memoryUsage().rss; }); }, /** * See {@link https://nodejs.org/api/process.html#process_process_memoryusage} for more information. * * @return {Gauge} */ 'node.process.memory-usage.heap-total': () =&gt; { return new Gauge(() =&gt; { return process.memoryUsage().heapTotal; }); }, /** * See {@link https://nodejs.org/api/process.html#process_process_memoryusage} for more information. * * @return {Gauge} */ 'node.process.memory-usage.heap-used': () =&gt; { return new Gauge(() =&gt; { return process.memoryUsage().heapUsed; }); }, /** * See {@link https://nodejs.org/api/process.html#process_process_memoryusage} for more information. * * @return {Gauge} */ 'node.process.memory-usage.external': () =&gt; { return new Gauge(() =&gt; { const mem = process.memoryUsage(); return Object.prototype.hasOwnProperty.call(mem, 'external') ? mem.external : 0; }); }, /** * Gauge to track how long the node process has been running. * * See {@link https://nodejs.org/api/process.html#process_process_uptime} for more information. * @return {Gauge} */ 'node.process.uptime': () =&gt; { return new Gauge(() =&gt; { return Math.floor(process.uptime()); }); } }; /** * This module contains the methods to create and register default node process metrics to a metrics registry. * * @module node-process-metrics */ module.exports = { /** * Method that can be used to add a set of default node process metrics to your app. * * @param {SelfReportingMetricsRegistry} metricsRegistry * @param {Dimensions} [customDimensions] * @param {number} [reportingIntervalInSeconds] */ createProcessMetrics: (metricsRegistry, customDimensions, reportingIntervalInSeconds) =&gt; { customDimensions = customDimensions || {}; reportingIntervalInSeconds = reportingIntervalInSeconds || DEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDS; Object.keys(nodeProcessMetrics).forEach(metricName =&gt; { metricsRegistry.register( metricName, nodeProcessMetrics[metricName](), customDimensions, reportingIntervalInSeconds ); }); }, /** * Map of metric names to a corresponding function that creates and returns a Metric that tracks it. * See {@link nodeProcessMetrics} */ nodeProcessMetrics }; × Search results Close "},"nodeHttpRequestMetrics.js.html":{"id":"nodeHttpRequestMetrics.js.html","title":"Source: nodeHttpRequestMetrics.js","body":" Measured Modules CpuUtilsmeasured-node-metricsnode-http-request-metricsnode-os-metricsnode-process-metrics Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: nodeHttpRequestMetrics.js const { Stopwatch } = require('measured-core'); /** * The default reporting interval for requests * @type {number} */ const DEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDS = 10; /** * This module has functions needed to create middlewares for frameworks such as express. * It also exports the 2 functions needed to implement your own middleware. * If you implement a middleware for a framework not implemented here, please contribute it back. * * @module node-http-request-metrics */ module.exports = { /** * Creates an Express middleware that reports a timer on request data. * With this middleware you will get requests counts and latency percentiles all filterable by status codes, http method, and uri paths. * * @param {SelfReportingMetricsRegistry} metricsRegistry * @param {number} [reportingIntervalInSeconds] * @return {Function} */ createExpressMiddleware: (metricsRegistry, reportingIntervalInSeconds) =&gt; { return (req, res, next) =&gt; { const stopwatch = module.exports.onRequestStart(); req.on('end', () =&gt; { const { method } = req; const { statusCode } = res; const path = req.route ? req.route.path : '_unknown'; module.exports.onRequestEnd(metricsRegistry, stopwatch, method, statusCode, path, reportingIntervalInSeconds); }); next(); }; }, /** * At the start of the request, create a stopwatch, that starts tracking how long the request is taking. * @return {Stopwatch} */ onRequestStart: () =&gt; { return new Stopwatch(); }, /** * When the request ends stop the stop watch and create or update the timer for requests that tracked by method, status code, path. * The timers (meters and histograms) that get reported will be filterable by status codes, http method, the uri path. * You will be able to create dash boards such as success percentage, latency percentiles by path and method, etc. * * @param {SelfReportingMetricsRegistry} metricsRegistry The Self Reporting Metrics Registry * @param {Stopwatch} stopwatch The stopwatch created by onRequestStart * @param {string} method The Http Method for the request * @param {string|number} statusCode The status code for the response * @param {string} [path] The path for the request. Please note to avoid out of control time series dimension creation spread, * you would want to strip out ids and or other variables from the path. * @param {number} [reportingIntervalInSeconds] override the reporting interval defaults to every 10 seconds. */ onRequestEnd: (metricsRegistry, stopwatch, method, statusCode, path, reportingIntervalInSeconds) =&gt; { reportingIntervalInSeconds = reportingIntervalInSeconds || DEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDS; const customDimensions = { statusCode: `${statusCode}`, method: `${method}` }; if (path) { customDimensions.path = path; } // get or create the timer for the request count/latency timer const requestTimer = metricsRegistry.getOrCreateTimer('requests', customDimensions, reportingIntervalInSeconds); // stop the request latency counter const time = stopwatch.end(); requestTimer.update(time); } }; × Search results Close "},"utils_CpuUtils.js.html":{"id":"utils_CpuUtils.js.html","title":"Source: utils/CpuUtils.js","body":" Measured Modules CpuUtilsmeasured-node-metricsnode-http-request-metricsnode-os-metricsnode-process-metrics Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: utils/CpuUtils.js const os = require('os'); /** * @module CpuUtils */ module.exports = { /** * * @return {{idle: number, total: number}} */ cpuAverage: () =&gt; { //Initialise sum of idle and time of cores and fetch CPU info let totalIdle = 0, totalTick = 0; const cpus = os.cpus(); cpus.forEach(cpu =&gt; { //Total up the time in the cores tick Object.keys(cpu.times).forEach((type) =&gt; { totalTick += cpu.times[type]; }); //Total up the idle time of the core totalIdle += cpu.times.idle; }); //Return the average Idle and Tick times return { idle: totalIdle / cpus.length, total: totalTick / cpus.length }; }, /** * * @param {{idle: number, total: number}} startMeasure * @param {{idle: number, total: number}} endMeasure */ calculateCpuUsagePercent: (startMeasure, endMeasure) =&gt; { //Calculate the difference in idle and total time between the measures const idleDifference = endMeasure.idle - startMeasure.idle; const totalDifference = endMeasure.total - startMeasure.total; //Calculate the average percentage CPU usage return Math.ceil(100 - (100 * idleDifference / totalDifference)); } }; × Search results Close "},"index.js.html":{"id":"index.js.html","title":"Source: index.js","body":" Measured Modules CpuUtilsmeasured-node-metricsnode-http-request-metricsnode-os-metricsnode-process-metrics Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: index.js const { nodeProcessMetrics, createProcessMetrics } = require('./nodeProcessMetrics'); const { nodeOsMetrics, createOSMetrics } = require('./nodeOsMetrics'); const { createExpressMiddleware, onRequestStart, onRequestEnd } = require('./nodeHttpRequestMetrics'); /** * The main module for the measured-node-metrics lib. * * Various functions to help create node metrics and http framework middlewares * that can be used with a self reporting metrics registry to easily instrument metrics for a node app. * * @module measured-node-metrics */ module.exports = { /** * Map of metric names and a functions that can be used to generate that metric object that can be registered with a * self reporting metrics registry or used as seen fit. * * See {@link nodeProcessMetrics}. * * @type {Object.&lt;string, function&gt;} */ nodeProcessMetrics, /** * Method that can be used to add a set of default node process metrics to your node app. * * registers all metrics defined in the {@link nodeProcessMetrics} map. * * @function * @name createProcessMetrics * @param {SelfReportingMetricsRegistry} metricsRegistry * @param {Dimensions} customDimensions * @param {number} reportingIntervalInSeconds */ createProcessMetrics, /** * Map of metric names and a functions that can be used to generate that metric object that can be registered with a * self reporting metrics registry or used as seen fit. * * See {@link nodeOsMetrics}. * * @type {Object.&lt;string, function&gt;} */ nodeOsMetrics, /** * Method that can be used to add a set of default node process metrics to your app. * * registers all metrics defined in the {@link nodeOsMetrics} map. * * @function * @name createOSMetrics * @param {SelfReportingMetricsRegistry} metricsRegistry * @param {Dimensions} customDimensions * @param {number} reportingIntervalInSeconds */ createOSMetrics, /** * Creates an Express middleware that reports a timer on request data. * With this middleware you will get requests counts and latency percentiles all filterable by status codes, http method, and uri paths. * * @function * @name createExpressMiddleware * @param {SelfReportingMetricsRegistry} metricsRegistry * @param {number} [reportingIntervalInSeconds] * @return {Function} */ createExpressMiddleware, /** * At the start of the request, create a stopwatch, that starts tracking how long the request is taking. * @function * @name onRequestStart * @return {Stopwatch} */ onRequestStart, /** * When the request ends stop the stop watch and create or update the timer for requests that tracked by method, statuscode, path. * The timers (meters and histograms) that get reported will be filterable by status codes, http method, the uri path. * You will be able to create dash boards such as success percentage, latency percentiles by path and method, etc. * * @function * @name onRequestEnd * @param metricsRegistry The Self Reporting Metrics Registry * @param stopwatch The stopwatch created by onRequestStart * @param method The Http Method for the request * @param statusCode The status code for the response * @param [path] The path for the request. Please note to avoid out of control time series dimension creation spread, * you would want to strip out ids and or other variables from the path. * @param [reportingIntervalInSeconds] override the reporting interval defaults to every 10 seconds. */ onRequestEnd }; × Search results Close "},"global.html":{"id":"global.html","title":"Global","body":" Measured Modules CpuUtilsmeasured-node-metricsnode-http-request-metricsnode-os-metricsnode-process-metrics Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Global Members &lt;constant&gt; DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDS :number The default reporting interval for node os metrics is 30 seconds. Type: number Source: nodeOsMetrics.js, line 10 &lt;constant&gt; DEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDS :number The default reporting interval for node process metrics is 30 seconds. Type: number Source: nodeProcessMetrics.js, line 9 &lt;constant&gt; DEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDS :number The default reporting interval for requests Type: number Source: nodeHttpRequestMetrics.js, line 7 &lt;constant&gt; nodeOsMetrics A map of Metric generating functions, that create Metrics to measure node os stats. Source: nodeOsMetrics.js, line 15 &lt;constant&gt; nodeProcessMetrics :Object.&lt;string, function()&gt; A map of Metric generating functions, that create Metrics to measure node process stats. Type: Object.&lt;string, function()&gt; Source: nodeProcessMetrics.js, line 15 × Search results Close "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Measured Modules CpuUtilsmeasured-node-metricsnode-http-request-metricsnode-os-metricsnode-process-metrics Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Modules × Search results Close "},"tutorials.list.html":{"id":"tutorials.list.html","title":"Tutorials","body":" Measured Modules CpuUtilsmeasured-node-metricsnode-http-request-metricsnode-os-metricsnode-process-metrics Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Tutorials × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" Measured Modules CpuUtilsmeasured-node-metricsnode-http-request-metricsnode-os-metricsnode-process-metrics Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Measured Node MetricsVarious metrics generators and http framework middlewares that can be used with a self reporting metrics registry to easily instrument metrics for a node app. Installnpm install measured-node-metricsWhat is in this packageMeasured Node Metrics ModuleSee the docs for the main module to see the exported helper functions and maps of metric generators for various system and os metrics. Example usageconst express = require('express'); const { createProcessMetrics, createOSMetrics, createExpressMiddleware } = require('measured-node-metrics'); const registry = new SelfReportingMetricsRegistry(new SomeReporterImple()); // Create and register default OS metrics createOSMetrics(registry); // Create and register default process metrics createProcessMetrics(registry); // Use the express middleware const app = express(); app.use(createExpressMiddleware(registry)); // Implement the rest of appYou can also create your own middleware if your not using express, (please contribute it) const { onRequestStart, onRequestEnd } = require('measured-node-metrics'); /** * Creates an Express middleware that reports a timer on request data. * With this middleware you will get requests counts and latency percentiles all filterable by status codes, http method, and uri paths. * * @param {SelfReportingMetricsRegistry} metricsRegistry * @param {number} [reportingIntervalInSeconds] * @return {Function} */ createExpressMiddleware: (metricsRegistry, reportingIntervalInSeconds) =&gt; { return (req, res, next) =&gt; { const stopwatch = onRequestStart(); req.on('end', () =&gt; { const { method } = req; const { statusCode } = res; // path variables should be stripped in order to avoid runaway time series creation, // /v1/cars/:id should be one dimension rather than n, one for each id. const path = req.route ? req.route.path : '_unknown'; onRequestEnd(metricsRegistry, stopwatch, method, statusCode, path, reportingIntervalInSeconds); }); next(); }; } × Search results Close "},"module-CpuUtils.html":{"id":"module-CpuUtils.html","title":"Module: CpuUtils","body":" Measured Modules CpuUtilsmeasured-node-metricsnode-http-request-metricsnode-os-metricsnode-process-metrics Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Module: CpuUtils Source: utils/CpuUtils.js, line 3 Methods &lt;static&gt; calculateCpuUsagePercent(startMeasure, endMeasure) Parameters: Name Type Description startMeasure Object endMeasure Object Source: utils/CpuUtils.js, line 35 &lt;static&gt; cpuAverage() Source: utils/CpuUtils.js, line 11 Returns: Type Object × Search results Close "},"module-measured-node-metrics.html":{"id":"module-measured-node-metrics.html","title":"Module: measured-node-metrics","body":" Measured Modules CpuUtilsmeasured-node-metricsnode-http-request-metricsnode-os-metricsnode-process-metrics Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Module: measured-node-metrics The main module for the measured-node-metrics lib. Various functions to help create node metrics and http framework middlewaresthat can be used with a self reporting metrics registry to easily instrument metrics for a node app. Source: index.js, line 5 Members &lt;static&gt; nodeOsMetrics :Object.&lt;string, function()&gt; Map of metric names and a functions that can be used to generate that metric object that can be registered with aself reporting metrics registry or used as seen fit. See nodeOsMetrics. Type: Object.&lt;string, function()&gt; Source: index.js, line 45 &lt;static&gt; nodeProcessMetrics :Object.&lt;string, function()&gt; Map of metric names and a functions that can be used to generate that metric object that can be registered with aself reporting metrics registry or used as seen fit. See nodeProcessMetrics. Type: Object.&lt;string, function()&gt; Source: index.js, line 22 Methods &lt;inner&gt; createExpressMiddleware(metricsRegistry [, reportingIntervalInSeconds]) Creates an Express middleware that reports a timer on request data.With this middleware you will get requests counts and latency percentiles all filterable by status codes, http method, and uri paths. Parameters: Name Type Argument Description metricsRegistry SelfReportingMetricsRegistry reportingIntervalInSeconds number &lt;optional&gt; Source: index.js, line 60 Returns: Type function &lt;inner&gt; createOSMetrics(metricsRegistry, customDimensions, reportingIntervalInSeconds) Method that can be used to add a set of default node process metrics to your app. registers all metrics defined in the nodeOsMetrics map. Parameters: Name Type Description metricsRegistry SelfReportingMetricsRegistry customDimensions Dimensions reportingIntervalInSeconds number Source: index.js, line 47 &lt;inner&gt; createProcessMetrics(metricsRegistry, customDimensions, reportingIntervalInSeconds) Method that can be used to add a set of default node process metrics to your node app. registers all metrics defined in the nodeProcessMetrics map. Parameters: Name Type Description metricsRegistry SelfReportingMetricsRegistry customDimensions Dimensions reportingIntervalInSeconds number Source: index.js, line 24 &lt;inner&gt; onRequestEnd(metricsRegistry, stopwatch, method, statusCode [, path] [, reportingIntervalInSeconds]) When the request ends stop the stop watch and create or update the timer for requests that tracked by method, statuscode, path.The timers (meters and histograms) that get reported will be filterable by status codes, http method, the uri path.You will be able to create dash boards such as success percentage, latency percentiles by path and method, etc. Parameters: Name Type Argument Description metricsRegistry The Self Reporting Metrics Registry stopwatch The stopwatch created by onRequestStart method The Http Method for the request statusCode The status code for the response path &lt;optional&gt; The path for the request. Please note to avoid out of control time series dimension creation spread,you would want to strip out ids and or other variables from the path. reportingIntervalInSeconds &lt;optional&gt; override the reporting interval defaults to every 10 seconds. Source: index.js, line 80 &lt;inner&gt; onRequestStart() At the start of the request, create a stopwatch, that starts tracking how long the request is taking. Source: index.js, line 72 Returns: Type Stopwatch × Search results Close "},"module-node-http-request-metrics.html":{"id":"module-node-http-request-metrics.html","title":"Module: node-http-request-metrics","body":" Measured Modules CpuUtilsmeasured-node-metricsnode-http-request-metricsnode-os-metricsnode-process-metrics Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Module: node-http-request-metrics This module has functions needed to create middlewares for frameworks such as express.It also exports the 2 functions needed to implement your own middleware.If you implement a middleware for a framework not implemented here, please contribute it back. Source: nodeHttpRequestMetrics.js, line 9 Methods &lt;static&gt; createExpressMiddleware(metricsRegistry [, reportingIntervalInSeconds]) Creates an Express middleware that reports a timer on request data.With this middleware you will get requests counts and latency percentiles all filterable by status codes, http method, and uri paths. Parameters: Name Type Argument Description metricsRegistry SelfReportingMetricsRegistry reportingIntervalInSeconds number &lt;optional&gt; Source: nodeHttpRequestMetrics.js, line 25 Returns: Type function &lt;static&gt; onRequestEnd(metricsRegistry, stopwatch, method, statusCode [, path] [, reportingIntervalInSeconds]) When the request ends stop the stop watch and create or update the timer for requests that tracked by method, status code, path.The timers (meters and histograms) that get reported will be filterable by status codes, http method, the uri path.You will be able to create dash boards such as success percentage, latency percentiles by path and method, etc. Parameters: Name Type Argument Description metricsRegistry SelfReportingMetricsRegistry The Self Reporting Metrics Registry stopwatch Stopwatch The stopwatch created by onRequestStart method string The Http Method for the request statusCode string | number The status code for the response path string &lt;optional&gt; The path for the request. Please note to avoid out of control time series dimension creation spread,you would want to strip out ids and or other variables from the path. reportingIntervalInSeconds number &lt;optional&gt; override the reporting interval defaults to every 10 seconds. Source: nodeHttpRequestMetrics.js, line 61 &lt;static&gt; onRequestStart() At the start of the request, create a stopwatch, that starts tracking how long the request is taking. Source: nodeHttpRequestMetrics.js, line 44 Returns: Type Stopwatch × Search results Close "},"module-node-os-metrics.html":{"id":"module-node-os-metrics.html","title":"Module: node-os-metrics","body":" Measured Modules CpuUtilsmeasured-node-metricsnode-http-request-metricsnode-os-metricsnode-process-metrics Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Module: node-os-metrics This module contains the methods to create and register default node os metrics to a metrics registry. Source: nodeOsMetrics.js, line 94 Members &lt;static&gt; nodeOsMetrics Map of metric names to a corresponding function that creates and returns a Metric that tracks it.See nodeOsMetrics Source: nodeOsMetrics.js, line 120 Methods &lt;static&gt; createOSMetrics(metricsRegistry, customDimensions, reportingIntervalInSeconds) Method that can be used to add a set of default node process metrics to your app. Parameters: Name Type Description metricsRegistry SelfReportingMetricsRegistry customDimensions Dimensions reportingIntervalInSeconds number Source: nodeOsMetrics.js, line 107 × Search results Close "},"module-node-process-metrics.html":{"id":"module-node-process-metrics.html","title":"Module: node-process-metrics","body":" Measured Modules CpuUtilsmeasured-node-metricsnode-http-request-metricsnode-os-metricsnode-process-metrics Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Module: node-process-metrics This module contains the methods to create and register default node process metrics to a metrics registry. Source: nodeProcessMetrics.js, line 71 Members &lt;static&gt; nodeProcessMetrics Map of metric names to a corresponding function that creates and returns a Metric that tracks it.See nodeProcessMetrics Source: nodeProcessMetrics.js, line 103 Methods &lt;static&gt; createProcessMetrics(metricsRegistry [, customDimensions] [, reportingIntervalInSeconds]) Method that can be used to add a set of default node process metrics to your app. Parameters: Name Type Argument Description metricsRegistry SelfReportingMetricsRegistry customDimensions Dimensions &lt;optional&gt; reportingIntervalInSeconds number &lt;optional&gt; Source: nodeProcessMetrics.js, line 84 × Search results Close "},"tutorial-SignalFx Express Full End to End Example.html":{"id":"tutorial-SignalFx Express Full End to End Example.html","title":"Tutorial: SignalFx Express Full End to End Example","body":" Measured Modules CpuUtilsmeasured-node-metricsnode-http-request-metricsnode-os-metricsnode-process-metrics Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics SignalFx Express Full End to End Example Using Measured to instrument OS, Process and Express Metrics.This tutorial shows how to use the measured libraries to fully instrument OS and Node Process metrics as well as create an express middleware. The middleware will measure request count, latency distributions (req/res time histogram) and add dimensions to make it filterable by request method, response status code, request uri path. const os = require('os'); const signalfx = require('signalfx'); const express = require('express'); const { SignalFxMetricsReporter, SignalFxSelfReportingMetricsRegistry } = require('measured-signalfx-reporter'); const { createProcessMetrics, createOSMetrics, createExpressMiddleware } = require('measured-node-metrics'); const libraryMetadata = require('./package'); // get metadata from package.json const library = libraryMetadata.name; const version = libraryMetadata.version; // Report process and os stats 1x per minute const PROCESS_AND_SYSTEM_METRICS_REPORTING_INTERVAL_IN_SECONDS = 60; // Report the request count and histogram stats every 10 seconds const REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDS = 10; const defaultDimensions = { app: library, app_version: version, env: 'test' }; /** * Get your api key from a secrets provider of some kind. * * Good examples: * * &lt;li&gt; S3 with KMS * &lt;li&gt; Cerberus * &lt;li&gt; AWS Secrets Manager * &lt;li&gt; Vault * &lt;li&gt; Confidant * * Bad examples: * * &lt;li&gt; Checked into SCM in plaintext as a property * &lt;li&gt; Set as a plaintext environment variable * * @return {string} Returns the resolved Signal Fx Api Key */ const apiKeyResolver = () =&gt; { // https://diogomonica.com/2017/03/27/why-you-shouldnt-use-env-variables-for-secret-data/ return process.env.SIGNALFX_API_KEY; }; // Create the signal fx client const signalFxClient = new signalfx.Ingest(apiKeyResolver(), { userAgents: library }); // Create the signal fx reporter with the client const signalFxReporter = new SignalFxMetricsReporter(signalFxClient, { defaultDimensions: defaultDimensions, defaultReportingIntervalInSeconds: 10, logLevel: 'debug' }); // Create the self reporting metrics registry with the signal fx reporter const metricsRegistry = new SignalFxSelfReportingMetricsRegistry(signalFxReporter, { logLevel: 'debug' }); createOSMetrics(metricsRegistry, {}, PROCESS_AND_SYSTEM_METRICS_REPORTING_INTERVAL_IN_SECONDS); createProcessMetrics(metricsRegistry, {}, PROCESS_AND_SYSTEM_METRICS_REPORTING_INTERVAL_IN_SECONDS); const app = express(); // wire up the metrics middleware app.use(createExpressMiddleware(metricsRegistry, REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDS)); app.get('/hello', (req, res) =&gt; { res.send('hello world'); }); app.get('/path2', (req, res) =&gt; { res.send('path2'); }); app.listen(8080, () =&gt; log.info('Example app listening on port 8080!')); × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
