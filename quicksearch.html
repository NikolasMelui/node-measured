<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"measured-core_lib_util_BinaryHeap.js.html":{"id":"measured-core_lib_util_BinaryHeap.js.html","title":"Source: measured-core/lib/util/BinaryHeap.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-core/lib/util/BinaryHeap.js /** * Based on http://en.wikipedia.org/wiki/Binary_Heap * as well as http://eloquentjavascript.net/appendix2.html */ class BinaryHeap { constructor(options) { options = options || {}; this._elements = options.elements || []; this._score = options.score || this._score; } /** * Add elements to the binary heap. * @param {any[]} elements */ add(...elements) { elements.forEach(element =&gt; { this._elements.push(element); this._bubble(this._elements.length - 1); }); } first() { return this._elements[0]; } removeFirst() { const root = this._elements[0]; const last = this._elements.pop(); if (this._elements.length &gt; 0) { this._elements[0] = last; this._sink(0); } return root; } clone() { return new BinaryHeap({ elements: this.toArray(), score: this._score }); } toSortedArray() { const array = []; const clone = this.clone(); let element; while (true) { element = clone.removeFirst(); if (element === undefined) { break; } array.push(element); } return array; } toArray() { return [].concat(this._elements); } size() { return this._elements.length; } _bubble(bubbleIndex) { const bubbleElement = this._elements[bubbleIndex]; const bubbleScore = this._score(bubbleElement); let parentIndex; let parentElement; let parentScore; while (bubbleIndex &gt; 0) { parentIndex = this._parentIndex(bubbleIndex); parentElement = this._elements[parentIndex]; parentScore = this._score(parentElement); if (bubbleScore &lt;= parentScore) { break; } this._elements[parentIndex] = bubbleElement; this._elements[bubbleIndex] = parentElement; bubbleIndex = parentIndex; } } _sink(sinkIndex) { const sinkElement = this._elements[sinkIndex]; const sinkScore = this._score(sinkElement); const { length } = this._elements; let swapIndex; let swapScore; let swapElement; let childIndexes; let i; let childIndex; let childElement; let childScore; while (true) { swapIndex = null; swapScore = null; swapElement = null; childIndexes = this._childIndexes(sinkIndex); for (i = 0; i &lt; childIndexes.length; i++) { childIndex = childIndexes[i]; if (childIndex &gt;= length) { break; } childElement = this._elements[childIndex]; childScore = this._score(childElement); if (childScore &gt; sinkScore) { if (swapScore === null || swapScore &lt; childScore) { swapIndex = childIndex; swapScore = childScore; swapElement = childElement; } } } if (swapIndex === null) { break; } this._elements[swapIndex] = sinkElement; this._elements[sinkIndex] = swapElement; sinkIndex = swapIndex; } } _parentIndex(index) { return Math.floor((index - 1) / 2); } _childIndexes(index) { return [2 * index + 1, 2 * index + 2]; } _score(element) { return element.valueOf(); } } module.exports = BinaryHeap; × Search results Close "},"measured-core_lib_metrics_CachedGauge.js.html":{"id":"measured-core_lib_metrics_CachedGauge.js.html","title":"Source: measured-core/lib/metrics/CachedGauge.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-core/lib/metrics/CachedGauge.js const { MetricTypes } = require('./Metric'); const TimeUnits = require('../util/units'); /** * A Cached Gauge takes a function that returns a promise that resolves a * value that should be cached and updated on a given interval. * * toJSON() will return the currently cached value. * * @example * const cpuAverageCachedGauge = new CachedGauge(() =&gt; { * return new Promise(resolve =&gt; { * //Grab first CPU Measure * const startMeasure = cpuAverage(); * setTimeout(() =&gt; { * //Grab second Measure * const endMeasure = cpuAverage(); * const percentageCPU = calculateCpuUsagePercent(startMeasure, endMeasure); * resolve(percentageCPU); * }, sampleTimeInSeconds); * }); * }, updateIntervalInSeconds); * * @implements {Metric} */ class CachedGauge { /** * @param {function} valueProducingPromiseCallback A function that returns a promise than when * resolved supplies the value that should be cached in this gauge. * @param {number} updateIntervalInSeconds How often the cached gauge should update it's value. * @param {number} [timeUnitOverride] by default this function takes updateIntervalInSeconds and multiplies it by TimeUnits.SECONDS (1000), * You can override it here. */ constructor(valueProducingPromiseCallback, updateIntervalInSeconds, timeUnitOverride) { const timeUnit = timeUnitOverride || TimeUnits.SECONDS; this._valueProducingPromiseCallback = valueProducingPromiseCallback; this._value = 0; this._updateValue(); this._interval = setInterval(() =&gt; { this._updateValue(); }, updateIntervalInSeconds * timeUnit); } /** * Calls the promise producing callback and sets the value when it gets resolved. * @private */ _updateValue() { this._valueProducingPromiseCallback().then(value =&gt; { this._value = value; }); } /** * @return {number} Gauges directly return the value which should be a number. */ toJSON() { return this._value; } /** * The type of the Metric Impl. {@link MetricTypes}. * @return {string} The type of the Metric Impl. */ getType() { return MetricTypes.GAUGE; } /** * Clears the interval, so that it doesn't keep any processes alive. */ end() { clearInterval(this._interval); this._interval = null; } } module.exports = CachedGauge; × Search results Close "},"measured-core_lib_Collection.js.html":{"id":"measured-core_lib_Collection.js.html","title":"Source: measured-core/lib/Collection.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-core/lib/Collection.js const Optional = require('optional-js'); const Counter = require('./metrics/Counter'); const Gauge = require('./metrics/Gauge'); const SettableGauge = require('./metrics/SettableGauge'); const CachedGauge = require('./metrics/CachedGauge'); const Histogram = require('./metrics/Histogram'); const Meter = require('./metrics/Meter'); const Timer = require('./metrics/Timer'); const { MetricTypes } = require('./metrics/Metric'); /** * A Simple collection that stores names and a {@link Metric} instances with a few convenience methods for * creating / registering and then gathering all data the registered metrics. * @example * var { Collection } = require('measured'); * const collection = new Collection('node-process-metrics'); * const gauge = collection.gauge('node.process.heap_used', () =&gt; { * return process.memoryUsage().heapUsed; * }); */ class Collection { /** * Creates a named collection of metrics * @param {string} [name] The name to use for this collection. */ constructor(name) { this.name = name; /** * internal map of metric name to {@link Metric} * @type {Object.&lt;string, Metric&gt;} * @private */ this._metrics = {}; } /** * register a metric that was created outside the provided convenience methods of this collection * @param name The metric name * @param metric The {@link Metric} implementation * @example * var { Collection, Gauge } = require('measured'); * const collection = new Collection('node-process-metrics'); * const gauge = new Gauge(() =&gt; { * return process.memoryUsage().heapUsed; * }); * collection.register('node.process.heap_used', gauge); */ register(name, metric) { this._metrics[name] = metric; } /** * Fetches the data/values from all registered metrics * @return {Object} The combined JSON object */ toJSON() { const json = {}; Object.keys(this._metrics).forEach(metric =&gt; { if (Object.prototype.hasOwnProperty.call(this._metrics, metric)) { json[metric] = this._metrics[metric].toJSON(); } }); if (!this.name) { return json; } const wrapper = {}; wrapper[this.name] = json; return wrapper; } /** * Gets or creates and registers a {@link Gauge} * @param {string} name The metric name * @param {function} readFn See {@link Gauge} * @return {Gauge} */ gauge(name, readFn) { this._validateName(name); let gauge; this._getMetricForNameAndType(name, MetricTypes.GAUGE).ifPresentOrElse( registeredMetric =&gt; { gauge = registeredMetric; }, () =&gt; { gauge = new Gauge(readFn); this.register(name, gauge); } ); return gauge; } /** * Gets or creates and registers a {@link Counter} * @param {string} name The metric name * @param {CounterProperties} [properties] See {@link CounterProperties} * @return {Counter} */ counter(name, properties) { this._validateName(name); let counter; this._getMetricForNameAndType(name, MetricTypes.COUNTER).ifPresentOrElse( registeredMetric =&gt; { counter = registeredMetric; }, () =&gt; { counter = new Counter(properties); this.register(name, counter); } ); return counter; } /** * Gets or creates and registers a {@link Histogram} * @param {string} name The metric name * @param {HistogramProperties} [properties] See {@link HistogramProperties} * @return {Histogram} */ histogram(name, properties) { this._validateName(name); let histogram; this._getMetricForNameAndType(name, MetricTypes.HISTOGRAM).ifPresentOrElse( registeredMetric =&gt; { histogram = registeredMetric; }, () =&gt; { histogram = new Histogram(properties); this.register(name, histogram); } ); return histogram; } /** * Gets or creates and registers a {@link Timer} * @param {string} name The metric name * @param {TimerProperties} [properties] See {@link TimerProperties} * @return {Timer} */ timer(name, properties) { this._validateName(name); let timer; this._getMetricForNameAndType(name, MetricTypes.TIMER).ifPresentOrElse( registeredMetric =&gt; { timer = registeredMetric; }, () =&gt; { timer = new Timer(properties); this.register(name, timer); } ); return timer; } /** * Gets or creates and registers a {@link Meter} * @param {string} name The metric name * @param {MeterProperties} [properties] See {@link MeterProperties} * @return {Meter} */ meter(name, properties) { this._validateName(name); let meter; this._getMetricForNameAndType(name, MetricTypes.METER).ifPresentOrElse( registeredMetric =&gt; { meter = registeredMetric; }, () =&gt; { meter = new Meter(properties); this.register(name, meter); } ); return meter; } /** * Gets or creates and registers a {@link SettableGauge} * @param {string} name The metric name * @param {SettableGaugeProperties} [properties] See {@link SettableGaugeProperties} * @return {SettableGauge} */ settableGauge(name, properties) { this._validateName(name); let settableGauge; this._getMetricForNameAndType(name, MetricTypes.GAUGE).ifPresentOrElse( registeredMetric =&gt; { settableGauge = registeredMetric; }, () =&gt; { settableGauge = new SettableGauge(properties); this.register(name, settableGauge); } ); return settableGauge; } /** * Gets or creates and registers a {@link SettableGauge} * @param {string} name The metric name * @param {function} valueProducingPromiseCallback A function that returns a promise than when * resolved supplies the value that should be cached in this gauge. * @param {number} updateIntervalInSeconds How often the cached gauge should update it's value. * @return {CachedGauge} */ cachedGauge(name, valueProducingPromiseCallback, updateIntervalInSeconds) { this._validateName(name); let cachedGauge; this._getMetricForNameAndType(name, MetricTypes.GAUGE).ifPresentOrElse( registeredMetric =&gt; { cachedGauge = registeredMetric; }, () =&gt; { cachedGauge = new CachedGauge(valueProducingPromiseCallback, updateIntervalInSeconds); this.register(name, cachedGauge); } ); return cachedGauge; } /** * Checks the registry for a metric with a given name and type, if it exists in the registry as a * different type an error is thrown. * @param {string} name The metric name * @param {string} requestedType The metric type * @return {Optional&lt;Metric&gt;} * @private */ _getMetricForNameAndType(name, requestedType) { if (this._metrics[name]) { const metric = this._metrics[name]; const actualType = metric.getType(); if (requestedType !== actualType) { throw new Error( `You requested a metric of type: ${requestedType} with name: ${name}, but it exists in the registry as type: ${actualType}` ); } return Optional.of(metric); } return Optional.empty(); } /** * Validates that the provided name is valid. * * @param name The provided metric name param. * @private */ _validateName(name) { if (!name || typeof name !== 'string') { throw new Error('You must supply a metric name'); } } /** * Calls end on all metrics in the registry that support end() */ end() { const metrics = this._metrics; Object.keys(metrics).forEach(name =&gt; { const metric = metrics[name]; if (metric.end) { metric.end(); } }); } } module.exports = Collection; × Search results Close "},"measured-core_lib_metrics_Counter.js.html":{"id":"measured-core_lib_metrics_Counter.js.html","title":"Source: measured-core/lib/metrics/Counter.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-core/lib/metrics/Counter.js const { MetricTypes } = require('./Metric'); /** * Counters are things that increment or decrement * @implements {Metric} * @example * var Measured = require('measured') * var activeUploads = new Measured.Counter(); * http.createServer(function(req, res) { * activeUploads.inc(); * req.on('end', function() { * activeUploads.dec(); * }); * }); */ class Counter { /** * @param {CounterProperties} [properties] see {@link CounterProperties} */ constructor(properties) { properties = properties || {}; this._count = properties.count || 0; } /** * Counters directly return their currently value. * @return {number} */ toJSON() { return this._count; } /** * Increments the counter. * @param {number} n Increment the counter by n. Defaults to 1. */ inc(n) { this._count += arguments.length ? n : 1; } /** * Decrements the counter * @param {number} n Decrement the counter by n. Defaults to 1. */ dec(n) { this._count -= arguments.length ? n : 1; } /** * Resets the counter back to count Defaults to 0. * @param {number} count Resets the counter back to count Defaults to 0. */ reset(count) { this._count = count || 0; } /** * The type of the Metric Impl. {@link MetricTypes}. * @return {string} The type of the Metric Impl. */ getType() { return MetricTypes.COUNTER; } } module.exports = Counter; /** * Properties that can be supplied to the constructor of a {@link Counter} * * @interface CounterProperties * @typedef CounterProperties * @type {Object} * @property {number} count An initial count for the counter. Defaults to 0. * @example * // Creates a counter that starts at 5. * const counter = new Counter({ count: 5 }) */ × Search results Close "},"measured-node-metrics_lib_nodeOsMetrics.js.html":{"id":"measured-node-metrics_lib_nodeOsMetrics.js.html","title":"Source: measured-node-metrics/lib/nodeOsMetrics.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-node-metrics/lib/nodeOsMetrics.js const { Gauge, CachedGauge } = require('measured-core'); const { cpuAverage, calculateCpuUsagePercent } = require('./utils/CpuUtils'); const os = require('os'); /** * The default reporting interval for node os metrics is 30 seconds. * * @type {number} */ const DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDS = 30; /** * A map of Metric generating functions, that create Metrics to measure node os stats. */ const nodeOsMetrics = { /** * https://nodejs.org/api/os.html#os_os_loadavg * @return {Gauge} */ 'node.os.loadavg.1m': () =&gt; { return new Gauge(() =&gt; { return os.loadavg()[0]; }); }, /** * https://nodejs.org/api/os.html#os_os_loadavg * @return {Gauge} */ 'node.os.loadavg.5m': () =&gt; { return new Gauge(() =&gt; { return os.loadavg()[1]; }); }, /** * https://nodejs.org/api/os.html#os_os_loadavg * @return {Gauge} */ 'node.os.loadavg.15m': () =&gt; { return new Gauge(() =&gt; { return os.loadavg()[2]; }); }, 'node.os.freemem': () =&gt; { return new Gauge(() =&gt; { return os.freemem(); }); }, 'node.os.totalmem': () =&gt; { return new Gauge(() =&gt; { return os.totalmem(); }); }, /** * Gauge to track how long the os has been running. *\\ *]=- * See {@link https://nodejs.org/api/os.html#os_os_uptime} for more information. * @return {Gauge} */ 'node.os.uptime': () =&gt; { return new Gauge(() =&gt; { // The os.uptime() method returns the system uptime in number of seconds. return os.uptime(); }); }, /** * Creates a {@link CachedGauge} that will self update every updateIntervalInSeconds and sample the * cpu usage across all cores for sampleTimeInSeconds. * * @param {number} [updateIntervalInSeconds] How often to update and cache the cpu usage average, defaults to 30 seconds. * @param {number} [sampleTimeInSeconds] How long to sample the cpu usage over, defaults to 5 seconds. */ 'node.os.cpu.all-cores-avg': (updateIntervalInSeconds, sampleTimeInSeconds) =&gt; { updateIntervalInSeconds = updateIntervalInSeconds || 30; sampleTimeInSeconds = sampleTimeInSeconds || 5; return new CachedGauge(() =&gt; { return new Promise(resolve =&gt; { //Grab first CPU Measure const startMeasure = cpuAverage(); setTimeout(() =&gt; { //Grab second Measure const endMeasure = cpuAverage(); const percentageCPU = calculateCpuUsagePercent(startMeasure, endMeasure); resolve(percentageCPU); }, sampleTimeInSeconds); }); }, updateIntervalInSeconds); } }; /** * This module contains the methods to create and register default node os metrics to a metrics registry. * * @module node-os-metrics */ module.exports = { /** * Method that can be used to add a set of default node process metrics to your app. * * @param {SelfReportingMetricsRegistry} metricsRegistry * @param {Dimensions} customDimensions * @param {number} reportingIntervalInSeconds */ createOSMetrics: (metricsRegistry, customDimensions, reportingIntervalInSeconds) =&gt; { customDimensions = customDimensions || {}; reportingIntervalInSeconds = reportingIntervalInSeconds || DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDS; Object.keys(nodeOsMetrics).forEach(metricName =&gt; { metricsRegistry.register(metricName, nodeOsMetrics[metricName](), customDimensions, reportingIntervalInSeconds); }); }, /** * Map of metric names to a corresponding function that creates and returns a Metric that tracks it. * See {@link nodeOsMetrics} */ nodeOsMetrics }; × Search results Close "},"measured-node-metrics_lib_nodeProcessMetrics.js.html":{"id":"measured-node-metrics_lib_nodeProcessMetrics.js.html","title":"Source: measured-node-metrics/lib/nodeProcessMetrics.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-node-metrics/lib/nodeProcessMetrics.js const { Gauge } = require('measured-core'); const process = require('process'); /** * The default reporting interval for node process metrics is 30 seconds. * * @type {number} */ const DEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDS = 30; /** * A map of Metric generating functions, that create Metrics to measure node process stats. * @type {Object.&lt;string, function&gt;} */ const nodeProcessMetrics = { /** * Creates a gauge that reports the rss from the node memory usage api. * See {@link https://nodejs.org/api/process.html#process_process_memoryusage} for more information. * * @return {Gauge} */ 'node.process.memory-usage.rss': () =&gt; { return new Gauge(() =&gt; { return process.memoryUsage().rss; }); }, /** * See {@link https://nodejs.org/api/process.html#process_process_memoryusage} for more information. * * @return {Gauge} */ 'node.process.memory-usage.heap-total': () =&gt; { return new Gauge(() =&gt; { return process.memoryUsage().heapTotal; }); }, /** * See {@link https://nodejs.org/api/process.html#process_process_memoryusage} for more information. * * @return {Gauge} */ 'node.process.memory-usage.heap-used': () =&gt; { return new Gauge(() =&gt; { return process.memoryUsage().heapUsed; }); }, /** * See {@link https://nodejs.org/api/process.html#process_process_memoryusage} for more information. * * @return {Gauge} */ 'node.process.memory-usage.external': () =&gt; { return new Gauge(() =&gt; { const mem = process.memoryUsage(); return Object.prototype.hasOwnProperty.call(mem, 'external') ? mem.external : 0; }); }, /** * Gauge to track how long the node process has been running. * * See {@link https://nodejs.org/api/process.html#process_process_uptime} for more information. * @return {Gauge} */ 'node.process.uptime': () =&gt; { return new Gauge(() =&gt; { return Math.floor(process.uptime()); }); } }; /** * This module contains the methods to create and register default node process metrics to a metrics registry. * * @module node-process-metrics */ module.exports = { /** * Method that can be used to add a set of default node process metrics to your app. * * @param {SelfReportingMetricsRegistry} metricsRegistry * @param {Dimensions} [customDimensions] * @param {number} [reportingIntervalInSeconds] */ createProcessMetrics: (metricsRegistry, customDimensions, reportingIntervalInSeconds) =&gt; { customDimensions = customDimensions || {}; reportingIntervalInSeconds = reportingIntervalInSeconds || DEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDS; Object.keys(nodeProcessMetrics).forEach(metricName =&gt; { metricsRegistry.register( metricName, nodeProcessMetrics[metricName](), customDimensions, reportingIntervalInSeconds ); }); }, /** * Map of metric names to a corresponding function that creates and returns a Metric that tracks it. * See {@link nodeProcessMetrics} */ nodeProcessMetrics }; × Search results Close "},"measured-node-metrics_lib_nodeHttpRequestMetrics.js.html":{"id":"measured-node-metrics_lib_nodeHttpRequestMetrics.js.html","title":"Source: measured-node-metrics/lib/nodeHttpRequestMetrics.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-node-metrics/lib/nodeHttpRequestMetrics.js const { Stopwatch } = require('measured-core'); /** * The default reporting interval for requests * @type {number} */ const DEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDS = 10; /** * This module has functions needed to create middlewares for frameworks such as express. * It also exports the 2 functions needed to implement your own middleware. * If you implement a middleware for a framework not implemented here, please contribute it back. * * @module node-http-request-metrics */ module.exports = { /** * Creates an Express middleware that reports a timer on request data. * With this middleware you will get requests counts and latency percentiles all filterable by status codes, http method, and uri paths. * * @param {SelfReportingMetricsRegistry} metricsRegistry * @param {number} [reportingIntervalInSeconds] * @return {Function} */ createExpressMiddleware: (metricsRegistry, reportingIntervalInSeconds) =&gt; { return (req, res, next) =&gt; { const stopwatch = module.exports.onRequestStart(); res.on('finish', () =&gt; { const { method } = req; const { statusCode } = res; const uri = req.route ? req.route.path : '_unknown'; module.exports.onRequestEnd(metricsRegistry, stopwatch, method, statusCode, uri, reportingIntervalInSeconds); }); next(); }; }, /** * At the start of the request, create a stopwatch, that starts tracking how long the request is taking. * @return {Stopwatch} */ onRequestStart: () =&gt; { return new Stopwatch(); }, /** * When the request ends stop the stop watch and create or update the timer for requests that tracked by method, status code, path. * The timers (meters and histograms) that get reported will be filterable by status codes, http method, the uri path. * You will be able to create dash boards such as success percentage, latency percentiles by uri path and method, etc. * * @param {SelfReportingMetricsRegistry} metricsRegistry The Self Reporting Metrics Registry * @param {Stopwatch} stopwatch The stopwatch created by onRequestStart * @param {string} method The Http Method for the request * @param {string|number} statusCode The status code for the response * @param {string} [uri] The uri path for the request. Please note to avoid out of control time series dimension creation spread, * you would want to strip out ids and or other variables from the uri path. * @param {number} [reportingIntervalInSeconds] override the reporting interval defaults to every 10 seconds. */ onRequestEnd: (metricsRegistry, stopwatch, method, statusCode, uri, reportingIntervalInSeconds) =&gt; { reportingIntervalInSeconds = reportingIntervalInSeconds || DEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDS; const customDimensions = { statusCode: `${statusCode}`, method: `${method}` }; if (uri) { customDimensions.uri = uri; } // get or create the timer for the request count/latency timer const requestTimer = metricsRegistry.getOrCreateTimer('requests', customDimensions, reportingIntervalInSeconds); // stop the request latency counter const time = stopwatch.end(); requestTimer.update(time); } }; × Search results Close "},"measured-reporting_lib_registries_DimensionAwareMetricsRegistry.js.html":{"id":"measured-reporting_lib_registries_DimensionAwareMetricsRegistry.js.html","title":"Source: measured-reporting/lib/registries/DimensionAwareMetricsRegistry.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-reporting/lib/registries/DimensionAwareMetricsRegistry.js /** * Simple registry that stores Metrics by name and dimensions. */ class DimensionAwareMetricsRegistry { constructor() { this._metrics = {}; } /** * Checks to see if a metric with the given name and dimensions is present. * * @param {string} name The metric name * @param {Dimensions} dimensions The dimensions for the metric * @returns {boolean} true if the metric with given dimensions is present */ hasMetric(name, dimensions) { const key = this._generateStorageKey(name, dimensions); return Object.prototype.hasOwnProperty.call(this._metrics, key); } /** * Retrieves a metric with a given name and dimensions is present. * * @param {string} name The metric name * @param {Dimensions} dimensions The dimensions for the metric * @returns {Metric} a wrapper object around name, dimension and {@link Metric} */ getMetric(name, dimensions) { const key = this._generateStorageKey(name, dimensions); return this._metrics[key].metricImpl; } /** * Retrieves a metric by the calculated key (name / dimension combo). * * @param {string} key The registered key for the given registered {@link MetricWrapper} * @returns {MetricWrapper} a wrapper object around name, dimension and {@link Metric} */ getMetricWrapperByKey(key) { return this._metrics[key]; } /** * Upserts a {@link Metric} in the internal storage map for a given name, dimension combo * * @param {string} name The metric name * @param {Metric} metric The {@link Metric} impl * @param {Dimensions} dimensions The dimensions for the metric * @return {string} The registry key for the metric, dimension combo */ putMetric(name, metric, dimensions) { const key = this._generateStorageKey(name, dimensions); this._metrics[key] = { name: name, metricImpl: metric, dimensions: dimensions || {} }; return key; } /** * Returns an array of all keys of metrics stored in this registry. * @return {string[]} all keys of metrics stored in this registry. */ allKeys() { return Object.keys(this._metrics); } /** * Generates a unique key off of the metric name and custom dimensions for internal use in the registry maps. * * @param {string} name The metric name * @param {Dimensions} dimensions The dimensions for the metric * @return {string} a unique key based off of the metric nae and dimensions * @private */ _generateStorageKey(name, dimensions) { let key = name; if (dimensions) { Object.keys(dimensions) .sort() .forEach(dimensionKey =&gt; { key = `${key}-${dimensions[dimensionKey]}`; }); } return key; } } module.exports = DimensionAwareMetricsRegistry; × Search results Close "},"measured-reporting_lib_@types_types.js.html":{"id":"measured-reporting_lib_@types_types.js.html","title":"Source: measured-reporting/lib/@types/types.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-reporting/lib/@types/types.js /** * A wrapper object around a {@link Metric}, {@link Dimensions} and the metric name * * @interface MetricWrapper * @typedef MetricWrapper * @type {Object} * @property {string} name The supplied name of the Metric * @property {Metric} metricImpl The {@link Metric} object * @property {Dimensions} dimensions The {@link Dimensions} for the given {@link Metric} */ /** * A Dictionary of string, string key value pairs * * @interface Dimensions * @typedef Dimensions * @type {Object.&lt;string, string&gt;} * * @example * { * path: &quot;/api/foo&quot; * method: &quot;GET&quot; * statusCode: &quot;200&quot; * } */ × Search results Close "},"measured-core_lib_util_ExponentiallyDecayingSample.js.html":{"id":"measured-core_lib_util_ExponentiallyDecayingSample.js.html","title":"Source: measured-core/lib/util/ExponentiallyDecayingSample.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-core/lib/util/ExponentiallyDecayingSample.js const BinaryHeap = require('./BinaryHeap'); const units = require('./units'); const RESCALE_INTERVAL = units.HOURS; const ALPHA = 0.015; const SIZE = 1028; /** * ExponentiallyDecayingSample */ class ExponentiallyDecayingSample { constructor(options) { options = options || {}; this._elements = new BinaryHeap({ score: element =&gt; -element.priority }); this._rescaleInterval = options.rescaleInterval || RESCALE_INTERVAL; this._alpha = options.alpha || ALPHA; this._size = options.size || SIZE; this._random = options.random || this._random; this._landmark = null; this._nextRescale = null; } update(value, timestamp) { const now = Date.now(); if (!this._landmark) { this._landmark = now; this._nextRescale = this._landmark + this._rescaleInterval; } timestamp = timestamp || now; const newSize = this._elements.size() + 1; const element = { priority: this._priority(timestamp - this._landmark), value: value }; if (newSize &lt;= this._size) { this._elements.add(element); } else if (element.priority &gt; this._elements.first().priority) { this._elements.removeFirst(); this._elements.add(element); } if (now &gt;= this._nextRescale) { this._rescale(now); } } toSortedArray() { return this._elements.toSortedArray().map(element =&gt; element.value); } toArray() { return this._elements.toArray().map(element =&gt; element.value); } toArrayWithWeights() { return this._elements.toArray(); } _weight(age) { // We divide by 1000 to not run into huge numbers before reaching a // rescale event. return Math.exp(this._alpha * (age / 1000)); } _priority(age) { return this._weight(age) / this._random(); } _random() { return Math.random(); } _rescale(now) { now = now || Date.now(); const self = this; const oldLandmark = this._landmark; this._landmark = now || Date.now(); this._nextRescale = now + this._rescaleInterval; const factor = self._priority(-(self._landmark - oldLandmark)); this._elements.toArray().forEach(element =&gt; { element.priority *= factor; }); } } module.exports = ExponentiallyDecayingSample; × Search results Close "},"measured-core_lib_util_ExponentiallyMovingWeightedAverage.js.html":{"id":"measured-core_lib_util_ExponentiallyMovingWeightedAverage.js.html","title":"Source: measured-core/lib/util/ExponentiallyMovingWeightedAverage.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-core/lib/util/ExponentiallyMovingWeightedAverage.js const units = require('./units'); const TICK_INTERVAL = 5 * units.SECONDS; /** * ExponentiallyMovingWeightedAverage */ class ExponentiallyMovingWeightedAverage { constructor(timePeriod, tickInterval) { this._timePeriod = timePeriod || units.MINUTE; this._tickInterval = tickInterval || TICK_INTERVAL; this._alpha = 1 - Math.exp(-this._tickInterval / this._timePeriod); this._count = 0; this._rate = 0; } update(n) { this._count += n; } tick() { const instantRate = this._count / this._tickInterval; this._count = 0; this._rate += this._alpha * (instantRate - this._rate); } rate(timeUnit) { return (this._rate || 0) * timeUnit; } } module.exports = ExponentiallyMovingWeightedAverage; × Search results Close "},"measured-core_lib_metrics_Gauge.js.html":{"id":"measured-core_lib_metrics_Gauge.js.html","title":"Source: measured-core/lib/metrics/Gauge.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-core/lib/metrics/Gauge.js const { MetricTypes } = require('./Metric'); /** * Values that can be read instantly * @implements {Metric} * @example * var Measured = require('measured') * var gauge = new Measured.Gauge(function() { * return process.memoryUsage().rss; * }); */ class Gauge { /** * @param {function} readFn A function that returns the numeric value for this gauge. */ constructor(readFn) { this._readFn = readFn; } /** * @return {number} Gauges directly return the value from the callback which should be a number. */ toJSON() { return this._readFn(); } /** * The type of the Metric Impl. {@link MetricTypes}. * @return {string} The type of the Metric Impl. */ getType() { return MetricTypes.GAUGE; } } module.exports = Gauge; × Search results Close "},"measured-core_lib_metrics_Histogram.js.html":{"id":"measured-core_lib_metrics_Histogram.js.html","title":"Source: measured-core/lib/metrics/Histogram.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-core/lib/metrics/Histogram.js const { MetricTypes } = require('./Metric'); const binarySearch = require('binary-search'); const EDS = require('../util/ExponentiallyDecayingSample'); /** * Keeps a reservoir of statistically relevant values biased towards the last 5 minutes to explore their distribution. * @implements {Metric} * @example * var Measured = require('measured') * var histogram = new Measured.Histogram(); * http.createServer(function(req, res) { * if (req.headers['content-length']) { * histogram.update(parseInt(req.headers['content-length'], 10)); * } * }); */ class Histogram { /** @param {HistogramProperties} [properties] see {@link HistogramProperties}. */ constructor(properties) { this._properties = properties || {}; this._initializeState(); } _initializeState() { this._sample = this._properties.sample || new EDS(); this._percentilesMethod = this._properties.percentilesMethod || this._percentiles; this._min = null; this._max = null; this._count = 0; this._sum = 0; // These are for the Welford algorithm for calculating running constiance // without floating-point doom. this._constianceM = 0; this._constianceS = 0; } /** * Pushes value into the sample. timestamp defaults to Date.now(). * @param {number} value */ update(value) { this._count++; this._sum += value; this._sample.update(value); this._updateMin(value); this._updateMax(value); this._updateVariance(value); } _percentiles(percentiles) { const values = this._sample.toArray().sort((a, b) =&gt; { return a === b ? 0 : a - b; }); const results = {}; let i, percentile, pos, lower, upper; for (i = 0; i &lt; percentiles.length; i++) { percentile = percentiles[i]; if (values.length) { pos = percentile * (values.length + 1); if (pos &lt; 1) { results[percentile] = values[0]; } else if (pos &gt;= values.length) { results[percentile] = values[values.length - 1]; } else { lower = values[Math.floor(pos) - 1]; upper = values[Math.ceil(pos) - 1]; results[percentile] = lower + (pos - Math.floor(pos)) * (upper - lower); } } else { results[percentile] = null; } } return results; } weightedPercentiles(percentiles) { const values = this._sample.toArrayWithWeights().sort((a, b) =&gt; { return a.value === b.value ? 0 : a.value - b.value; }); const sumWeight = values.reduce((sum, sample) =&gt; { return sum + sample.priority; }, 0); const normWeights = values.map(value =&gt; { return value.priority / sumWeight; }); const quantiles = [0]; let i; for (i = 1; i &lt; values.length; i++) { quantiles[i] = quantiles[i - 1] + normWeights[i - 1]; } function gt(a, b) { return a - b; } const results = {}; let percentile, pos; for (i = 0; i &lt; percentiles.length; i++) { percentile = percentiles[i]; if (values.length) { pos = binarySearch(quantiles, percentile, gt); if (pos &lt; 0) { results[percentile] = values[-pos - 1 - 1].value; } else if (pos &lt; 1) { results[percentile] = values[0].value; } else if (pos &gt;= values.length) { results[percentile] = values[values.length - 1].value; } } else { results[percentile] = null; } } return results; } /** * Resets all values. Histograms initialized with custom options will be reset to the default settings (patch welcome). */ reset() { // while this is technically a bug?, copying existing logic to maintain current api, // TODO reset should reset the sample, not override it with a new EDS() this._properties.sample = new EDS(); this._initializeState(); } /** * Checks whether the histogram contains values. * @return {boolean} Whether the histogram contains values. */ hasValues() { return this._count &gt; 0; } /** * @return {HistogramData} */ toJSON() { const percentiles = this._percentilesMethod([0.5, 0.75, 0.95, 0.99, 0.999]); return { min: this._min, max: this._max, sum: this._sum, variance: this._calculateVariance(), mean: this._calculateMean(), stddev: this._calculateStddev(), count: this._count, median: percentiles[0.5], p75: percentiles[0.75], p95: percentiles[0.95], p99: percentiles[0.99], p999: percentiles[0.999] }; } _updateMin(value) { if (this._min === null || value &lt; this._min) { this._min = value; } } _updateMax(value) { if (this._max === null || value &gt; this._max) { this._max = value; } } _updateVariance(value) { if (this._count === 1) { this._constianceM = value; return value; } const oldM = this._constianceM; this._constianceM += (value - oldM) / this._count; this._constianceS += (value - oldM) * (value - this._constianceM); // TODO is this right, above it returns in the if statement but does nothing but update internal state for the else case? return undefined; } /** * * @return {number|null} * @private */ _calculateMean() { return this._count === 0 ? 0 : this._sum / this._count; } /** * @return {number|null} * @private */ _calculateVariance() { return this._count &lt;= 1 ? null : this._constianceS / (this._count - 1); } /** * @return {number|null} * @private */ _calculateStddev() { return this._count &lt; 1 ? null : Math.sqrt(this._calculateVariance()); } /** * The type of the Metric Impl. {@link MetricTypes}. * @return {string} The type of the Metric Impl. */ getType() { return MetricTypes.HISTOGRAM; } } module.exports = Histogram; /** * Properties to create a {@link Histogram} with. * * @interface HistogramProperties * @typedef HistogramProperties * @type {Object} * @property {object} sample The sample reservoir to use. Defaults to an ExponentiallyDecayingSample. */ /** * The data returned from Histogram::toJSON() * @interface HistogramData * @typedef HistogramData * @typedef {object} * @property {number|null} min The lowest observed value. * @property {number|null} max The highest observed value. * @property {number|null} sum The sum of all observed values. * @property {number|null} variance The variance of all observed values. * @property {number|null} mean The average of all observed values. * @property {number|null} stddev The stddev of all observed values. * @property {number} count The number of observed values. * @property {number} median 50% of all values in the resevoir are at or below this value. * @property {number} p75 See median, 75% percentile. * @property {number} p95 See median, 95% percentile. * @property {number} p99 See median, 99% percentile. * @property {number} p999 See median, 99.9% percentile. */ × Search results Close "},"measured-reporting_lib_reporters_LoggingReporter.js.html":{"id":"measured-reporting_lib_reporters_LoggingReporter.js.html","title":"Source: measured-reporting/lib/reporters/LoggingReporter.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-reporting/lib/reporters/LoggingReporter.js const Reporter = require('./Reporter'); /** * A reporter impl that simply logs the metrics via the Logger. * * @example * const { SelfReportingMetricsRegistry, LoggingReporter } = require('measured-reporting'); * const registry = new SelfReportingMetricsRegistry(new LoggingReporter()); * * @extends {Reporter} */ class LoggingReporter extends Reporter { /** * @param {LoggingReporterOptions} [options] */ constructor(options) { super(options); const level = (options || {}).logLevelToLogAt; this._logLevel = (level || 'info').toLowerCase(); } /** * Logs the metrics via the inherited logger instance. * @param {MetricWrapper[]} metrics * @protected */ _reportMetrics(metrics) { metrics.forEach(metric =&gt; { this._log[this._logLevel]( JSON.stringify({ metricName: metric.name, dimensions: this._getDimensions(metric), data: metric.metricImpl.toJSON() }) ); }); } } module.exports = LoggingReporter; /** * @interface LoggingReporterOptions * @typedef LoggingReporterOptions * @type {Object} * @property {Dimensions} defaultDimensions A dictionary of dimensions to include with every metric reported * @property {Logger} [logger] The logger to use, if not supplied a new Buynan logger will be created * @property {string} [logLevel] The log level to use with the created Bunyan logger if you didn't supply your own logger. * @property {number} [defaultReportingIntervalInSeconds] The default reporting interval to use if non is supplied when registering a metric, defaults to 10 seconds. * @property {string} [logLevelToLogAt] You can specify the log level ['debug', 'info', 'warn', 'error'] that this reporter will use when logging the metrics via the logger. */ × Search results Close "},"measured-reporting_lib_reporters_Reporter.js.html":{"id":"measured-reporting_lib_reporters_Reporter.js.html","title":"Source: measured-reporting/lib/reporters/Reporter.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-reporting/lib/reporters/Reporter.js const bunyan = require('bunyan'); const Optional = require('optional-js'); const { validateReporterParameters } = require('../validators/inputValidators'); const DEFAULT_REPORTING_INTERVAL_IN_SECONDS = 10; /** * The abstract reporter that specific implementations can extend to create a Self Reporting Metrics Registry Reporter. * * {@link SelfReportingMetricsRegistry} * * @example * const os = require('os'); * const process = require('process'); * const { SelfReportingMetricsRegistry, Reporter } = require('measured-reporting'); * * // Create a self reporting registry with a named anonymous reporter instance; * const registry = new SelfReportingMetricsRegistry( * new class ConsoleReporter extends Reporter { * constructor() { * super({ * defaultDimensions: { * hostname: os.hostname(), * env: process.env['NODE_ENV'] ? process.env['NODE_ENV'] : 'unset' * } * }) * } * * _reportMetrics(metrics) { * metrics.forEach(metric =&gt; { * console.log(JSON.stringify({ * metricName: metric.name, * dimensions: this._getDimensions(metric), * data: metric.metricImpl.toJSON() * })) * }); * } * }() * ); * * @example * // Create a regular class that extends Reporter * class LoggingReporter extends Reporter { * _reportMetrics(metrics) { * metrics.forEach(metric =&gt; { * this._log.info(JSON.stringify({ * metricName: metric.name, * dimensions: this._getDimensions(metric), * data: metric.metricImpl.toJSON() * })) * }); * } * } * * @abstract */ class Reporter { /** * @param {ReporterOptions} [options] The optional params to supply when creating a reporter. */ constructor(options) { if (this.constructor === Reporter) { throw new TypeError(&quot;Can't instantiate abstract class!&quot;); } options = options || {}; validateReporterParameters(options); /** * Map of intervals to metric keys, this will be used to look up what metrics should be reported at a given interval. * * @type {Object.&lt;number, Set&lt;string&gt;&gt;} * @private */ this._intervalToMetric = {}; this._intervals = []; /** * Map of default dimensions, that should be sent with every metric. * * @type {Dimensions} * @protected */ this._defaultDimensions = options.defaultDimensions || {}; /** * Loggers to use, defaults to a new bunyan logger if nothing is supplied in options * @type {Logger} * @protected */ this._log = options.logger || bunyan.createLogger({ name: 'Reporter', level: options.logLevel || 'info' }); /** * The default reporting interval, a number in seconds. * If not overridden via the {@see ReporterOptions}, defaults to 10 seconds. * * @type {number} * @protected */ this._defaultReportingIntervalInSeconds = options.defaultReportingIntervalInSeconds || DEFAULT_REPORTING_INTERVAL_IN_SECONDS; /** * Flag to indicate if reporting timers should be unref'd. * If not overridden via the {@see ReporterOptions}, defaults to false. * * @type {boolean} * @protected */ this._unrefTimers = !!options.unrefTimers; } /** * Sets the registry, this must be called before reportMetricOnInterval. * * @param {DimensionAwareMetricsRegistry} registry */ setRegistry(registry) { this._registry = registry; } /** * Informs the reporter to report a metric on a given interval in seconds. * * @param {string} metricKey The metric key for the metric in the metric registry. * @param {number} intervalInSeconds The interval in seconds to report the metric on. */ reportMetricOnInterval(metricKey, intervalInSeconds) { intervalInSeconds = intervalInSeconds || this._defaultReportingIntervalInSeconds; if (!this._registry) { throw new Error( 'You must call setRegistry(registry) before telling a Reporter to report a metric on an interval.' ); } if (Object.prototype.hasOwnProperty.call(this._intervalToMetric, intervalInSeconds)) { this._intervalToMetric[intervalInSeconds].add(metricKey); } else { this._intervalToMetric[intervalInSeconds] = new Set([metricKey]); this._createIntervalCallback(intervalInSeconds); setImmediate(() =&gt; { this._reportMetricsWithInterval(intervalInSeconds); }); } } /** * Creates the timed callback loop for the given interval. * * @param {number} intervalInSeconds the interval in seconds for the timeout callback * @private */ _createIntervalCallback(intervalInSeconds) { this._log.debug(`_createIntervalCallback() called with intervalInSeconds: ${intervalInSeconds}`); const timer = setInterval(() =&gt; { this._reportMetricsWithInterval(intervalInSeconds); }, intervalInSeconds * 1000); if (this._unrefTimers) { timer.unref(); } this._intervals.push(timer); } /** * Gathers all the metrics that have been registered to report on the given interval. * * @param {number} interval The interval to look up what metrics to report * @private */ _reportMetricsWithInterval(interval) { this._log.debug(`_reportMetricsWithInterval() called with intervalInSeconds: ${interval}`); try { Optional.of(this._intervalToMetric[interval]).ifPresent(metrics =&gt; { const metricsToSend = []; metrics.forEach(metricKey =&gt; { metricsToSend.push(this._registry.getMetricWrapperByKey(metricKey)); }); this._reportMetrics(metricsToSend); }); } catch (error) { this._log.error('Failed to send metrics to signal fx', error); } } /** * This method gets called with an array of {@link MetricWrapper} on an interval, when metrics should be reported. * * This is the main method that needs to get implemented when created an aggregator specific reporter. * * @param {MetricWrapper[]} metrics The array of metrics to report. * @protected * @abstract */ _reportMetrics(metrics) { throw new TypeError('Abstract method _reportMetrics(metrics) must be implemented in implementation class'); } /** * * @param {MetricWrapper} metric The Wrapped Metric Object. * @return {Dimensions} The left merged default dimensions with the metric specific dimensions * @protected */ _getDimensions(metric) { return Object.assign({}, this._defaultDimensions, metric.dimensions); } /** * Clears the intervals that are running to report metrics at an interval, and resets the state. */ shutdown() { this._intervals.forEach(interval =&gt; clearInterval(interval)); this._intervals = []; this._intervalToMetric = {}; } } /** * Options for creating a {@link Reporter} * @interface ReporterOptions * @typedef ReporterOptions * @type {Object} * @property {Dimensions} defaultDimensions A dictionary of dimensions to include with every metric reported * @property {Logger} logger The logger to use, if not supplied a new Buynan logger will be created * @property {string} logLevel The log level to use with the created Bunyan logger if you didn't supply your own logger. * @property {number} defaultReportingIntervalInSeconds The default reporting interval to use if non is supplied when registering a metric, defaults to 10 seconds. */ module.exports = Reporter; × Search results Close "},"measured-core_lib_metrics_Meter.js.html":{"id":"measured-core_lib_metrics_Meter.js.html","title":"Source: measured-core/lib/metrics/Meter.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-core/lib/metrics/Meter.js const { MetricTypes } = require('./Metric'); const units = require('../util/units'); const EWMA = require('../util/ExponentiallyMovingWeightedAverage'); const RATE_UNIT = units.SECONDS; const TICK_INTERVAL = 5 * units.SECONDS; /** * Things that are measured as events / interval. * @implements {Metric} * @example * var Measured = require('measured') * var meter = new Measured.Meter(); * http.createServer(function(req, res) { * meter.mark(); * }); */ class Meter { /** * @param {MeterProperties} [properties] see {@link MeterProperties}. */ constructor(properties) { this._properties = properties || {}; this._initializeState(); } /** * Initializes the state of this Metric * @private */ _initializeState() { this._rateUnit = this._properties.rateUnit || RATE_UNIT; this._tickInterval = this._properties.tickInterval || TICK_INTERVAL; if (this._properties.getTime) { this._getTime = this._properties.getTime; } this._m1Rate = this._properties.m1Rate || new EWMA(units.MINUTES, this._tickInterval); this._m5Rate = this._properties.m5Rate || new EWMA(5 * units.MINUTES, this._tickInterval); this._m15Rate = this._properties.m15Rate || new EWMA(15 * units.MINUTES, this._tickInterval); this._count = 0; this._currentSum = 0; this._startTime = this._getTime(); this._lastToJSON = this._getTime(); this._interval = setInterval(this._tick.bind(this), TICK_INTERVAL); } /** * Register n events as having just occured. Defaults to 1. * @param {number} [n] */ mark(n) { if (!this._interval) { this.start(); } n = n || 1; this._count += n; this._currentSum += n; this._m1Rate.update(n); this._m5Rate.update(n); this._m15Rate.update(n); } start() {} end() { clearInterval(this._interval); this._interval = null; } /** * Refs the backing timer again. Idempotent. */ ref() { if (this._interval &amp;&amp; this._interval.ref) { this._interval.ref(); } } /** * Unrefs the backing timer. The meter will not keep the event loop alive. Idempotent. */ unref() { if (this._interval &amp;&amp; this._interval.unref) { this._interval.unref(); } } _tick() { this._m1Rate.tick(); this._m5Rate.tick(); this._m15Rate.tick(); } /** * Resets all values. Meters initialized with custom options will be reset to the default settings (patch welcome). */ reset() { this.end(); this._initializeState(); } meanRate() { if (this._count === 0) { return 0; } const elapsed = this._getTime() - this._startTime; return this._count / elapsed * this._rateUnit; } currentRate() { const currentSum = this._currentSum; const duration = this._getTime() - this._lastToJSON; const currentRate = currentSum / duration * this._rateUnit; this._currentSum = 0; this._lastToJSON = this._getTime(); // currentRate could be NaN if duration was 0, so fix that return currentRate || 0; } /** * @return {MeterData} */ toJSON() { return { mean: this.meanRate(), count: this._count, currentRate: this.currentRate(), '1MinuteRate': this._m1Rate.rate(this._rateUnit), '5MinuteRate': this._m5Rate.rate(this._rateUnit), '15MinuteRate': this._m15Rate.rate(this._rateUnit) }; } _getTime() { if (!process.hrtime) { return new Date().getTime(); } const hrtime = process.hrtime(); return hrtime[0] * 1000 + hrtime[1] / (1000 * 1000); } /** * The type of the Metric Impl. {@link MetricTypes}. * @return {string} The type of the Metric Impl. */ getType() { return MetricTypes.METER; } } module.exports = Meter; /** * * @interface MeterProperties * @typedef MeterProperties * @type {Object} * @property {number} rateUnit The rate unit. Defaults to 1000 (1 sec). * @property {number} tickInterval The interval in which the averages are updated. Defaults to 5000 (5 sec). * @example * const meter = new Meter({ rateUnit: 1000, tickInterval: 5000}) */ /** * The data returned from Meter::toJSON() * @interface MeterData * @typedef MeterData * @typedef {object} * @property {number} mean The average rate since the meter was started. * @property {number} count The total of all values added to the meter. * @property {number} currentRate The rate of the meter since the last toJSON() call. * @property {number} 1MinuteRate The rate of the meter biased towards the last 1 minute. * @property {number} 5MinuteRate The rate of the meter biased towards the last 5 minutes. * @property {number} 15MinuteRate The rate of the meter biased towards the last 15 minutes. */ × Search results Close "},"measured-core_lib_metrics_Metric.js.html":{"id":"measured-core_lib_metrics_Metric.js.html","title":"Source: measured-core/lib/metrics/Metric.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-core/lib/metrics/Metric.js /** * Interface for Metric types. * * Implementations * &lt;p&gt; * &lt;li&gt;&lt;a href=&quot;Counter.html&quot;&gt;Counter&lt;/a&gt;, things that increment or decrement.&lt;/li&gt; * &lt;li&gt;&lt;a href=&quot;Gauge.html&quot;&gt;Gauge&lt;/a&gt;, values that can be read instantly via a supplied call back.&lt;/li&gt; * &lt;li&gt;&lt;a href=&quot;Histogram.html&quot;&gt;Histogram&lt;/a&gt;, keeps a reservoir of statistically relevant values to explore their distribution.&lt;/li&gt; * &lt;li&gt;&lt;a href=&quot;Meter.html&quot;&gt;Meter&lt;/a&gt;, things that are measured as events / interval.&lt;/li&gt; * &lt;li&gt;&lt;a href=&quot;NoOpMeter.html&quot;&gt;NoOpMeter&lt;/a&gt;, an empty impl of meter, useful for supplying to a Timer, when you only care about the Histogram.&lt;/li&gt; * &lt;li&gt;&lt;a href=&quot;SettableGauge.html&quot;&gt;SettableGauge&lt;/a&gt;, just like a Gauge but its value is set directly rather than supplied by a callback.&lt;/li&gt; * &lt;li&gt;&lt;a href=&quot;CachedGauge.html&quot;&gt;CachedGauge&lt;/a&gt;, A Cached Gauge takes a function that returns a promise that resolves a value that should be cached and updated on a given interval.&lt;/li&gt; * &lt;li&gt;&lt;a href=&quot;Timer.html&quot;&gt;Timer&lt;/a&gt;, timers are a combination of Meters and Histograms. They measure the rate as well as distribution of scalar events.&lt;/li&gt; * &lt;/p&gt; * * @interface Metric */ // eslint-disable-next-line no-unused-vars class Metric { /** * Please note that dispite its name, this method can return raw numbers on * certain implementations such as counters and gauges. * * @return {any} Returns the data from the Metric */ toJSON() {} /** * The type of the Metric Impl. {@link MetricTypes}. * @return {string} The type of the Metric Impl. */ getType() {} } /** * An enum like object that is the set of core metric types that all implementors of {@link Metric} are. * * @typedef MetricTypes * @interface MetricTypes * @type {Object.&lt;string, string&gt;} * @property {COUNTER} The type for Counters. * @property {GAUGE} The type for Gauges. * @property {HISTOGRAM} The type for Histograms. * @property {METER} The type for Meters. * @property {TIMER} The type for Timers. */ const MetricTypes = { COUNTER: 'Counter', GAUGE: 'Gauge', HISTOGRAM: 'Histogram', METER: 'Meter', TIMER: 'Timer' }; module.exports = { MetricTypes }; × Search results Close "},"measured-signalfx-reporter_lib_reporters_SignalFxMetricsReporter.js.html":{"id":"measured-signalfx-reporter_lib_reporters_SignalFxMetricsReporter.js.html","title":"Source: measured-signalfx-reporter/lib/reporters/SignalFxMetricsReporter.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-signalfx-reporter/lib/reporters/SignalFxMetricsReporter.js const { Reporter } = require('measured-reporting'); const { MetricTypes } = require('measured-core'); const { validateSignalFxClient } = require('../validators/inputValidators'); const { USER_DEFINED } = require('../SignalFxEventCategories'); /** * A Reporter that reports metrics to Signal Fx * @extends {Reporter} */ class SignalFxMetricsReporter extends Reporter { /** * @param {SignalFxClient} signalFxClient The configured signal fx client. * @param {ReporterOptions} [options] See {@link ReporterOptions}. */ constructor(signalFxClient, options) { super(options); validateSignalFxClient(signalFxClient); this._signalFxClient = signalFxClient; } /** * Sends metrics to signal fx, converting name and dimensions and {@link Metric} to data signal fx can ingest * @param {MetricWrapper[]} metrics The array of metrics to send to signal fx. * @protected */ _reportMetrics(metrics) { this._log.debug('_reportMetrics() called'); let signalFxDataPointRequest = {}; metrics.forEach(metric =&gt; { if (!metric) { this._log.warn('Metric was null when it should not have been'); return; } signalFxDataPointRequest = this._processMetric(metric, signalFxDataPointRequest); }); this._log.debug('Sending data to Signal Fx'); this._signalFxClient.send(signalFxDataPointRequest).catch(error =&gt; { this._log.error('Failed to send metrics to signal fx error:', error); }); } /** * Method for getting raw signal fx api request values from the Timer Object. * * @param {MetricWrapper} metric metric The Wrapped Metric Object. * @param {any} currentBuiltRequest The signal fx request that is being built. * @return {any} the currentBuiltRequest The signal fx request that is being built with the given metric in it. * @protected */ _processMetric(metric, currentBuiltRequest) { const newRequest = Object.assign({}, currentBuiltRequest); const { name, metricImpl } = metric; const mergedDimensions = this._getDimensions(metric); const valuesToProcess = this._getValuesToProcessForType(name, metricImpl); valuesToProcess.forEach(metricValueTypeWrapper =&gt; { const signalFxDataPointMetric = { metric: metricValueTypeWrapper.metric, value: metricValueTypeWrapper.value, dimensions: mergedDimensions }; if (Object.prototype.hasOwnProperty.call(newRequest, metricValueTypeWrapper.type)) { newRequest[metricValueTypeWrapper.type].push(signalFxDataPointMetric); } else { newRequest[metricValueTypeWrapper.type] = [signalFxDataPointMetric]; } }); return newRequest; } /** * Maps Measured Metrics Object JSON outputs to their respective signal fx metrics using logic from * com.signalfx.codahale.reporter.AggregateMetricSenderSessionWrapper in the java lib to derive naming * * @param {string} name The registered metric base name * @param {Metric} metric The metric. * @return {MetricValueTypeWrapper[]} an array of MetricValueTypeWrapper that can be used to * build the SignalFx data point request * @protected */ _getValuesToProcessForType(name, metric) { const type = metric.getType(); switch (type) { case MetricTypes.TIMER: return this._getValuesToProcessForTimer(name, metric); case MetricTypes.GAUGE: return this._getValuesToProcessForGauge(name, metric); case MetricTypes.COUNTER: return this._getValuesToProcessForCounter(name, metric); case MetricTypes.HISTOGRAM: return this._getValuesToProcessForHistogram(name, metric); case MetricTypes.METER: this._log.warn( 'Meters are not reported to SignalFx. Meters do not make sense to use with SignalFx because the same values ' + 'can be calculated using simple counters and aggregations within SignalFx itself.' ); return []; default: this._log.error(`Metric Type: ${type} has not been implemented to report to signal fx`); return []; } } /** * Maps and Filters values from a Timer to a set of metrics to report to SigFx. * * @param {string} name The registry name * @param {Timer} timer The Timer * @return {MetricValueTypeWrapper[]} Returns an array of MetricValueTypeWrapper to use to build the request * @protected */ _getValuesToProcessForTimer(name, timer) { let valuesToProcess = []; // only grab histogram data as Meters can be accomplished with signal fx using the count from the histogram valuesToProcess = valuesToProcess.concat(this._getValuesToProcessForHistogram(name, timer._histogram)); return valuesToProcess; } /** * Maps values from a Gauge to a set of metrics to report to SigFx. * * @param {string} name The registry name * @param {Gauge} gauge The Gauge * @return {MetricValueTypeWrapper[]} Returns an array of MetricValueTypeWrapper to use to build the request * @protected */ _getValuesToProcessForGauge(name, gauge) { const valuesToProcess = []; valuesToProcess.push({ metric: `${name}`, value: gauge.toJSON(), type: SIGNAL_FX_GAUGE }); return valuesToProcess; } /** * Maps values from a Counter to a set of metrics to report to SigFx. * * @param {string} name The registry name * @param {Counter} counter The data from the measure metric object * @return {MetricValueTypeWrapper[]} Returns an array of MetricValueTypeWrapper to use to build the request * @protected */ _getValuesToProcessForCounter(name, counter) { const valuesToProcess = []; valuesToProcess.push({ metric: `${name}.count`, value: counter.toJSON(), type: SIGNAL_FX_CUMULATIVE_COUNTER }); return valuesToProcess; } /** * Maps and Filters values from a Histogram to a set of metrics to report to SigFx. * * @param {string} name The registry name * @param {Histogram} histogram The Histogram * @return {MetricValueTypeWrapper[]} Returns an array of MetricValueTypeWrapper to use to build the request * @protected */ _getValuesToProcessForHistogram(name, histogram) { // TODO add full list of histogram metrics but enable filter const data = histogram.toJSON(); const valuesToProcess = []; valuesToProcess.push({ metric: `${name}.count`, value: data.count || 0, type: SIGNAL_FX_CUMULATIVE_COUNTER }); valuesToProcess.push({ metric: `${name}.max`, value: data.max || 0, type: SIGNAL_FX_GAUGE }); valuesToProcess.push({ metric: `${name}.min`, value: data.min || 0, type: SIGNAL_FX_GAUGE }); valuesToProcess.push({ metric: `${name}.mean`, value: data.mean || 0, type: SIGNAL_FX_GAUGE }); valuesToProcess.push({ metric: `${name}.p95`, value: data.p95 || 0, type: SIGNAL_FX_GAUGE }); valuesToProcess.push({ metric: `${name}.p99`, value: data.p99 || 0, type: SIGNAL_FX_GAUGE }); return valuesToProcess; } /** * Function exposes the event API of Signal Fx. * See {@link https://github.com/signalfx/signalfx-nodejs#sending-events} for more details. * * @param {string} eventType The event type (name of the event time series). * @param {SignalFxEventCategoryId} [category] the category of event. See {@link module:SignalFxEventCategories}. Value by default is USER_DEFINED. * @param {Dimensions} [dimensions] a map of event dimensions, empty dictionary by default * @param {Object.&lt;string, string&gt;} [properties] a map of extra properties on that event, empty dictionary by default * @param {number} [timestamp] a timestamp, by default is current time. * * @example * const { * SignalFxSelfReportingMetricsRegistry, * SignalFxMetricsReporter, * SignalFxEventCategories * } = require('measured-signalfx-reporter'); * const registry = new SignalFxSelfReportingMetricsRegistry(new SignalFxMetricsReporter(signalFxClient)); * registry.sendEvent('uncaughtException', SignalFxEventCategories.ALERT); */ sendEvent(eventType, category, dimensions, properties, timestamp) { const body = { eventType, category: category || USER_DEFINED, dimensions: this._getDimensions({ dimensions }), properties, timestamp }; Object.keys(body).forEach(key =&gt; body[key] == null &amp;&amp; delete body[key]); return this._signalFxClient.sendEvent(body); } } // const SIGNAL_FX_COUNTER = 'counters'; const SIGNAL_FX_GAUGE = 'gauges'; const SIGNAL_FX_CUMULATIVE_COUNTER = 'cumulative_counters'; module.exports = SignalFxMetricsReporter; /** * Wrapper object to wrap metric value and SFX metadata needed to send metric value to SFX data ingestion. * * @interface MetricValueTypeWrapper * @typedef MetricValueTypeWrapper * @type {Object} * @property {string} metric The metric name to report to SignalFx * @property {number} value the value to report to SignalFx * @property {string} type The mapped SignalFx metric type */ × Search results Close "},"measured-node-metrics_lib_utils_CpuUtils.js.html":{"id":"measured-node-metrics_lib_utils_CpuUtils.js.html","title":"Source: measured-node-metrics/lib/utils/CpuUtils.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-node-metrics/lib/utils/CpuUtils.js const os = require('os'); /** * @module CpuUtils */ module.exports = { /** * * @return {{idle: number, total: number}} */ cpuAverage: () =&gt; { //Initialise sum of idle and time of cores and fetch CPU info let totalIdle = 0, totalTick = 0; const cpus = os.cpus(); cpus.forEach(cpu =&gt; { //Total up the time in the cores tick Object.keys(cpu.times).forEach(type =&gt; { totalTick += cpu.times[type]; }); //Total up the idle time of the core totalIdle += cpu.times.idle; }); //Return the average Idle and Tick times return { idle: totalIdle / cpus.length, total: totalTick / cpus.length }; }, /** * * @param {{idle: number, total: number}} startMeasure * @param {{idle: number, total: number}} endMeasure */ calculateCpuUsagePercent: (startMeasure, endMeasure) =&gt; { //Calculate the difference in idle and total time between the measures const idleDifference = endMeasure.idle - startMeasure.idle; const totalDifference = endMeasure.total - startMeasure.total; //Calculate the average percentage CPU usage return Math.ceil(100 - 100 * idleDifference / totalDifference); } }; × Search results Close "},"measured-reporting_lib_validators_inputValidators.js.html":{"id":"measured-reporting_lib_validators_inputValidators.js.html","title":"Source: measured-reporting/lib/validators/inputValidators.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-reporting/lib/validators/inputValidators.js const Optional = require('optional-js'); const { validateMetric } = require('measured-core').metricValidators; /** * This module contains various validators to validate publicly exposed input. * * @module inputValidators */ module.exports = { /** * Validates @{link Gauge} options. * * @param {string} name The metric name * @param {function} callback The callback for the Gauge * @param {Dimensions} dimensions The optional custom dimensions * @param {number} publishingIntervalInSeconds the optional publishing interval */ validateGaugeOptions: (name, callback, dimensions, publishingIntervalInSeconds) =&gt; { module.exports.validateCommonMetricParameters(name, dimensions, publishingIntervalInSeconds); module.exports.validateNumberReturningCallback(callback); }, /** * Validates @{link Gauge} options. * * @param {string} name The metric name * @param {function} callback The callback for the CachedGauge * @param {Dimensions} dimensions The optional custom dimensions * @param {number} publishingIntervalInSeconds the optional publishing interval */ validateCachedGaugeOptions: (name, callback, dimensions, publishingIntervalInSeconds) =&gt; { module.exports.validateCommonMetricParameters(name, dimensions, publishingIntervalInSeconds); // Should we validate the promise call back, it may be expensive or produce a race condition in some use-cases. }, /** * Validates the create histogram Options. * * @param {string} name The metric name * @param {Dimensions} dimensions The optional custom dimensions * @param {number} publishingIntervalInSeconds the optional publishing interval */ validateHistogramOptions: (name, dimensions, publishingIntervalInSeconds) =&gt; { module.exports.validateCommonMetricParameters(name, dimensions, publishingIntervalInSeconds); }, /** * Validates the create counter Options. * * @param {string} name The metric name * @param {Dimensions} dimensions The optional custom dimensions * @param {number} publishingIntervalInSeconds the optional publishing interval */ validateCounterOptions: (name, dimensions, publishingIntervalInSeconds) =&gt; { module.exports.validateCommonMetricParameters(name, dimensions, publishingIntervalInSeconds); }, /** * Validates the create timer Options. * * @param {string} name The metric name * @param {Dimensions} dimensions The optional custom dimensions * @param {number} publishingIntervalInSeconds the optional publishing interval */ validateTimerOptions: (name, dimensions, publishingIntervalInSeconds) =&gt; { module.exports.validateCommonMetricParameters(name, dimensions, publishingIntervalInSeconds); }, /** * Validates the create timer Options. * * @param {string} name The metric name * @param {Metric} metric The metric instance * @param {Dimensions} dimensions The optional custom dimensions * @param {number} publishingIntervalInSeconds the optional publishing interval */ validateRegisterOptions: (name, metric, dimensions, publishingIntervalInSeconds) =&gt; { module.exports.validateMetric(metric); module.exports.validateCommonMetricParameters(name, dimensions, publishingIntervalInSeconds); }, /** * Validates the create settable gauge Options. * * @param {string} name The metric name * @param {Dimensions} dimensions The optional custom dimensions * @param {number} publishingIntervalInSeconds the optional publishing interval */ validateSettableGaugeOptions: (name, dimensions, publishingIntervalInSeconds) =&gt; { module.exports.validateCommonMetricParameters(name, dimensions, publishingIntervalInSeconds); }, /** * Validates the options that are common amoung all create metric methods * * @param {string} name The metric name * @param {Dimensions} dimensions The optional custom dimensions * @param {number} publishingIntervalInSeconds the optional publishing interval */ validateCommonMetricParameters: (name, dimensions, publishingIntervalInSeconds) =&gt; { module.exports.validateMetricName(name); module.exports.validateOptionalDimensions(dimensions); module.exports.validateOptionalPublishingInterval(publishingIntervalInSeconds); }, /** * Validates the metric name. * * @param name The metric name. */ validateMetricName: name =&gt; { const type = typeof name; if (type !== 'string') { throw new TypeError(`options.name is a required option and must be of type string, actual type: ${type}`); } }, /** * Validates that a metric implements the metric interface. * * @function * @name validateMetric * @param {Metric} metric The object that is supposed to be a metric. */ validateMetric, /** * Validates the provided callback. * * @param callback The provided callback for a gauge. */ validateNumberReturningCallback: callback =&gt; { const type = typeof callback; if (type !== 'function') { throw new TypeError(`options.callback is a required option and must be function, actual type: ${type}`); } const callbackType = typeof callback(); if (callbackType !== 'number') { throw new TypeError(`options.callback must return a number, actual return type: ${callbackType}`); } }, /** * Validates a set of optional dimensions * @param dimensionsOptional */ validateOptionalDimensions: dimensionsOptional =&gt; { Optional.ofNullable(dimensionsOptional).ifPresent(dimensions =&gt; { const type = typeof dimensions; if (type !== 'object') { throw new TypeError(`options.dimensions should be an object, actual type: ${type}`); } if (Array.isArray(dimensions)) { throw new TypeError('dimensions where detected to be an array, expected Object&lt;string, string&gt;'); } Object.keys(dimensions).forEach(key =&gt; { const valueType = typeof dimensions[key]; if (valueType !== 'string') { throw new TypeError(`options.dimensions.${key} should be of type string, actual type: ${type}`); } }); }); }, /** * Validates that an optional logger instance at least has the methods we expect. * @param loggerOptional */ validateOptionalLogger: loggerOptional =&gt; { Optional.ofNullable(loggerOptional).ifPresent(logger =&gt; { if ( typeof logger.debug !== 'function' || typeof logger.info !== 'function' || typeof logger.warn !== 'function' || typeof logger.error !== 'function' ) { throw new TypeError( 'The logger that was passed in does not support all required ' + 'logging methods, expected object to have functions debug, info, warn, and error with ' + 'method signatures (...msgs) =&gt; {}' ); } }); }, /** * Validates the optional publishing interval. * * @param publishingIntervalInSecondsOptional The optional publishing interval. */ validateOptionalPublishingInterval: publishingIntervalInSecondsOptional =&gt; { Optional.ofNullable(publishingIntervalInSecondsOptional).ifPresent(publishingIntervalInSeconds =&gt; { const type = typeof publishingIntervalInSeconds; if (type !== 'number') { throw new TypeError(`options.publishingIntervalInSeconds must be of type number, actual type: ${type}`); } }); }, /** * Validates optional params for a Reporter * @param {ReporterOptions} options The optional params */ validateReporterParameters: options =&gt; { if (options) { module.exports.validateOptionalDimensions(options.defaultDimensions); module.exports.validateOptionalLogger(options.logger); const type = typeof options.unrefTimers; if (type !== 'boolean' &amp;&amp; type !== 'undefined') { throw new TypeError(`options.unrefTimers should be a boolean or undefined, actual type: ${type}`); } } }, /** * Validates that a valid Reporter object has been supplied * * @param {Reporter} reporter */ validateReporterInstance: reporter =&gt; { if (!reporter) { throw new TypeError('The reporter was undefined, when it was required'); } if (typeof reporter.setRegistry !== 'function') { throw new TypeError( 'A reporter must implement setRegistry(registry), see the abstract Reporter class in the docs.' ); } if (typeof reporter.reportMetricOnInterval !== 'function') { throw new TypeError( 'A reporter must implement reportMetricOnInterval(metricKey, intervalInSeconds), see the abstract Reporter class in the docs.' ); } }, /** * Validates the input parameters for a {@link SelfReportingMetricsRegistry} * @param {Reporter[]} reporters * @param {SelfReportingMetricsRegistryOptions} [options] */ validateSelfReportingMetricsRegistryParameters: (reporters, options) =&gt; { reporters.forEach(reporter =&gt; module.exports.validateReporterInstance(reporter)); if (options) { module.exports.validateOptionalLogger(options.logger); } } }; × Search results Close "},"measured-core_lib_index.js.html":{"id":"measured-core_lib_index.js.html","title":"Source: measured-core/lib/index.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-core/lib/index.js const Collection = require('./Collection'); const Counter = require('./metrics/Counter'); const Gauge = require('./metrics/Gauge'); const SettableGauge = require('./metrics/SettableGauge'); const CachedGauge = require('./metrics/CachedGauge'); const Histogram = require('./metrics/Histogram'); const Meter = require('./metrics/Meter'); const NoOpMeter = require('./metrics/NoOpMeter'); const Timer = require('./metrics/Timer'); const BinaryHeap = require('./util/BinaryHeap'); const ExponentiallyDecayingSample = require('./util/ExponentiallyDecayingSample'); const ExponentiallyMovingWeightedAverage = require('./util/ExponentiallyMovingWeightedAverage'); const Stopwatch = require('./util/Stopwatch'); const units = require('./util/units'); const { MetricTypes } = require('./metrics/Metric'); const metricValidators = require('./validators/metricValidators'); /** * The main measured-core module that is referenced when require('measured-core') is used. * @module measured-core */ module.exports = { /** * See {@link Collection} * @type {Collection} */ Collection, /** * See {@link Counter} * @type {Counter} */ Counter, /** * See {@link Gauge} * @type {Gauge} */ Gauge, /** * See {@link SettableGauge} * @type {SettableGauge} */ SettableGauge, /** * See {@link CachedGauge} * @type {CachedGauge} */ CachedGauge, /** * See {@link Histogram} * @type {Histogram} */ Histogram, /** * See {@link Meter} * @type {Meter} */ Meter, /** * See {@link NoOpMeter} * @type {NoOpMeter} */ NoOpMeter, /** * See {@link Timer} * @type {Timer} */ Timer, /** * See {@link BinaryHeap} * @type {BinaryHeap} */ BinaryHeap, /** * See {@link ExponentiallyDecayingSample} * @type {ExponentiallyDecayingSample} */ ExponentiallyDecayingSample, /** * See {@link ExponentiallyMovingWeightedAverage} * @type {ExponentiallyMovingWeightedAverage} */ ExponentiallyMovingWeightedAverage, /** * See {@link Stopwatch} * @type {Stopwatch} */ Stopwatch, /** * See {@link MetricTypes} * @type {MetricTypes} */ MetricTypes, /** * See {@link units} * @type {units} */ units, /** * See {@link units} * @type {units} */ TimeUnits: units, /** * See {@link module:metricValidators} * @type {Object.&lt;string, function&gt;} */ metricValidators, /** * Creates a named collection. See {@link Collection} for more details * * @param name The name for the collection * @return {Collection} */ createCollection: name =&gt; { return new Collection(name); } }; × Search results Close "},"measured-node-metrics_lib_index.js.html":{"id":"measured-node-metrics_lib_index.js.html","title":"Source: measured-node-metrics/lib/index.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-node-metrics/lib/index.js const { nodeProcessMetrics, createProcessMetrics } = require('./nodeProcessMetrics'); const { nodeOsMetrics, createOSMetrics } = require('./nodeOsMetrics'); const { createExpressMiddleware, onRequestStart, onRequestEnd } = require('./nodeHttpRequestMetrics'); /** * The main module for the measured-node-metrics lib. * * Various functions to help create node metrics and http framework middlewares * that can be used with a self reporting metrics registry to easily instrument metrics for a node app. * * @module measured-node-metrics */ module.exports = { /** * Map of metric names and a functions that can be used to generate that metric object that can be registered with a * self reporting metrics registry or used as seen fit. * * See {@link nodeProcessMetrics}. * * @type {Object.&lt;string, function&gt;} */ nodeProcessMetrics, /** * Method that can be used to add a set of default node process metrics to your node app. * * registers all metrics defined in the {@link nodeProcessMetrics} map. * * @function * @name createProcessMetrics * @param {SelfReportingMetricsRegistry} metricsRegistry * @param {Dimensions} customDimensions * @param {number} reportingIntervalInSeconds */ createProcessMetrics, /** * Map of metric names and a functions that can be used to generate that metric object that can be registered with a * self reporting metrics registry or used as seen fit. * * See {@link nodeOsMetrics}. * * @type {Object.&lt;string, function&gt;} */ nodeOsMetrics, /** * Method that can be used to add a set of default node process metrics to your app. * * registers all metrics defined in the {@link nodeOsMetrics} map. * * @function * @name createOSMetrics * @param {SelfReportingMetricsRegistry} metricsRegistry * @param {Dimensions} customDimensions * @param {number} reportingIntervalInSeconds */ createOSMetrics, /** * Creates an Express middleware that reports a timer on request data. * With this middleware you will get requests counts and latency percentiles all filterable by status codes, http method, and uri paths. * * @function * @name createExpressMiddleware * @param {SelfReportingMetricsRegistry} metricsRegistry * @param {number} [reportingIntervalInSeconds] * @return {Function} */ createExpressMiddleware, /** * At the start of the request, create a stopwatch, that starts tracking how long the request is taking. * @function * @name onRequestStart * @return {Stopwatch} */ onRequestStart, /** * When the request ends stop the stop watch and create or update the timer for requests that tracked by method, statuscode, path. * The timers (meters and histograms) that get reported will be filterable by status codes, http method, the uri path. * You will be able to create dash boards such as success percentage, latency percentiles by path and method, etc. * * @function * @name onRequestEnd * @param metricsRegistry The Self Reporting Metrics Registry * @param stopwatch The stopwatch created by onRequestStart * @param method The Http Method for the request * @param statusCode The status code for the response * @param [uri] The uri for the request. Please note to avoid out of control time series dimension creation spread, * you would want to strip out ids and or other variables from the uri path. * @param [reportingIntervalInSeconds] override the reporting interval defaults to every 10 seconds. */ onRequestEnd }; × Search results Close "},"measured-reporting_lib_index.js.html":{"id":"measured-reporting_lib_index.js.html","title":"Source: measured-reporting/lib/index.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-reporting/lib/index.js const SelfReportingMetricsRegistry = require('./registries/SelfReportingMetricsRegistry'); const Reporter = require('./reporters/Reporter'); const LoggingReporter = require('./reporters/LoggingReporter'); const inputValidators = require('./validators/inputValidators'); /** * The main measured module that is referenced when require('measured-reporting') is used. * @module measured-reporting */ module.exports = { /** * The Self Reporting Metrics Registry Class. * * @type {SelfReportingMetricsRegistry} */ SelfReportingMetricsRegistry, /** * The abstract / base Reporter class. * * @type {Reporter} */ Reporter, /** * The basic included reference reporter, simply logs the metrics. * See {ReporterOptions} for options. * * @type {LoggingReporter} */ LoggingReporter, /** * Various Input Validation functions. * * @type {inputValidators} */ inputValidators }; × Search results Close "},"measured-signalfx-reporter_lib_index.js.html":{"id":"measured-signalfx-reporter_lib_index.js.html","title":"Source: measured-signalfx-reporter/lib/index.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-signalfx-reporter/lib/index.js const SignalFxMetricsReporter = require('./reporters/SignalFxMetricsReporter'); const SignalFxSelfReportingMetricsRegistry = require('./registries/SignalFxSelfReportingMetricsRegistry'); const SignalFxEventCategories = require('./SignalFxEventCategories'); /** * The main measured module that is referenced when require('measured-signalfx-reporter') is used. * @module measured-signalfx-reporter */ module.exports = { /** * {@type SignalFxMetricsReporter} */ SignalFxMetricsReporter, /** * {@type SignalFxSelfReportingMetricsRegistry} */ SignalFxSelfReportingMetricsRegistry, /** * {@type SignalFxEventCategories} */ SignalFxEventCategories }; × Search results Close "},"measured-core_lib_validators_metricValidators.js.html":{"id":"measured-core_lib_validators_metricValidators.js.html","title":"Source: measured-core/lib/validators/metricValidators.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-core/lib/validators/metricValidators.js const { MetricTypes } = require('../metrics/Metric'); // TODO: Object.values(...) does not exist in Node.js 6.x, switch after LTS period ends. // const metricTypeValues = Object.values(MetricTypes); const metricTypeValues = Object.keys(MetricTypes).map(key =&gt; MetricTypes[key]); /** * This module contains various validators to validate publicly exposed input. * * @module metricValidators */ module.exports = { /** * Validates that a metric implements the metric interface. * * @param {Metric} metric The object that is supposed to be a metric. */ validateMetric: metric =&gt; { if (!metric) { throw new TypeError('The metric was undefined, when it was required'); } if (typeof metric.toJSON !== 'function') { throw new TypeError('Metrics must implement toJSON(), see the Metric interface in the docs.'); } if (typeof metric.getType !== 'function') { throw new TypeError('Metrics must implement getType(), see the Metric interface in the docs.'); } const type = metric.getType(); if (!metricTypeValues.includes(type)) { throw new TypeError( `Metric#getType(), must return a type defined in MetricsTypes. Found: ${type}, Valid values: ${metricTypeValues.join( ', ' )}` ); } } }; × Search results Close "},"measured-signalfx-reporter_lib_SignalFxEventCategories.js.html":{"id":"measured-signalfx-reporter_lib_SignalFxEventCategories.js.html","title":"Source: measured-signalfx-reporter/lib/SignalFxEventCategories.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-signalfx-reporter/lib/SignalFxEventCategories.js /** * Different categories of events supported, within the SignalFx Event API. * * @example * const registry = new SignalFxSelfReportingMetricsRegistry(...); * registry.sendEvent('uncaughtException', SignalFxEventCategories.ALERT); * * @module SignalFxEventCategories */ module.exports = { /** * Created by user via UI or API, e.g. a deployment event * @type {SignalFxEventCategoryId} */ USER_DEFINED: 'USER_DEFINED', /** * Output by anomaly detectors * @type {SignalFxEventCategoryId} */ ALERT: 'ALERT', /** * Audit trail events * @type {SignalFxEventCategoryId} */ AUDIT: 'AUDIT', /** * Generated by analytics server * @type {SignalFxEventCategoryId} */ JOB: 'JOB', /** * Event originated within collectd * @type {SignalFxEventCategoryId} */ COLLECTD: 'COLLECTD', /** * Service discovery event * @type {SignalFxEventCategoryId} */ SERVICE_DISCOVERY: 'SERVICE_DISCOVERY', /** * Created by exception appenders to denote exceptional events * @type {SignalFxEventCategoryId} */ EXCEPTION: 'EXCEPTION' }; /** * @interface SignalFxEventCategoryId * @typedef SignalFxEventCategoryId * @type {string} * @example * const registry = new SignalFxSelfReportingMetricsRegistry(...); * registry.sendEvent('uncaughtException', SignalFxEventCategories.ALERT); */ × Search results Close "},"measured-signalfx-reporter_lib_validators_inputValidators.js.html":{"id":"measured-signalfx-reporter_lib_validators_inputValidators.js.html","title":"Source: measured-signalfx-reporter/lib/validators/inputValidators.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-signalfx-reporter/lib/validators/inputValidators.js /** * Validation functions for validating public input * @module SignalFxReporterInputValidators * @private */ module.exports = { /** * Validates that the object supplied for the sfx client at least has a send function * @param signalFxClient */ validateSignalFxClient: signalFxClient =&gt; { if (signalFxClient === undefined) { throw new Error('signalFxClient was undefined when it is required'); } if (typeof signalFxClient.send !== 'function' || signalFxClient.length &lt; 1) { throw new Error('signalFxClient must implement send(data: any)'); } } }; × Search results Close "},"measured-core_lib_util_units.js.html":{"id":"measured-core_lib_util_units.js.html","title":"Source: measured-core/lib/util/units.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-core/lib/util/units.js const NANOSECONDS = 1 / (1000 * 1000); const MICROSECONDS = 1 / 1000; const MILLISECONDS = 1; const SECONDS = 1000 * MILLISECONDS; const MINUTES = 60 * SECONDS; const HOURS = 60 * MINUTES; const DAYS = 24 * HOURS; /** * Time units, as found in Java: {@link http://download.oracle.com/javase/6/docs/api/java/util/concurrent/TimeUnit.html} * @module timeUnits * @example * const timeUnit = require('measured-core').unit * setTimeout(() =&gt; {}, 5 * timeUnit.MINUTES) */ module.exports = { /** * nanoseconds in milliseconds * @type {number} */ NANOSECONDS, /** * microseconds in milliseconds * @type {number} */ MICROSECONDS, /** * milliseconds in milliseconds * @type {number} */ MILLISECONDS, /** * seconds in milliseconds * @type {number} */ SECONDS, /** * minutes in milliseconds * @type {number} */ MINUTES, /** * hours in milliseconds * @type {number} */ HOURS, /** * days in milliseconds * @type {number} */ DAYS }; × Search results Close "},"measured-core_lib_metrics_NoOpMeter.js.html":{"id":"measured-core_lib_metrics_NoOpMeter.js.html","title":"Source: measured-core/lib/metrics/NoOpMeter.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-core/lib/metrics/NoOpMeter.js const { MetricTypes } = require('./Metric'); /** * A No-Op Impl of Meter that can be used with a timer, to only create histogram data. * This is useful for some time series aggregators that can calculate rates for you just off of sent count. * * @implements {Metric} * @example * const { NoOpMeter, Timer } = require('measured') * const meter = new NoOpMeter(); * const timer = new Timer({meter: meter}); * ... * // do some stuff with the timer and stopwatch api * ... */ // eslint-disable-next-line padded-blocks class NoOpMeter { /** * No-Op impl * @param {number} n Number of events to mark. */ // eslint-disable-next-line no-unused-vars mark(n) {} /** * No-Op impl */ start() {} /** * No-Op impl */ end() {} /** * No-Op impl */ ref() {} /** * No-Op impl */ unref() {} /** * No-Op impl */ reset() {} /** * No-Op impl */ meanRate() {} /** * No-Op impl */ currentRate() {} /** * Returns an empty object * @return {{}} */ toJSON() { return {}; } /** * The type of the Metric Impl. {@link MetricTypes}. * @return {string} The type of the Metric Impl. */ getType() { return MetricTypes.METER; } } module.exports = NoOpMeter; × Search results Close "},"measured-reporting_lib_registries_SelfReportingMetricsRegistry.js.html":{"id":"measured-reporting_lib_registries_SelfReportingMetricsRegistry.js.html","title":"Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js const bunyan = require('bunyan'); const { CachedGauge, SettableGauge, Gauge, Timer, Counter, Meter, Histogram } = require('measured-core'); const DimensionAwareMetricsRegistry = require('./DimensionAwareMetricsRegistry'); const { validateSelfReportingMetricsRegistryParameters, validateRegisterOptions, validateGaugeOptions, validateCounterOptions, validateHistogramOptions, validateTimerOptions, validateSettableGaugeOptions, validateCachedGaugeOptions } = require('../validators/inputValidators'); /** * A dimensional aware self-reporting metrics registry */ class SelfReportingMetricsRegistry { /** * @param {Reporter|Reporter[]} reporters A single {@link Reporter} or an array of reporters that will be used to report metrics on an interval. * @param {SelfReportingMetricsRegistryOptions} [options] Configurable options for the Self Reporting Metrics Registry */ constructor(reporters, options) { options = options || {}; if (!Array.isArray(reporters)) { reporters = [reporters]; } validateSelfReportingMetricsRegistryParameters(reporters, options); /** * @type {Reporter} * @protected */ this._reporters = reporters; /** * @type {DimensionAwareMetricsRegistry} * @protected */ this._registry = options.registry || new DimensionAwareMetricsRegistry(); this._reporters.forEach(reporter =&gt; reporter.setRegistry(this._registry)); /** * Loggers to use, defaults to a new bunyan logger if nothing is supplied in options * @type {Logger} * @protected */ this._log = options.logger || bunyan.createLogger({ name: 'SelfReportingMetricsRegistry', level: options.logLevel || 'info' }); } /** * Registers a manually created Metric. * * @param {string} name The Metric name * @param {Metric} metric The {@link Metric} to register * @param {Dimensions} [dimensions] any custom {@link Dimensions} for the Metric * @param {number} [publishingIntervalInSeconds] a optional custom publishing interval * @example * const settableGauge = new SettableGauge(5); * // register the gauge and have it report to every 10 seconds * registry.register('my-gauge', settableGauge, {}, 10); * interval(() =&gt; { * // such as cpu % used * determineAValueThatCannotBeSync((value) =&gt; { * settableGauge.update(value); * }) * }, 10000) */ register(name, metric, dimensions, publishingIntervalInSeconds) { validateRegisterOptions(name, metric, dimensions, publishingIntervalInSeconds); if (this._registry.hasMetric(name, dimensions)) { throw new Error( `Metric with name: ${name} and dimensions: ${JSON.stringify(dimensions)} has already been registered` ); } else { const key = this._registry.putMetric(name, metric, dimensions); this._reporters.forEach(reporter =&gt; reporter.reportMetricOnInterval(key, publishingIntervalInSeconds)); } return metric; } /** * Creates a {@link Gauge} or gets the existing Gauge for a given name and dimension combo * * @param {string} name The Metric name * @param {function} callback The callback that will return a value to report to signal fx * @param {Dimensions} [dimensions] any custom {@link Dimensions} for the Metric * @param {number} [publishingIntervalInSeconds] a optional custom publishing interval * @return {Gauge} * @example * // https://nodejs.org/api/process.html#process_process_memoryusage * // Report heap total and heap used at the default interval * registry.getOrCreateGauge( * 'process-memory-heap-total', * () =&gt; { * return process.memoryUsage().heapTotal * } * ); * registry.getOrCreateGauge( * 'process-memory-heap-used', * () =&gt; { * return process.memoryUsage().heapUsed * } * ) */ getOrCreateGauge(name, callback, dimensions, publishingIntervalInSeconds) { validateGaugeOptions(name, callback, dimensions, publishingIntervalInSeconds); let gauge; if (this._registry.hasMetric(name, dimensions)) { gauge = this._registry.getMetric(name, dimensions); } else { gauge = new Gauge(callback); const key = this._registry.putMetric(name, gauge, dimensions); this._reporters.forEach(reporter =&gt; reporter.reportMetricOnInterval(key, publishingIntervalInSeconds)); } return gauge; } /** * Creates a {@link Histogram} or gets the existing Histogram for a given name and dimension combo * * @param {string} name The Metric name * @param {Dimensions} [dimensions] any custom {@link Dimensions} for the Metric * @param {number} [publishingIntervalInSeconds] a optional custom publishing interval * @return {Histogram} */ getOrCreateHistogram(name, dimensions, publishingIntervalInSeconds) { validateHistogramOptions(name, dimensions, publishingIntervalInSeconds); let histogram; if (this._registry.hasMetric(name, dimensions)) { histogram = this._registry.getMetric(name, dimensions); } else { histogram = new Histogram(); const key = this._registry.putMetric(name, histogram, dimensions); this._reporters.forEach(reporter =&gt; reporter.reportMetricOnInterval(key, publishingIntervalInSeconds)); } return histogram; } /** * Creates a {@link Meter} or gets the existing Meter for a given name and dimension combo * * @param {string} name The Metric name * @param {Dimensions} [dimensions] any custom {@link Dimensions} for the Metric * @param {number} [publishingIntervalInSeconds] a optional custom publishing interval * @return {Meter} */ getOrCreateMeter(name, dimensions, publishingIntervalInSeconds) { // todo validate options let meter; if (this._registry.hasMetric(name, dimensions)) { meter = this._registry.getMetric(name, dimensions); } else { meter = new Meter(); const key = this._registry.putMetric(name, meter, dimensions); this._reporters.forEach(reporter =&gt; reporter.reportMetricOnInterval(key, publishingIntervalInSeconds)); } return meter; } /** * Creates a {@link Counter} or gets the existing Counter for a given name and dimension combo * * @param {string} name The Metric name * @param {Dimensions} [dimensions] any custom {@link Dimensions} for the Metric * @param {number} [publishingIntervalInSeconds] a optional custom publishing interval * @return {Counter} */ getOrCreateCounter(name, dimensions, publishingIntervalInSeconds) { validateCounterOptions(name, dimensions, publishingIntervalInSeconds); let counter; if (this._registry.hasMetric(name, dimensions)) { counter = this._registry.getMetric(name, dimensions); } else { counter = new Counter(); const key = this._registry.putMetric(name, counter, dimensions); this._reporters.forEach(reporter =&gt; reporter.reportMetricOnInterval(key, publishingIntervalInSeconds)); } return counter; } /** * Creates a {@link Timer} or gets the existing Timer for a given name and dimension combo. * * @param {string} name The Metric name * @param {Dimensions} [dimensions] any custom {@link Dimensions} for the Metric * @param {number} [publishingIntervalInSeconds] a optional custom publishing interval * @return {Timer} */ getOrCreateTimer(name, dimensions, publishingIntervalInSeconds) { validateTimerOptions(name, dimensions, publishingIntervalInSeconds); let timer; if (this._registry.hasMetric(name, dimensions)) { timer = this._registry.getMetric(name, dimensions); } else { timer = new Timer(); const key = this._registry.putMetric(name, timer, dimensions); this._reporters.forEach(reporter =&gt; reporter.reportMetricOnInterval(key, publishingIntervalInSeconds)); } return timer; } /** * Creates a {@link SettableGauge} or gets the existing SettableGauge for a given name and dimension combo. * * @param {string} name The Metric name * @param {Dimensions} [dimensions] any custom {@link Dimensions} for the Metric * @param {number} [publishingIntervalInSeconds] a optional custom publishing interval * @return {SettableGauge} */ getOrCreateSettableGauge(name, dimensions, publishingIntervalInSeconds) { validateSettableGaugeOptions(name, dimensions, publishingIntervalInSeconds); let settableGauge; if (this._registry.hasMetric(name, dimensions)) { settableGauge = this._registry.getMetric(name, dimensions); } else { settableGauge = new SettableGauge(); const key = this._registry.putMetric(name, settableGauge, dimensions); this._reporters.forEach(reporter =&gt; reporter.reportMetricOnInterval(key, publishingIntervalInSeconds)); } return settableGauge; } /** * Creates a {@link CachedGauge} or gets the existing CachedGauge for a given name and dimension combo. * * @param {string} name The Metric name. * @param {function} valueProducingPromiseCallback. * @param {number} cachedGaugeUpdateIntervalInSeconds. * @param {Dimensions} [dimensions] any custom {@link Dimensions} for the Metric. * @param {number} [publishingIntervalInSeconds] a optional custom publishing interval. * @return {CachedGauge} */ getOrCreateCachedGauge( name, valueProducingPromiseCallback, cachedGaugeUpdateIntervalInSeconds, dimensions, publishingIntervalInSeconds ) { validateCachedGaugeOptions(name, valueProducingPromiseCallback, dimensions, publishingIntervalInSeconds); let cachedGauge; if (this._registry.hasMetric(name, dimensions)) { cachedGauge = this._registry.getMetric(name, dimensions); } else { cachedGauge = new CachedGauge(valueProducingPromiseCallback, cachedGaugeUpdateIntervalInSeconds); const key = this._registry.putMetric(name, cachedGauge, dimensions); this._reporters.forEach(reporter =&gt; reporter.reportMetricOnInterval(key, publishingIntervalInSeconds)); } return cachedGauge; } /** * Calls end on all metrics in the registry that support end() and calls end on the reporter */ shutdown() { // shutdown the reporter this._reporters.forEach(reporter =&gt; reporter.shutdown()); // shutdown any metrics that have an end method this._registry.allKeys().forEach(key =&gt; { const metricWrapper = this._registry.getMetricWrapperByKey(key); if (metricWrapper.metricImpl.end) { metricWrapper.metricImpl.end(); } }); } } module.exports = SelfReportingMetricsRegistry; /** * Configurable options for the Self Reporting Metrics Registry * * @interface SelfReportingMetricsRegistryOptions * @typedef SelfReportingMetricsRegistryOptions * @property {Logger} logger the Logger to use * @property {string} logLevel The Log level to use if defaulting to included logger * @property {DimensionAwareMetricsRegistry} registry The registry to use, defaults to new DimensionAwareMetricsRegistry */ × Search results Close "},"measured-core_lib_metrics_SettableGauge.js.html":{"id":"measured-core_lib_metrics_SettableGauge.js.html","title":"Source: measured-core/lib/metrics/SettableGauge.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-core/lib/metrics/SettableGauge.js const { MetricTypes } = require('./Metric'); /** * Works like a {@link Gauge}, but rather than getting its value from a callback, the value * is set when needed. This can be useful for setting a gauges value for asynchronous operations. * @implements {Metric} * @example * const settableGauge = new SettableGauge(); * // Update the settable gauge ever 10'ish seconds * setInterval(() =&gt; { * calculateSomethingAsync().then((value) =&gt; { * settableGauge.setValue(value); * }); * }, 10000); */ class SettableGauge { /** * @param {SettableGaugeProperties} [options] See {@link SettableGaugeProperties}. */ constructor(options) { options = options || {}; this._value = options.initialValue || 0; } setValue(value) { this._value = value; } /** * @return {number} Settable Gauges directly return there current value. */ toJSON() { return this._value; } /** * The type of the Metric Impl. {@link MetricTypes}. * @return {string} The type of the Metric Impl. */ getType() { return MetricTypes.GAUGE; } } module.exports = SettableGauge; /** * Properties that can be supplied to the constructor of a {@link Counter} * * @interface SettableGaugeProperties * @typedef SettableGaugeProperties * @type {Object} * @property {number} initialValue An initial value to use for this settable gauge. Defaults to 0. * @example * // Creates a Gauge that with an initial value of 500. * const settableGauge = new SettableGauge({ initialValue: 500 }) * */ × Search results Close "},"measured-signalfx-reporter_lib_registries_SignalFxSelfReportingMetricsRegistry.js.html":{"id":"measured-signalfx-reporter_lib_registries_SignalFxSelfReportingMetricsRegistry.js.html","title":"Source: measured-signalfx-reporter/lib/registries/SignalFxSelfReportingMetricsRegistry.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-signalfx-reporter/lib/registries/SignalFxSelfReportingMetricsRegistry.js const { NoOpMeter, Timer } = require('measured-core'); const { SelfReportingMetricsRegistry } = require('measured-reporting'); const { validateTimerOptions } = require('measured-reporting').inputValidators; /** * A SignalFx Self Reporting Metrics Registry that disallows the use of meters. * Meters don't make sense to use with SignalFx because the rate aggregations can be done within SignalFx itself. * Meters simply waste DPM (Datapoints per Minute). * * @extends {SelfReportingMetricsRegistry} */ class SignalFxSelfReportingMetricsRegistry extends SelfReportingMetricsRegistry { /** * Creates a {@link Timer} or get the existing Timer for a given name and dimension combo with a NoOpMeter. * * @param {string} name The Metric name * @param {Dimensions} dimensions any custom {@link Dimensions} for the Metric * @param {number} publishingIntervalInSeconds a optional custom publishing interval * @return {Timer} */ getOrCreateTimer(name, dimensions, publishingIntervalInSeconds) { validateTimerOptions(name, dimensions, publishingIntervalInSeconds); let timer; if (this._registry.hasMetric(name, dimensions)) { timer = this._registry.getMetric(name, dimensions); } else { timer = new Timer({ meter: new NoOpMeter() }); const key = this._registry.putMetric(name, timer, dimensions); this._reporters.forEach(reporter =&gt; reporter.reportMetricOnInterval(key, publishingIntervalInSeconds)); } return timer; } /** * Meters are not reported to SignalFx. * Meters do not make sense to use with SignalFx because the same values can be calculated * using simple counters and aggregations within SignalFx itself. * * @param {string} name The Metric name * @param {Dimensions} dimensions any custom {@link Dimensions} for the Metric * @param {number} publishingIntervalInSeconds a optional custom publishing interval * @return {NoOpMeter|*} */ getOrCreateMeter(name, dimensions, publishingIntervalInSeconds) { this._log.error( 'Meters will not get reported using the SignalFx reporter as they waste DPM, please use a counter instead' ); return new NoOpMeter(); } /** * Function exposes the event API of Signal Fx. * See {@link https://github.com/signalfx/signalfx-nodejs#sending-events} for more details. * * @param {string} eventType The event type (name of the event time series). * @param {SignalFxEventCategoryId} [category] the category of event. See {@link module:SignalFxEventCategories}. Value by default is USER_DEFINED. * @param {Dimensions} [dimensions] a map of event dimensions, empty dictionary by default * @param {Object.&lt;string, string&gt;} [properties] a map of extra properties on that event, empty dictionary by default * @param {number} [timestamp] a timestamp, by default is current time. * * @example * const { * SignalFxSelfReportingMetricsRegistry, * SignalFxMetricsReporter, * SignalFxEventCategories * } = require('measured-signalfx-reporter'); * const registry = new SignalFxSelfReportingMetricsRegistry(new SignalFxMetricsReporter(signalFxClient)); * registry.sendEvent('uncaughtException', SignalFxEventCategories.ALERT); */ sendEvent(eventType, category, dimensions, properties, timestamp) { return this._reporters.forEach(reporter =&gt; { if (typeof reporter.sendEvent === 'function') { reporter.sendEvent(eventType, category, dimensions, properties, timestamp); } }); } } module.exports = SignalFxSelfReportingMetricsRegistry; × Search results Close "},"measured-core_lib_util_Stopwatch.js.html":{"id":"measured-core_lib_util_Stopwatch.js.html","title":"Source: measured-core/lib/util/Stopwatch.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-core/lib/util/Stopwatch.js const { EventEmitter } = require('events'); /** * A simple object for tracking elapsed time * * @extends {EventEmitter} */ class Stopwatch extends EventEmitter { /** * Creates a started Stopwatch * @param {StopwatchProperties} [options] See {@link StopwatchProperties} */ constructor(options) { super(); options = options || {}; EventEmitter.call(this); if (options.getTime) { this._getTime = options.getTime; } this._start = this._getTime(); this._ended = false; } /** * Called to mark the end of the timer task * @return {number} the total execution time */ end() { if (this._ended) { return null; } this._ended = true; const elapsed = this._getTime() - this._start; this.emit('end', elapsed); return elapsed; } _getTime() { if (!process.hrtime) { return Date.now(); } const hrtime = process.hrtime(); return hrtime[0] * 1000 + hrtime[1] / (1000 * 1000); } } module.exports = Stopwatch; /** * @interface StopwatchProperties * @typedef StopwatchProperties * @type {Object} * @property {function} getTime optional function override for supplying time., defaults to new Date() / process.hrt() */ × Search results Close "},"measured-core_lib_metrics_Timer.js.html":{"id":"measured-core_lib_metrics_Timer.js.html","title":"Source: measured-core/lib/metrics/Timer.js","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Source: measured-core/lib/metrics/Timer.js const { MetricTypes } = require('./Metric'); const Histogram = require('./Histogram'); const Meter = require('./Meter'); const Stopwatch = require('../util/Stopwatch'); /** * * Timers are a combination of Meters and Histograms. They measure the rate as well as distribution of scalar events. * &lt;p&gt; * Since they are frequently used for tracking how long certain things take, they expose an API for that: See example 1. * &lt;p&gt; * But you can also use them as generic histograms that also track the rate of events: See example 2. * * @example * var Measured = require('measured') * var timer = new Measured.Timer(); * http.createServer(function(req, res) { * var stopwatch = timer.start(); * req.on('end', function() { * stopwatch.end(); * }); * }); * * * @example * var Measured = require('measured') * var timer = new Measured.Timer(); * http.createServer(function(req, res) { * if (req.headers['content-length']) { * timer.update(parseInt(req.headers['content-length'], 10)); * } * }); * * @implements {Metric} */ class Timer { /** * @param {TimerProperties} [properties] See {@link TimerProperties}. */ constructor(properties) { properties = properties || {}; this._meter = properties.meter || new Meter({}); this._histogram = properties.histogram || new Histogram({}); this._getTime = properties.getTime; } /** * @return {Stopwatch} Returns a Stopwatch that has been started. */ start() { const self = this; const watch = new Stopwatch({ getTime: this._getTime }); watch.once('end', elapsed =&gt; { self.update(elapsed); }); return watch; } /** * Updates the internal histogram with value and marks one event on the internal meter. * @param {number} value */ update(value) { this._meter.mark(); this._histogram.update(value); } /** * Resets all values. Timers initialized with custom options will be reset to the default settings. */ reset() { this._meter.reset(); this._histogram.reset(); } end() { this._meter.end(); } /** * Refs the backing timer again. Idempotent. */ ref() { this._meter.ref(); } /** * Unrefs the backing timer. The meter will not keep the event loop alive. Idempotent. */ unref() { this._meter.unref(); } /** * toJSON output: * * &lt;li&gt; meter: See &lt;a href=&quot;#meter&quot;&gt;Meter&lt;/a&gt;#toJSON output docs above.&lt;/li&gt; * &lt;li&gt; histogram: See &lt;a href=&quot;#histogram&quot;&gt;Histogram&lt;/a&gt;#toJSON output docs above.&lt;/a&gt;&lt;/li&gt; * * @return {any} */ toJSON() { return { meter: this._meter.toJSON(), histogram: this._histogram.toJSON() }; } /** * The type of the Metric Impl. {@link MetricTypes}. * @return {string} The type of the Metric Impl. */ getType() { return MetricTypes.TIMER; } } module.exports = Timer; /** * @interface TimerProperties * @typedef TimerProperties * @type {Object} * @property {Meter} meter The internal meter to use. Defaults to a new {@link Meter}. * @property {Histogram} histogram The internal histogram to use. Defaults to a new {@link Histogram}. * @property {function} getTime optional function override for supplying time to the {@link Stopwatch} */ × Search results Close "},"global.html":{"id":"global.html","title":"Global","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Global Members &lt;constant&gt; DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDS :number The default reporting interval for node os metrics is 30 seconds. Type: number Source: measured-node-metrics/lib/nodeOsMetrics.js, line 10 &lt;constant&gt; DEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDS :number The default reporting interval for node process metrics is 30 seconds. Type: number Source: measured-node-metrics/lib/nodeProcessMetrics.js, line 9 &lt;constant&gt; DEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDS :number The default reporting interval for requests Type: number Source: measured-node-metrics/lib/nodeHttpRequestMetrics.js, line 7 &lt;constant&gt; nodeOsMetrics A map of Metric generating functions, that create Metrics to measure node os stats. Source: measured-node-metrics/lib/nodeOsMetrics.js, line 15 &lt;constant&gt; nodeProcessMetrics :Object.&lt;string, function()&gt; A map of Metric generating functions, that create Metrics to measure node process stats. Type: Object.&lt;string, function()&gt; Source: measured-node-metrics/lib/nodeProcessMetrics.js, line 15 Type Definitions CounterProperties Properties that can be supplied to the constructor of a Counter Type: Object Properties: Name Type Description count number An initial count for the counter. Defaults to 0. Source: measured-core/lib/metrics/Counter.js, line 69 Example // Creates a counter that starts at 5. const counter = new Counter({ count: 5 }) Dimensions A Dictionary of string, string key value pairs Type: Object.&lt;string, string&gt; Source: measured-reporting/lib/@types/types.js, line 12 Example { path: &quot;/api/foo&quot; method: &quot;GET&quot; statusCode: &quot;200&quot; } HistogramData The data returned from Histogram::toJSON() Type: object Properties: Name Type Description min number | null The lowest observed value. max number | null The highest observed value. sum number | null The sum of all observed values. variance number | null The variance of all observed values. mean number | null The average of all observed values. stddev number | null The stddev of all observed values. count number The number of observed values. median number 50% of all values in the resevoir are at or below this value. p75 number See median, 75% percentile. p95 number See median, 95% percentile. p99 number See median, 99% percentile. p999 number See median, 99.9% percentile. Source: measured-core/lib/metrics/Histogram.js, line 239 HistogramProperties Properties to create a Histogram with. Type: Object Properties: Name Type Description sample object The sample reservoir to use. Defaults to an ExponentiallyDecayingSample. Source: measured-core/lib/metrics/Histogram.js, line 230 LoggingReporterOptions Type: Object Properties: Name Type Argument Description defaultDimensions Dimensions A dictionary of dimensions to include with every metric reported logger Logger &lt;optional&gt; The logger to use, if not supplied a new Buynan logger will be created logLevel string &lt;optional&gt; The log level to use with the created Bunyan logger if you didn't supply your own logger. defaultReportingIntervalInSeconds number &lt;optional&gt; The default reporting interval to use if non is supplied when registering a metric, defaults to 10 seconds. logLevelToLogAt string &lt;optional&gt; You can specify the log level ['debug', 'info', 'warn', 'error'] that this reporter will use when logging the metrics via the logger. Source: measured-reporting/lib/reporters/LoggingReporter.js, line 42 MeterData The data returned from Meter::toJSON() Type: object Properties: Name Type Description mean number The average rate since the meter was started. count number The total of all values added to the meter. currentRate number The rate of the meter since the last toJSON() call. 1MinuteRate number The rate of the meter biased towards the last 1 minute. 5MinuteRate number The rate of the meter biased towards the last 5 minutes. 15MinuteRate number The rate of the meter biased towards the last 15 minutes. Source: measured-core/lib/metrics/Meter.js, line 171 MeterProperties Type: Object Properties: Name Type Description rateUnit number The rate unit. Defaults to 1000 (1 sec). tickInterval number The interval in which the averages are updated. Defaults to 5000 (5 sec). Source: measured-core/lib/metrics/Meter.js, line 160 Example const meter = new Meter({ rateUnit: 1000, tickInterval: 5000}) MetricValueTypeWrapper Wrapper object to wrap metric value and SFX metadata needed to send metric value to SFX data ingestion. Type: Object Properties: Name Type Description metric string The metric name to report to SignalFx value number the value to report to SignalFx type string The mapped SignalFx metric type Source: measured-signalfx-reporter/lib/reporters/SignalFxMetricsReporter.js, line 246 MetricWrapper A wrapper object around a Metric, Dimensions and the metric name Type: Object Properties: Name Type Description name string The supplied name of the Metric metricImpl Metric The Metric object dimensions Dimensions The Dimensions for the given Metric Source: measured-reporting/lib/@types/types.js, line 1 ReporterOptions Options for creating a Reporter Type: Object Properties: Name Type Description defaultDimensions Dimensions A dictionary of dimensions to include with every metric reported logger Logger The logger to use, if not supplied a new Buynan logger will be created logLevel string The log level to use with the created Bunyan logger if you didn't supply your own logger. defaultReportingIntervalInSeconds number The default reporting interval to use if non is supplied when registering a metric, defaults to 10 seconds. Source: measured-reporting/lib/reporters/Reporter.js, line 222 SelfReportingMetricsRegistryOptions Configurable options for the Self Reporting Metrics Registry Properties: Name Type Description logger Logger the Logger to use logLevel string The Log level to use if defaulting to included logger registry DimensionAwareMetricsRegistry The registry to use, defaults to new DimensionAwareMetricsRegistry Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 287 SettableGaugeProperties Properties that can be supplied to the constructor of a Counter Type: Object Properties: Name Type Description initialValue number An initial value to use for this settable gauge. Defaults to 0. Source: measured-core/lib/metrics/SettableGauge.js, line 47 Example // Creates a Gauge that with an initial value of 500. const settableGauge = new SettableGauge({ initialValue: 500 }) SignalFxEventCategoryId Type: string Source: measured-signalfx-reporter/lib/SignalFxEventCategories.js, line 48 Example const registry = new SignalFxSelfReportingMetricsRegistry(...); registry.sendEvent('uncaughtException', SignalFxEventCategories.ALERT); StopwatchProperties Type: Object Properties: Name Type Description getTime function optional function override for supplying time., defaults to new Date() / process.hrt() Source: measured-core/lib/util/Stopwatch.js, line 53 TimerProperties Type: Object Properties: Name Type Description meter Meter The internal meter to use. Defaults to a new Meter. histogram Histogram The internal histogram to use. Defaults to a new Histogram. getTime function optional function override for supplying time to the Stopwatch Source: measured-core/lib/metrics/Timer.js, line 123 × Search results Close "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Modules Classes BinaryHeap CachedGauge Collection Counter DimensionAwareMetricsRegistry ExponentiallyDecayingSample ExponentiallyMovingWeightedAverage Gauge Histogram LoggingReporter Meter NoOpMeter Reporter SelfReportingMetricsRegistry SettableGauge SignalFxMetricsReporter SignalFxSelfReportingMetricsRegistry Stopwatch Timer × Search results Close "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Classes Classes BinaryHeap CachedGauge Collection Counter DimensionAwareMetricsRegistry ExponentiallyDecayingSample ExponentiallyMovingWeightedAverage Gauge Histogram LoggingReporter Meter NoOpMeter Reporter SelfReportingMetricsRegistry SettableGauge SignalFxMetricsReporter SignalFxSelfReportingMetricsRegistry Stopwatch Timer × Search results Close "},"interfaces.list.html":{"id":"interfaces.list.html","title":"Interfaces","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Interfaces Classes BinaryHeap CachedGauge Collection Counter DimensionAwareMetricsRegistry ExponentiallyDecayingSample ExponentiallyMovingWeightedAverage Gauge Histogram LoggingReporter Meter NoOpMeter Reporter SelfReportingMetricsRegistry SettableGauge SignalFxMetricsReporter SignalFxSelfReportingMetricsRegistry Stopwatch Timer × Search results Close "},"tutorials.list.html":{"id":"tutorials.list.html","title":"Tutorials","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Tutorials Classes BinaryHeap CachedGauge Collection Counter DimensionAwareMetricsRegistry ExponentiallyDecayingSample ExponentiallyMovingWeightedAverage Gauge Histogram LoggingReporter Meter NoOpMeter Reporter SelfReportingMetricsRegistry SettableGauge SignalFxMetricsReporter SignalFxSelfReportingMetricsRegistry Stopwatch Timer × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics MeasuredNode libraries for measuring and reporting application-level metrics. Measured is heavily inspired by Coda Hale, Yammer Inc's Dropwizard Metrics Libraries Available packagesMeasured CoreThe core measured library that has the Metric interfaces and implementations. Measured ReportingThe registry and reporting library that has the classes needed to create a dimension aware, self reporting metrics registry. Measured Node MetricsVarious metrics generators and http framework middlewares that can be used with a self reporting metrics registry to easily instrument metrics for a node app. Measured SignalFx ReporterA reporter that can be used with measured-reporting to send metrics to SignalFx. Measured Datadog reporterNot implemented, community contribution wanted. Measured Graphite reporterNot implemented, community contribution wanted. Development and ContributingSee Development and Contributing LicenseThis project Measured and all of its modules are licensed under the MIT license. × Search results Close "},"BinaryHeap.html":{"id":"BinaryHeap.html","title":"Class: BinaryHeap","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Class: BinaryHeap BinaryHeap Based on http://en.wikipedia.org/wiki/Binary_Heapas well as http://eloquentjavascript.net/appendix2.html new BinaryHeap() Source: measured-core/lib/util/BinaryHeap.js, line 5 Methods add(elements) Add elements to the binary heap. Parameters: Name Type Argument Description elements Array.&lt;any&gt; &lt;repeatable&gt; Source: measured-core/lib/util/BinaryHeap.js, line 17 × Search results Close "},"CachedGauge.html":{"id":"CachedGauge.html","title":"Class: CachedGauge","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Class: CachedGauge CachedGauge A Cached Gauge takes a function that returns a promise that resolves avalue that should be cached and updated on a given interval. toJSON() will return the currently cached value. new CachedGauge(valueProducingPromiseCallback, updateIntervalInSeconds [, timeUnitOverride]) Parameters: Name Type Argument Description valueProducingPromiseCallback function A function that returns a promise than whenresolved supplies the value that should be cached in this gauge. updateIntervalInSeconds number How often the cached gauge should update it's value. timeUnitOverride number &lt;optional&gt; by default this function takes updateIntervalInSeconds and multiplies it by TimeUnits.SECONDS (1000),You can override it here. Implements: Metric Source: measured-core/lib/metrics/CachedGauge.js, line 26 Example const cpuAverageCachedGauge = new CachedGauge(() =&gt; { return new Promise(resolve =&gt; { //Grab first CPU Measure const startMeasure = cpuAverage(); setTimeout(() =&gt; { //Grab second Measure const endMeasure = cpuAverage(); const percentageCPU = calculateCpuUsagePercent(startMeasure, endMeasure); resolve(percentageCPU); }, sampleTimeInSeconds); }); }, updateIntervalInSeconds); Methods end() Clears the interval, so that it doesn't keep any processes alive. Source: measured-core/lib/metrics/CachedGauge.js, line 73 getType() The type of the Metric Impl. MetricTypes. Implements: Metric#getType Source: measured-core/lib/metrics/CachedGauge.js, line 66 Returns: The type of the Metric Impl. Type string toJSON() Implements: Metric#toJSON Source: measured-core/lib/metrics/CachedGauge.js, line 58 Returns: Gauges directly return the value which should be a number. Type number × Search results Close "},"Collection.html":{"id":"Collection.html","title":"Class: Collection","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Class: Collection Collection A Simple collection that stores names and a Metric instances with a few convenience methods forcreating / registering and then gathering all data the registered metrics. new Collection( [name]) Creates a named collection of metrics Parameters: Name Type Argument Description name string &lt;optional&gt; The name to use for this collection. Source: measured-core/lib/Collection.js, line 21 Example var { Collection } = require('measured'); const collection = new Collection('node-process-metrics'); const gauge = collection.gauge('node.process.heap_used', () =&gt; { return process.memoryUsage().heapUsed; }); Methods cachedGauge(name, valueProducingPromiseCallback, updateIntervalInSeconds) Gets or creates and registers a SettableGauge Parameters: Name Type Description name string The metric name valueProducingPromiseCallback function A function that returns a promise than whenresolved supplies the value that should be cached in this gauge. updateIntervalInSeconds number How often the cached gauge should update it's value. Source: measured-core/lib/Collection.js, line 216 Returns: Type CachedGauge counter(name [, properties]) Gets or creates and registers a Counter Parameters: Name Type Argument Description name string The metric name properties CounterProperties &lt;optional&gt; See CounterProperties Source: measured-core/lib/Collection.js, line 104 Returns: Type Counter end() Calls end on all metrics in the registry that support end() Source: measured-core/lib/Collection.js, line 269 gauge(name, readFn) Gets or creates and registers a Gauge Parameters: Name Type Description name string The metric name readFn function See Gauge Source: measured-core/lib/Collection.js, line 82 Returns: Type Gauge histogram(name [, properties]) Gets or creates and registers a Histogram Parameters: Name Type Argument Description name string The metric name properties HistogramProperties &lt;optional&gt; See HistogramProperties Source: measured-core/lib/Collection.js, line 126 Returns: Type Histogram meter(name [, properties]) Gets or creates and registers a Meter Parameters: Name Type Argument Description name string The metric name properties MeterProperties &lt;optional&gt; See MeterProperties Source: measured-core/lib/Collection.js, line 170 Returns: Type Meter register(name, metric) register a metric that was created outside the provided convenience methods of this collection Parameters: Name Type Description name The metric name metric The Metric implementation Source: measured-core/lib/Collection.js, line 49 Example var { Collection, Gauge } = require('measured'); const collection = new Collection('node-process-metrics'); const gauge = new Gauge(() =&gt; { return process.memoryUsage().heapUsed; }); collection.register('node.process.heap_used', gauge); settableGauge(name [, properties]) Gets or creates and registers a SettableGauge Parameters: Name Type Argument Description name string The metric name properties SettableGaugeProperties &lt;optional&gt; See SettableGaugeProperties Source: measured-core/lib/Collection.js, line 192 Returns: Type SettableGauge timer(name [, properties]) Gets or creates and registers a Timer Parameters: Name Type Argument Description name string The metric name properties TimerProperties &lt;optional&gt; See TimerProperties Source: measured-core/lib/Collection.js, line 148 Returns: Type Timer toJSON() Fetches the data/values from all registered metrics Source: measured-core/lib/Collection.js, line 57 Returns: The combined JSON object Type Object × Search results Close "},"Counter.html":{"id":"Counter.html","title":"Class: Counter","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Class: Counter Counter Counters are things that increment or decrement new Counter( [properties]) Parameters: Name Type Argument Description properties CounterProperties &lt;optional&gt; see CounterProperties Implements: Metric Source: measured-core/lib/metrics/Counter.js, line 16 Example var Measured = require('measured') var activeUploads = new Measured.Counter(); http.createServer(function(req, res) { activeUploads.inc(); req.on('end', function() { activeUploads.dec(); }); }); Methods dec(n) Decrements the counter Parameters: Name Type Description n number Decrement the counter by n. Defaults to 1. Source: measured-core/lib/metrics/Counter.js, line 46 getType() The type of the Metric Impl. MetricTypes. Implements: Metric#getType Source: measured-core/lib/metrics/Counter.js, line 62 Returns: The type of the Metric Impl. Type string inc(n) Increments the counter. Parameters: Name Type Description n number Increment the counter by n. Defaults to 1. Source: measured-core/lib/metrics/Counter.js, line 38 reset(count) Resets the counter back to count Defaults to 0. Parameters: Name Type Description count number Resets the counter back to count Defaults to 0. Source: measured-core/lib/metrics/Counter.js, line 54 toJSON() Counters directly return their currently value. Implements: Metric#toJSON Source: measured-core/lib/metrics/Counter.js, line 30 Returns: Type number × Search results Close "},"DimensionAwareMetricsRegistry.html":{"id":"DimensionAwareMetricsRegistry.html","title":"Class: DimensionAwareMetricsRegistry","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Class: DimensionAwareMetricsRegistry DimensionAwareMetricsRegistry Simple registry that stores Metrics by name and dimensions. new DimensionAwareMetricsRegistry() Source: measured-reporting/lib/registries/DimensionAwareMetricsRegistry.js, line 4 Methods allKeys() Returns an array of all keys of metrics stored in this registry. Source: measured-reporting/lib/registries/DimensionAwareMetricsRegistry.js, line 65 Returns: all keys of metrics stored in this registry. Type Array.&lt;string&gt; getMetric(name, dimensions) Retrieves a metric with a given name and dimensions is present. Parameters: Name Type Description name string The metric name dimensions Dimensions The dimensions for the metric Source: measured-reporting/lib/registries/DimensionAwareMetricsRegistry.js, line 28 Returns: a wrapper object around name, dimension and Metric Type Metric getMetricWrapperByKey(key) Retrieves a metric by the calculated key (name / dimension combo). Parameters: Name Type Description key string The registered key for the given registered MetricWrapper Source: measured-reporting/lib/registries/DimensionAwareMetricsRegistry.js, line 39 Returns: a wrapper object around name, dimension and Metric Type MetricWrapper hasMetric(name, dimensions) Checks to see if a metric with the given name and dimensions is present. Parameters: Name Type Description name string The metric name dimensions Dimensions The dimensions for the metric Source: measured-reporting/lib/registries/DimensionAwareMetricsRegistry.js, line 16 Returns: true if the metric with given dimensions is present Type boolean putMetric(name, metric, dimensions) Upserts a Metric in the internal storage map for a given name, dimension combo Parameters: Name Type Description name string The metric name metric Metric The Metric impl dimensions Dimensions The dimensions for the metric Source: measured-reporting/lib/registries/DimensionAwareMetricsRegistry.js, line 51 Returns: The registry key for the metric, dimension combo Type string × Search results Close "},"ExponentiallyDecayingSample.html":{"id":"ExponentiallyDecayingSample.html","title":"Class: ExponentiallyDecayingSample","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Class: ExponentiallyDecayingSample ExponentiallyDecayingSample ExponentiallyDecayingSample new ExponentiallyDecayingSample() Source: measured-core/lib/util/ExponentiallyDecayingSample.js, line 11 × Search results Close "},"ExponentiallyMovingWeightedAverage.html":{"id":"ExponentiallyMovingWeightedAverage.html","title":"Class: ExponentiallyMovingWeightedAverage","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Class: ExponentiallyMovingWeightedAverage ExponentiallyMovingWeightedAverage ExponentiallyMovingWeightedAverage new ExponentiallyMovingWeightedAverage() Source: measured-core/lib/util/ExponentiallyMovingWeightedAverage.js, line 8 × Search results Close "},"Gauge.html":{"id":"Gauge.html","title":"Class: Gauge","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Class: Gauge Gauge Values that can be read instantly new Gauge(readFn) Parameters: Name Type Description readFn function A function that returns the numeric value for this gauge. Implements: Metric Source: measured-core/lib/metrics/Gauge.js, line 12 Example var Measured = require('measured') var gauge = new Measured.Gauge(function() { return process.memoryUsage().rss; }); Methods getType() The type of the Metric Impl. MetricTypes. Implements: Metric#getType Source: measured-core/lib/metrics/Gauge.js, line 31 Returns: The type of the Metric Impl. Type string toJSON() Implements: Metric#toJSON Source: measured-core/lib/metrics/Gauge.js, line 23 Returns: Gauges directly return the value from the callback which should be a number. Type number × Search results Close "},"Histogram.html":{"id":"Histogram.html","title":"Class: Histogram","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Class: Histogram Histogram Keeps a reservoir of statistically relevant values biased towards the last 5 minutes to explore their distribution. new Histogram( [properties]) Parameters: Name Type Argument Description properties HistogramProperties &lt;optional&gt; see HistogramProperties. Implements: Metric Source: measured-core/lib/metrics/Histogram.js, line 17 Example var Measured = require('measured') var histogram = new Measured.Histogram(); http.createServer(function(req, res) { if (req.headers['content-length']) { histogram.update(parseInt(req.headers['content-length'], 10)); } }); Methods getType() The type of the Metric Impl. MetricTypes. Implements: Metric#getType Source: measured-core/lib/metrics/Histogram.js, line 223 Returns: The type of the Metric Impl. Type string hasValues() Checks whether the histogram contains values. Source: measured-core/lib/metrics/Histogram.js, line 141 Returns: Whether the histogram contains values. Type boolean reset() Resets all values. Histograms initialized with custom options will be reset to the default settings (patch welcome). Source: measured-core/lib/metrics/Histogram.js, line 129 toJSON() Implements: Metric#toJSON Source: measured-core/lib/metrics/Histogram.js, line 148 Returns: Type HistogramData update(value) Pushes value into the sample. timestamp defaults to Date.now(). Parameters: Name Type Description value number Source: measured-core/lib/metrics/Histogram.js, line 44 × Search results Close "},"LoggingReporter.html":{"id":"LoggingReporter.html","title":"Class: LoggingReporter","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Class: LoggingReporter LoggingReporter A reporter impl that simply logs the metrics via the Logger. new LoggingReporter( [options]) Parameters: Name Type Argument Description options LoggingReporterOptions &lt;optional&gt; Source: measured-reporting/lib/reporters/LoggingReporter.js, line 12 Example const { SelfReportingMetricsRegistry, LoggingReporter } = require('measured-reporting'); const registry = new SelfReportingMetricsRegistry(new LoggingReporter()); Extends Reporter Members &lt;protected&gt; _defaultDimensions :Dimensions Map of default dimensions, that should be sent with every metric. Type: Dimensions Inherited From: Reporter#_defaultDimensions Source: measured-reporting/lib/reporters/Reporter.js, line 84 &lt;protected&gt; _defaultReportingIntervalInSeconds :number The default reporting interval, a number in seconds.If not overridden via the {@see ReporterOptions}, defaults to 10 seconds. Type: number Inherited From: Reporter#_defaultReportingIntervalInSeconds Source: measured-reporting/lib/reporters/Reporter.js, line 100 &lt;protected&gt; _log :Logger Loggers to use, defaults to a new bunyan logger if nothing is supplied in options Type: Logger Inherited From: Reporter#_log Source: measured-reporting/lib/reporters/Reporter.js, line 91 &lt;protected&gt; _unrefTimers :boolean Flag to indicate if reporting timers should be unref'd.If not overridden via the {@see ReporterOptions}, defaults to false. Type: boolean Inherited From: Reporter#_unrefTimers Source: measured-reporting/lib/reporters/Reporter.js, line 110 Methods &lt;protected&gt; _getDimensions(metric) Parameters: Name Type Description metric MetricWrapper The Wrapped Metric Object. Inherited From: Reporter#_getDimensions Source: measured-reporting/lib/reporters/Reporter.js, line 208 Returns: The left merged default dimensions with the metric specific dimensions Type Dimensions &lt;protected&gt; _reportMetrics(metrics) Logs the metrics via the inherited logger instance. Parameters: Name Type Description metrics Array.&lt;MetricWrapper&gt; Overrides: Reporter#_reportMetrics Source: measured-reporting/lib/reporters/LoggingReporter.js, line 27 reportMetricOnInterval(metricKey, intervalInSeconds) Informs the reporter to report a metric on a given interval in seconds. Parameters: Name Type Description metricKey string The metric key for the metric in the metric registry. intervalInSeconds number The interval in seconds to report the metric on. Inherited From: Reporter#reportMetricOnInterval Source: measured-reporting/lib/reporters/Reporter.js, line 128 setRegistry(registry) Sets the registry, this must be called before reportMetricOnInterval. Parameters: Name Type Description registry DimensionAwareMetricsRegistry Inherited From: Reporter#setRegistry Source: measured-reporting/lib/reporters/Reporter.js, line 118 shutdown() Clears the intervals that are running to report metrics at an interval, and resets the state. Inherited From: Reporter#shutdown Source: measured-reporting/lib/reporters/Reporter.js, line 215 × Search results Close "},"Meter.html":{"id":"Meter.html","title":"Class: Meter","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Class: Meter Meter Things that are measured as events / interval. new Meter( [properties]) Parameters: Name Type Argument Description properties MeterProperties &lt;optional&gt; see MeterProperties. Implements: Metric Source: measured-core/lib/metrics/Meter.js, line 18 Example var Measured = require('measured') var meter = new Measured.Meter(); http.createServer(function(req, res) { meter.mark(); }); Methods getType() The type of the Metric Impl. MetricTypes. Implements: Metric#getType Source: measured-core/lib/metrics/Meter.js, line 153 Returns: The type of the Metric Impl. Type string mark( [n]) Register n events as having just occured. Defaults to 1. Parameters: Name Type Argument Description n number &lt;optional&gt; Source: measured-core/lib/metrics/Meter.js, line 52 ref() Refs the backing timer again. Idempotent. Source: measured-core/lib/metrics/Meter.js, line 76 reset() Resets all values. Meters initialized with custom options will be reset to the default settings (patch welcome). Source: measured-core/lib/metrics/Meter.js, line 100 toJSON() Implements: Metric#toJSON Source: measured-core/lib/metrics/Meter.js, line 129 Returns: Type MeterData unref() Unrefs the backing timer. The meter will not keep the event loop alive. Idempotent. Source: measured-core/lib/metrics/Meter.js, line 85 × Search results Close "},"Metric.html":{"id":"Metric.html","title":"Interface: Metric","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Interface: Metric Metric Interface for Metric types. Implementations Counter, things that increment or decrement.Gauge, values that can be read instantly via a supplied call back.Histogram, keeps a reservoir of statistically relevant values to explore their distribution.Meter, things that are measured as events / interval.NoOpMeter, an empty impl of meter, useful for supplying to a Timer, when you only care about the Histogram.SettableGauge, just like a Gauge but its value is set directly rather than supplied by a callback.CachedGauge, A Cached Gauge takes a function that returns a promise that resolves a value that should be cached and updated on a given interval.Timer, timers are a combination of Meters and Histograms. They measure the rate as well as distribution of scalar events. Source: measured-core/lib/metrics/Metric.js, line 1 Methods getType() The type of the Metric Impl. MetricTypes. Source: measured-core/lib/metrics/Metric.js, line 32 Returns: The type of the Metric Impl. Type string toJSON() Please note that dispite its name, this method can return raw numbers oncertain implementations such as counters and gauges. Source: measured-core/lib/metrics/Metric.js, line 26 Returns: Returns the data from the Metric Type any × Search results Close "},"MetricTypes.html":{"id":"MetricTypes.html","title":"Interface: MetricTypes","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Interface: MetricTypes MetricTypes An enum like object that is the set of core metric types that all implementors of Metric are. Properties: Name Type Description The COUNTER type for Counters. The GAUGE type for Gauges. The HISTOGRAM type for Histograms. The METER type for Meters. The TIMER type for Timers. Source: measured-core/lib/metrics/Metric.js, line 35 × Search results Close "},"module-CpuUtils.html":{"id":"module-CpuUtils.html","title":"Module: CpuUtils","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Module: CpuUtils Source: measured-node-metrics/lib/utils/CpuUtils.js, line 3 Methods &lt;static&gt; calculateCpuUsagePercent(startMeasure, endMeasure) Parameters: Name Type Description startMeasure Object endMeasure Object Source: measured-node-metrics/lib/utils/CpuUtils.js, line 35 &lt;static&gt; cpuAverage() Source: measured-node-metrics/lib/utils/CpuUtils.js, line 11 Returns: Type Object × Search results Close "},"module-inputValidators.html":{"id":"module-inputValidators.html","title":"Module: inputValidators","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Module: inputValidators This module contains various validators to validate publicly exposed input. Source: measured-reporting/lib/validators/inputValidators.js, line 4 Methods &lt;static&gt; validateCachedGaugeOptions(name, callback, dimensions, publishingIntervalInSeconds) Validates @{link Gauge} options. Parameters: Name Type Description name string The metric name callback function The callback for the CachedGauge dimensions Dimensions The optional custom dimensions publishingIntervalInSeconds number the optional publishing interval Source: measured-reporting/lib/validators/inputValidators.js, line 31 &lt;static&gt; validateCommonMetricParameters(name, dimensions, publishingIntervalInSeconds) Validates the options that are common amoung all create metric methods Parameters: Name Type Description name string The metric name dimensions Dimensions The optional custom dimensions publishingIntervalInSeconds number the optional publishing interval Source: measured-reporting/lib/validators/inputValidators.js, line 100 &lt;static&gt; validateCounterOptions(name, dimensions, publishingIntervalInSeconds) Validates the create counter Options. Parameters: Name Type Description name string The metric name dimensions Dimensions The optional custom dimensions publishingIntervalInSeconds number the optional publishing interval Source: measured-reporting/lib/validators/inputValidators.js, line 54 &lt;static&gt; validateGaugeOptions(name, callback, dimensions, publishingIntervalInSeconds) Validates @{link Gauge} options. Parameters: Name Type Description name string The metric name callback function The callback for the Gauge dimensions Dimensions The optional custom dimensions publishingIntervalInSeconds number the optional publishing interval Source: measured-reporting/lib/validators/inputValidators.js, line 18 &lt;static&gt; validateHistogramOptions(name, dimensions, publishingIntervalInSeconds) Validates the create histogram Options. Parameters: Name Type Description name string The metric name dimensions Dimensions The optional custom dimensions publishingIntervalInSeconds number the optional publishing interval Source: measured-reporting/lib/validators/inputValidators.js, line 43 &lt;static&gt; validateMetricName(name) Validates the metric name. Parameters: Name Type Description name The metric name. Source: measured-reporting/lib/validators/inputValidators.js, line 111 &lt;static&gt; validateNumberReturningCallback(callback) Validates the provided callback. Parameters: Name Type Description callback The provided callback for a gauge. Source: measured-reporting/lib/validators/inputValidators.js, line 132 &lt;static&gt; validateOptionalDimensions(dimensionsOptional) Validates a set of optional dimensions Parameters: Name Type Description dimensionsOptional Source: measured-reporting/lib/validators/inputValidators.js, line 148 &lt;static&gt; validateOptionalLogger(loggerOptional) Validates that an optional logger instance at least has the methods we expect. Parameters: Name Type Description loggerOptional Source: measured-reporting/lib/validators/inputValidators.js, line 172 &lt;static&gt; validateOptionalPublishingInterval(publishingIntervalInSecondsOptional) Validates the optional publishing interval. Parameters: Name Type Description publishingIntervalInSecondsOptional The optional publishing interval. Source: measured-reporting/lib/validators/inputValidators.js, line 194 &lt;static&gt; validateRegisterOptions(name, metric, dimensions, publishingIntervalInSeconds) Validates the create timer Options. Parameters: Name Type Description name string The metric name metric Metric The metric instance dimensions Dimensions The optional custom dimensions publishingIntervalInSeconds number the optional publishing interval Source: measured-reporting/lib/validators/inputValidators.js, line 77 &lt;static&gt; validateReporterInstance(reporter) Validates that a valid Reporter object has been supplied Parameters: Name Type Description reporter Reporter Source: measured-reporting/lib/validators/inputValidators.js, line 224 &lt;static&gt; validateReporterParameters(options) Validates optional params for a Reporter Parameters: Name Type Description options ReporterOptions The optional params Source: measured-reporting/lib/validators/inputValidators.js, line 207 &lt;static&gt; validateSelfReportingMetricsRegistryParameters(reporters [, options]) Validates the input parameters for a SelfReportingMetricsRegistry Parameters: Name Type Argument Description reporters Array.&lt;Reporter&gt; options SelfReportingMetricsRegistryOptions &lt;optional&gt; Source: measured-reporting/lib/validators/inputValidators.js, line 245 &lt;static&gt; validateSettableGaugeOptions(name, dimensions, publishingIntervalInSeconds) Validates the create settable gauge Options. Parameters: Name Type Description name string The metric name dimensions Dimensions The optional custom dimensions publishingIntervalInSeconds number the optional publishing interval Source: measured-reporting/lib/validators/inputValidators.js, line 89 &lt;static&gt; validateTimerOptions(name, dimensions, publishingIntervalInSeconds) Validates the create timer Options. Parameters: Name Type Description name string The metric name dimensions Dimensions The optional custom dimensions publishingIntervalInSeconds number the optional publishing interval Source: measured-reporting/lib/validators/inputValidators.js, line 65 &lt;inner&gt; validateMetric(metric) Validates that a metric implements the metric interface. Parameters: Name Type Description metric Metric The object that is supposed to be a metric. Source: measured-reporting/lib/validators/inputValidators.js, line 118 × Search results Close "},"module-measured-core.html":{"id":"module-measured-core.html","title":"Module: measured-core","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Module: measured-core The main measured-core module that is referenced when require('measured-core') is used. Source: measured-core/lib/index.js, line 18 Members &lt;static&gt; BinaryHeap :BinaryHeap See BinaryHeap Type: BinaryHeap Source: measured-core/lib/index.js, line 81 &lt;static&gt; CachedGauge :CachedGauge See CachedGauge Type: CachedGauge Source: measured-core/lib/index.js, line 51 &lt;static&gt; Collection :Collection See Collection Type: Collection Source: measured-core/lib/index.js, line 27 &lt;static&gt; Counter :Counter See Counter Type: Counter Source: measured-core/lib/index.js, line 33 &lt;static&gt; ExponentiallyDecayingSample :ExponentiallyDecayingSample See ExponentiallyDecayingSample Type: ExponentiallyDecayingSample Source: measured-core/lib/index.js, line 87 &lt;static&gt; ExponentiallyMovingWeightedAverage :ExponentiallyMovingWeightedAverage See ExponentiallyMovingWeightedAverage Type: ExponentiallyMovingWeightedAverage Source: measured-core/lib/index.js, line 93 &lt;static&gt; Gauge :Gauge See Gauge Type: Gauge Source: measured-core/lib/index.js, line 39 &lt;static&gt; Histogram :Histogram See Histogram Type: Histogram Source: measured-core/lib/index.js, line 57 &lt;static&gt; Meter :Meter See Meter Type: Meter Source: measured-core/lib/index.js, line 63 &lt;static&gt; MetricTypes :MetricTypes See MetricTypes Type: MetricTypes Source: measured-core/lib/index.js, line 105 &lt;static&gt; metricValidators :Object.&lt;string, function()&gt; See module:metricValidators Type: Object.&lt;string, function()&gt; Source: measured-core/lib/index.js, line 123 &lt;static&gt; NoOpMeter :NoOpMeter See NoOpMeter Type: NoOpMeter Source: measured-core/lib/index.js, line 69 &lt;static&gt; SettableGauge :SettableGauge See SettableGauge Type: SettableGauge Source: measured-core/lib/index.js, line 45 &lt;static&gt; Stopwatch :Stopwatch See Stopwatch Type: Stopwatch Source: measured-core/lib/index.js, line 99 &lt;static&gt; Timer :Timer See Timer Type: Timer Source: measured-core/lib/index.js, line 75 &lt;static&gt; TimeUnits :units See units Type: units Source: measured-core/lib/index.js, line 117 &lt;static&gt; units :units See units Type: units Source: measured-core/lib/index.js, line 111 Methods &lt;static&gt; createCollection(name) Creates a named collection. See Collection for more details Parameters: Name Type Description name The name for the collection Source: measured-core/lib/index.js, line 131 Returns: Type Collection × Search results Close "},"module-measured-node-metrics.html":{"id":"module-measured-node-metrics.html","title":"Module: measured-node-metrics","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Module: measured-node-metrics The main module for the measured-node-metrics lib. Various functions to help create node metrics and http framework middlewaresthat can be used with a self reporting metrics registry to easily instrument metrics for a node app. Source: measured-node-metrics/lib/index.js, line 5 Members &lt;static&gt; nodeOsMetrics :Object.&lt;string, function()&gt; Map of metric names and a functions that can be used to generate that metric object that can be registered with aself reporting metrics registry or used as seen fit. See nodeOsMetrics. Type: Object.&lt;string, function()&gt; Source: measured-node-metrics/lib/index.js, line 45 &lt;static&gt; nodeProcessMetrics :Object.&lt;string, function()&gt; Map of metric names and a functions that can be used to generate that metric object that can be registered with aself reporting metrics registry or used as seen fit. See nodeProcessMetrics. Type: Object.&lt;string, function()&gt; Source: measured-node-metrics/lib/index.js, line 22 Methods &lt;inner&gt; createExpressMiddleware(metricsRegistry [, reportingIntervalInSeconds]) Creates an Express middleware that reports a timer on request data.With this middleware you will get requests counts and latency percentiles all filterable by status codes, http method, and uri paths. Parameters: Name Type Argument Description metricsRegistry SelfReportingMetricsRegistry reportingIntervalInSeconds number &lt;optional&gt; Source: measured-node-metrics/lib/index.js, line 60 Returns: Type function &lt;inner&gt; createOSMetrics(metricsRegistry, customDimensions, reportingIntervalInSeconds) Method that can be used to add a set of default node process metrics to your app. registers all metrics defined in the nodeOsMetrics map. Parameters: Name Type Description metricsRegistry SelfReportingMetricsRegistry customDimensions Dimensions reportingIntervalInSeconds number Source: measured-node-metrics/lib/index.js, line 47 &lt;inner&gt; createProcessMetrics(metricsRegistry, customDimensions, reportingIntervalInSeconds) Method that can be used to add a set of default node process metrics to your node app. registers all metrics defined in the nodeProcessMetrics map. Parameters: Name Type Description metricsRegistry SelfReportingMetricsRegistry customDimensions Dimensions reportingIntervalInSeconds number Source: measured-node-metrics/lib/index.js, line 24 &lt;inner&gt; onRequestEnd(metricsRegistry, stopwatch, method, statusCode [, uri] [, reportingIntervalInSeconds]) When the request ends stop the stop watch and create or update the timer for requests that tracked by method, statuscode, path.The timers (meters and histograms) that get reported will be filterable by status codes, http method, the uri path.You will be able to create dash boards such as success percentage, latency percentiles by path and method, etc. Parameters: Name Type Argument Description metricsRegistry The Self Reporting Metrics Registry stopwatch The stopwatch created by onRequestStart method The Http Method for the request statusCode The status code for the response uri &lt;optional&gt; The uri for the request. Please note to avoid out of control time series dimension creation spread,you would want to strip out ids and or other variables from the uri path. reportingIntervalInSeconds &lt;optional&gt; override the reporting interval defaults to every 10 seconds. Source: measured-node-metrics/lib/index.js, line 80 &lt;inner&gt; onRequestStart() At the start of the request, create a stopwatch, that starts tracking how long the request is taking. Source: measured-node-metrics/lib/index.js, line 72 Returns: Type Stopwatch × Search results Close "},"module-measured-reporting.html":{"id":"module-measured-reporting.html","title":"Module: measured-reporting","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Module: measured-reporting The main measured module that is referenced when require('measured-reporting') is used. Source: measured-reporting/lib/index.js, line 6 Members &lt;static&gt; inputValidators :inputValidators Various Input Validation functions. Type: inputValidators Source: measured-reporting/lib/index.js, line 38 &lt;static&gt; LoggingReporter :LoggingReporter The basic included reference reporter, simply logs the metrics.See {ReporterOptions} for options. Type: LoggingReporter Source: measured-reporting/lib/index.js, line 31 &lt;static&gt; Reporter :Reporter The abstract / base Reporter class. Type: Reporter Source: measured-reporting/lib/index.js, line 23 &lt;static&gt; SelfReportingMetricsRegistry :SelfReportingMetricsRegistry The Self Reporting Metrics Registry Class. Type: SelfReportingMetricsRegistry Source: measured-reporting/lib/index.js, line 16 × Search results Close "},"module-measured-signalfx-reporter.html":{"id":"module-measured-signalfx-reporter.html","title":"Module: measured-signalfx-reporter","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Module: measured-signalfx-reporter The main measured module that is referenced when require('measured-signalfx-reporter') is used. Source: measured-signalfx-reporter/lib/index.js, line 5 Members &lt;static&gt; SignalFxEventCategories {@type SignalFxEventCategories} Source: measured-signalfx-reporter/lib/index.js, line 21 &lt;static&gt; SignalFxMetricsReporter {@type SignalFxMetricsReporter} Source: measured-signalfx-reporter/lib/index.js, line 13 &lt;static&gt; SignalFxSelfReportingMetricsRegistry {@type SignalFxSelfReportingMetricsRegistry} Source: measured-signalfx-reporter/lib/index.js, line 17 × Search results Close "},"module-metricValidators.html":{"id":"module-metricValidators.html","title":"Module: metricValidators","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Module: metricValidators This module contains various validators to validate publicly exposed input. Source: measured-core/lib/validators/metricValidators.js, line 7 Methods &lt;static&gt; validateMetric(metric) Validates that a metric implements the metric interface. Parameters: Name Type Description metric Metric The object that is supposed to be a metric. Source: measured-core/lib/validators/metricValidators.js, line 18 × Search results Close "},"module-node-http-request-metrics.html":{"id":"module-node-http-request-metrics.html","title":"Module: node-http-request-metrics","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Module: node-http-request-metrics This module has functions needed to create middlewares for frameworks such as express.It also exports the 2 functions needed to implement your own middleware.If you implement a middleware for a framework not implemented here, please contribute it back. Source: measured-node-metrics/lib/nodeHttpRequestMetrics.js, line 9 Methods &lt;static&gt; createExpressMiddleware(metricsRegistry [, reportingIntervalInSeconds]) Creates an Express middleware that reports a timer on request data.With this middleware you will get requests counts and latency percentiles all filterable by status codes, http method, and uri paths. Parameters: Name Type Argument Description metricsRegistry SelfReportingMetricsRegistry reportingIntervalInSeconds number &lt;optional&gt; Source: measured-node-metrics/lib/nodeHttpRequestMetrics.js, line 25 Returns: Type function &lt;static&gt; onRequestEnd(metricsRegistry, stopwatch, method, statusCode [, uri] [, reportingIntervalInSeconds]) When the request ends stop the stop watch and create or update the timer for requests that tracked by method, status code, path.The timers (meters and histograms) that get reported will be filterable by status codes, http method, the uri path.You will be able to create dash boards such as success percentage, latency percentiles by uri path and method, etc. Parameters: Name Type Argument Description metricsRegistry SelfReportingMetricsRegistry The Self Reporting Metrics Registry stopwatch Stopwatch The stopwatch created by onRequestStart method string The Http Method for the request statusCode string | number The status code for the response uri string &lt;optional&gt; The uri path for the request. Please note to avoid out of control time series dimension creation spread,you would want to strip out ids and or other variables from the uri path. reportingIntervalInSeconds number &lt;optional&gt; override the reporting interval defaults to every 10 seconds. Source: measured-node-metrics/lib/nodeHttpRequestMetrics.js, line 61 &lt;static&gt; onRequestStart() At the start of the request, create a stopwatch, that starts tracking how long the request is taking. Source: measured-node-metrics/lib/nodeHttpRequestMetrics.js, line 44 Returns: Type Stopwatch × Search results Close "},"module-node-os-metrics.html":{"id":"module-node-os-metrics.html","title":"Module: node-os-metrics","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Module: node-os-metrics This module contains the methods to create and register default node os metrics to a metrics registry. Source: measured-node-metrics/lib/nodeOsMetrics.js, line 94 Members &lt;static&gt; nodeOsMetrics Map of metric names to a corresponding function that creates and returns a Metric that tracks it.See nodeOsMetrics Source: measured-node-metrics/lib/nodeOsMetrics.js, line 120 Methods &lt;static&gt; createOSMetrics(metricsRegistry, customDimensions, reportingIntervalInSeconds) Method that can be used to add a set of default node process metrics to your app. Parameters: Name Type Description metricsRegistry SelfReportingMetricsRegistry customDimensions Dimensions reportingIntervalInSeconds number Source: measured-node-metrics/lib/nodeOsMetrics.js, line 107 × Search results Close "},"module-node-process-metrics.html":{"id":"module-node-process-metrics.html","title":"Module: node-process-metrics","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Module: node-process-metrics This module contains the methods to create and register default node process metrics to a metrics registry. Source: measured-node-metrics/lib/nodeProcessMetrics.js, line 71 Members &lt;static&gt; nodeProcessMetrics Map of metric names to a corresponding function that creates and returns a Metric that tracks it.See nodeProcessMetrics Source: measured-node-metrics/lib/nodeProcessMetrics.js, line 103 Methods &lt;static&gt; createProcessMetrics(metricsRegistry [, customDimensions] [, reportingIntervalInSeconds]) Method that can be used to add a set of default node process metrics to your app. Parameters: Name Type Argument Description metricsRegistry SelfReportingMetricsRegistry customDimensions Dimensions &lt;optional&gt; reportingIntervalInSeconds number &lt;optional&gt; Source: measured-node-metrics/lib/nodeProcessMetrics.js, line 84 × Search results Close "},"module-SignalFxEventCategories.html":{"id":"module-SignalFxEventCategories.html","title":"Module: SignalFxEventCategories","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Module: SignalFxEventCategories Different categories of events supported, within the SignalFx Event API. Source: measured-signalfx-reporter/lib/SignalFxEventCategories.js, line 1 Example const registry = new SignalFxSelfReportingMetricsRegistry(...); registry.sendEvent('uncaughtException', SignalFxEventCategories.ALERT); Members &lt;static&gt; ALERT :SignalFxEventCategoryId Output by anomaly detectors Type: SignalFxEventCategoryId Source: measured-signalfx-reporter/lib/SignalFxEventCategories.js, line 20 &lt;static&gt; AUDIT :SignalFxEventCategoryId Audit trail events Type: SignalFxEventCategoryId Source: measured-signalfx-reporter/lib/SignalFxEventCategories.js, line 25 &lt;static&gt; COLLECTD :SignalFxEventCategoryId Event originated within collectd Type: SignalFxEventCategoryId Source: measured-signalfx-reporter/lib/SignalFxEventCategories.js, line 35 &lt;static&gt; EXCEPTION :SignalFxEventCategoryId Created by exception appenders to denote exceptional events Type: SignalFxEventCategoryId Source: measured-signalfx-reporter/lib/SignalFxEventCategories.js, line 45 &lt;static&gt; JOB :SignalFxEventCategoryId Generated by analytics server Type: SignalFxEventCategoryId Source: measured-signalfx-reporter/lib/SignalFxEventCategories.js, line 30 &lt;static&gt; SERVICE_DISCOVERY :SignalFxEventCategoryId Service discovery event Type: SignalFxEventCategoryId Source: measured-signalfx-reporter/lib/SignalFxEventCategories.js, line 40 &lt;static&gt; USER_DEFINED :SignalFxEventCategoryId Created by user via UI or API, e.g. a deployment event Type: SignalFxEventCategoryId Source: measured-signalfx-reporter/lib/SignalFxEventCategories.js, line 15 × Search results Close "},"module-timeUnits.html":{"id":"module-timeUnits.html","title":"Module: timeUnits","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Module: timeUnits Time units, as found in Java: http://download.oracle.com/javase/6/docs/api/java/util/concurrent/TimeUnit.html Source: measured-core/lib/util/units.js, line 9 Example const timeUnit = require('measured-core').unit setTimeout(() =&gt; {}, 5 * timeUnit.MINUTES) Members &lt;static&gt; DAYS :number days in milliseconds Type: number Source: measured-core/lib/util/units.js, line 51 &lt;static&gt; HOURS :number hours in milliseconds Type: number Source: measured-core/lib/util/units.js, line 46 &lt;static&gt; MICROSECONDS :number microseconds in milliseconds Type: number Source: measured-core/lib/util/units.js, line 26 &lt;static&gt; MILLISECONDS :number milliseconds in milliseconds Type: number Source: measured-core/lib/util/units.js, line 31 &lt;static&gt; MINUTES :number minutes in milliseconds Type: number Source: measured-core/lib/util/units.js, line 41 &lt;static&gt; NANOSECONDS :number nanoseconds in milliseconds Type: number Source: measured-core/lib/util/units.js, line 21 &lt;static&gt; SECONDS :number seconds in milliseconds Type: number Source: measured-core/lib/util/units.js, line 36 × Search results Close "},"NoOpMeter.html":{"id":"NoOpMeter.html","title":"Class: NoOpMeter","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Class: NoOpMeter NoOpMeter A No-Op Impl of Meter that can be used with a timer, to only create histogram data.This is useful for some time series aggregators that can calculate rates for you just off of sent count. new NoOpMeter() Implements: Metric Source: measured-core/lib/metrics/NoOpMeter.js, line 17 Example const { NoOpMeter, Timer } = require('measured') const meter = new NoOpMeter(); const timer = new Timer({meter: meter}); ... // do some stuff with the timer and stopwatch api ... Methods currentRate() No-Op impl Source: measured-core/lib/metrics/NoOpMeter.js, line 58 end() No-Op impl Source: measured-core/lib/metrics/NoOpMeter.js, line 33 getType() The type of the Metric Impl. MetricTypes. Implements: Metric#getType Source: measured-core/lib/metrics/NoOpMeter.js, line 72 Returns: The type of the Metric Impl. Type string mark(n) No-Op impl Parameters: Name Type Description n number Number of events to mark. Source: measured-core/lib/metrics/NoOpMeter.js, line 23 meanRate() No-Op impl Source: measured-core/lib/metrics/NoOpMeter.js, line 53 ref() No-Op impl Source: measured-core/lib/metrics/NoOpMeter.js, line 38 reset() No-Op impl Source: measured-core/lib/metrics/NoOpMeter.js, line 48 start() No-Op impl Source: measured-core/lib/metrics/NoOpMeter.js, line 28 toJSON() Returns an empty object Implements: Metric#toJSON Source: measured-core/lib/metrics/NoOpMeter.js, line 64 Returns: Type Object unref() No-Op impl Source: measured-core/lib/metrics/NoOpMeter.js, line 43 × Search results Close "},"Reporter.html":{"id":"Reporter.html","title":"Class: Reporter","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Class: Reporter Reporter The abstract reporter that specific implementations can extend to create a Self Reporting Metrics Registry Reporter. SelfReportingMetricsRegistry &lt;abstract&gt; new Reporter( [options]) Parameters: Name Type Argument Description options ReporterOptions &lt;optional&gt; The optional params to supply when creating a reporter. Source: measured-reporting/lib/reporters/Reporter.js, line 57 Examples const os = require('os'); const process = require('process'); const { SelfReportingMetricsRegistry, Reporter } = require('measured-reporting'); // Create a self reporting registry with a named anonymous reporter instance; const registry = new SelfReportingMetricsRegistry( new class ConsoleReporter extends Reporter { constructor() { super({ defaultDimensions: { hostname: os.hostname(), env: process.env['NODE_ENV'] ? process.env['NODE_ENV'] : 'unset' } }) } _reportMetrics(metrics) { metrics.forEach(metric =&gt; { console.log(JSON.stringify({ metricName: metric.name, dimensions: this._getDimensions(metric), data: metric.metricImpl.toJSON() })) }); } }() ); // Create a regular class that extends Reporter class LoggingReporter extends Reporter { _reportMetrics(metrics) { metrics.forEach(metric =&gt; { this._log.info(JSON.stringify({ metricName: metric.name, dimensions: this._getDimensions(metric), data: metric.metricImpl.toJSON() })) }); } } Members &lt;protected&gt; _defaultDimensions :Dimensions Map of default dimensions, that should be sent with every metric. Type: Dimensions Source: measured-reporting/lib/reporters/Reporter.js, line 84 &lt;protected&gt; _defaultReportingIntervalInSeconds :number The default reporting interval, a number in seconds.If not overridden via the {@see ReporterOptions}, defaults to 10 seconds. Type: number Source: measured-reporting/lib/reporters/Reporter.js, line 100 &lt;protected&gt; _log :Logger Loggers to use, defaults to a new bunyan logger if nothing is supplied in options Type: Logger Source: measured-reporting/lib/reporters/Reporter.js, line 91 &lt;protected&gt; _unrefTimers :boolean Flag to indicate if reporting timers should be unref'd.If not overridden via the {@see ReporterOptions}, defaults to false. Type: boolean Source: measured-reporting/lib/reporters/Reporter.js, line 110 Methods &lt;protected&gt; _getDimensions(metric) Parameters: Name Type Description metric MetricWrapper The Wrapped Metric Object. Source: measured-reporting/lib/reporters/Reporter.js, line 208 Returns: The left merged default dimensions with the metric specific dimensions Type Dimensions &lt;abstract, protected&gt; _reportMetrics(metrics) This method gets called with an array of MetricWrapper on an interval, when metrics should be reported. This is the main method that needs to get implemented when created an aggregator specific reporter. Parameters: Name Type Description metrics Array.&lt;MetricWrapper&gt; The array of metrics to report. Source: measured-reporting/lib/reporters/Reporter.js, line 198 reportMetricOnInterval(metricKey, intervalInSeconds) Informs the reporter to report a metric on a given interval in seconds. Parameters: Name Type Description metricKey string The metric key for the metric in the metric registry. intervalInSeconds number The interval in seconds to report the metric on. Source: measured-reporting/lib/reporters/Reporter.js, line 128 setRegistry(registry) Sets the registry, this must be called before reportMetricOnInterval. Parameters: Name Type Description registry DimensionAwareMetricsRegistry Source: measured-reporting/lib/reporters/Reporter.js, line 118 shutdown() Clears the intervals that are running to report metrics at an interval, and resets the state. Source: measured-reporting/lib/reporters/Reporter.js, line 215 × Search results Close "},"SelfReportingMetricsRegistry.html":{"id":"SelfReportingMetricsRegistry.html","title":"Class: SelfReportingMetricsRegistry","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Class: SelfReportingMetricsRegistry SelfReportingMetricsRegistry A dimensional aware self-reporting metrics registry new SelfReportingMetricsRegistry(reporters [, options]) Parameters: Name Type Argument Description reporters Reporter | Array.&lt;Reporter&gt; A single Reporter or an array of reporters that will be used to report metrics on an interval. options SelfReportingMetricsRegistryOptions &lt;optional&gt; Configurable options for the Self Reporting Metrics Registry Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 18 Members &lt;protected&gt; _log :Logger Loggers to use, defaults to a new bunyan logger if nothing is supplied in options Type: Logger Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 50 &lt;protected&gt; _registry :DimensionAwareMetricsRegistry Type: DimensionAwareMetricsRegistry Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 42 &lt;protected&gt; _reporters :Reporter Type: Reporter Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 36 Methods getOrCreateCachedGauge(name [, dimensions] [, publishingIntervalInSeconds]) Creates a CachedGauge or gets the existing CachedGauge for a given name and dimension combo. Parameters: Name Type Argument Description name string The Metric name. valueProducingPromiseCallback. function cachedGaugeUpdateIntervalInSeconds. number dimensions Dimensions &lt;optional&gt; any custom Dimensions for the Metric. publishingIntervalInSeconds number &lt;optional&gt; a optional custom publishing interval. Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 248 Returns: Type CachedGauge getOrCreateCounter(name [, dimensions] [, publishingIntervalInSeconds]) Creates a Counter or gets the existing Counter for a given name and dimension combo Parameters: Name Type Argument Description name string The Metric name dimensions Dimensions &lt;optional&gt; any custom Dimensions for the Metric publishingIntervalInSeconds number &lt;optional&gt; a optional custom publishing interval Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 177 Returns: Type Counter getOrCreateGauge(name, callback [, dimensions] [, publishingIntervalInSeconds]) Creates a Gauge or gets the existing Gauge for a given name and dimension combo Parameters: Name Type Argument Description name string The Metric name callback function The callback that will return a value to report to signal fx dimensions Dimensions &lt;optional&gt; any custom Dimensions for the Metric publishingIntervalInSeconds number &lt;optional&gt; a optional custom publishing interval Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 111 Returns: Type Gauge Example // https://nodejs.org/api/process.html#process_process_memoryusage // Report heap total and heap used at the default interval registry.getOrCreateGauge( 'process-memory-heap-total', () =&gt; { return process.memoryUsage().heapTotal } ); registry.getOrCreateGauge( 'process-memory-heap-used', () =&gt; { return process.memoryUsage().heapUsed } ) getOrCreateHistogram(name [, dimensions] [, publishingIntervalInSeconds]) Creates a Histogram or gets the existing Histogram for a given name and dimension combo Parameters: Name Type Argument Description name string The Metric name dimensions Dimensions &lt;optional&gt; any custom Dimensions for the Metric publishingIntervalInSeconds number &lt;optional&gt; a optional custom publishing interval Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 132 Returns: Type Histogram getOrCreateMeter(name [, dimensions] [, publishingIntervalInSeconds]) Creates a Meter or gets the existing Meter for a given name and dimension combo Parameters: Name Type Argument Description name string The Metric name dimensions Dimensions &lt;optional&gt; any custom Dimensions for the Metric publishingIntervalInSeconds number &lt;optional&gt; a optional custom publishing interval Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 155 Returns: Type Meter getOrCreateSettableGauge(name [, dimensions] [, publishingIntervalInSeconds]) Creates a SettableGauge or gets the existing SettableGauge for a given name and dimension combo. Parameters: Name Type Argument Description name string The Metric name dimensions Dimensions &lt;optional&gt; any custom Dimensions for the Metric publishingIntervalInSeconds number &lt;optional&gt; a optional custom publishing interval Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 223 Returns: Type SettableGauge getOrCreateTimer(name [, dimensions] [, publishingIntervalInSeconds]) Creates a Timer or gets the existing Timer for a given name and dimension combo. Parameters: Name Type Argument Description name string The Metric name dimensions Dimensions &lt;optional&gt; any custom Dimensions for the Metric publishingIntervalInSeconds number &lt;optional&gt; a optional custom publishing interval Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 200 Returns: Type Timer register(name, metric [, dimensions] [, publishingIntervalInSeconds]) Registers a manually created Metric. Parameters: Name Type Argument Description name string The Metric name metric Metric The Metric to register dimensions Dimensions &lt;optional&gt; any custom Dimensions for the Metric publishingIntervalInSeconds number &lt;optional&gt; a optional custom publishing interval Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 73 Example const settableGauge = new SettableGauge(5); // register the gauge and have it report to every 10 seconds registry.register('my-gauge', settableGauge, {}, 10); interval(() =&gt; { // such as cpu % used determineAValueThatCannotBeSync((value) =&gt; { settableGauge.update(value); }) }, 10000) shutdown() Calls end on all metrics in the registry that support end() and calls end on the reporter Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 272 × Search results Close "},"SettableGauge.html":{"id":"SettableGauge.html","title":"Class: SettableGauge","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Class: SettableGauge SettableGauge Works like a Gauge, but rather than getting its value from a callback, the valueis set when needed. This can be useful for setting a gauges value for asynchronous operations. new SettableGauge( [options]) Parameters: Name Type Argument Description options SettableGaugeProperties &lt;optional&gt; See SettableGaugeProperties. Implements: Metric Source: measured-core/lib/metrics/SettableGauge.js, line 16 Example const settableGauge = new SettableGauge(); // Update the settable gauge ever 10'ish seconds setInterval(() =&gt; { calculateSomethingAsync().then((value) =&gt; { settableGauge.setValue(value); }); }, 10000); Methods getType() The type of the Metric Impl. MetricTypes. Implements: Metric#getType Source: measured-core/lib/metrics/SettableGauge.js, line 40 Returns: The type of the Metric Impl. Type string toJSON() Implements: Metric#toJSON Source: measured-core/lib/metrics/SettableGauge.js, line 32 Returns: Settable Gauges directly return there current value. Type number × Search results Close "},"SignalFxMetricsReporter.html":{"id":"SignalFxMetricsReporter.html","title":"Class: SignalFxMetricsReporter","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Class: SignalFxMetricsReporter SignalFxMetricsReporter A Reporter that reports metrics to Signal Fx new SignalFxMetricsReporter(signalFxClient [, options]) Parameters: Name Type Argument Description signalFxClient SignalFxClient The configured signal fx client. options ReporterOptions &lt;optional&gt; See ReporterOptions. Source: measured-signalfx-reporter/lib/reporters/SignalFxMetricsReporter.js, line 10 Extends Reporter Members &lt;protected&gt; _defaultDimensions :Dimensions Map of default dimensions, that should be sent with every metric. Type: Dimensions Inherited From: Reporter#_defaultDimensions Source: measured-reporting/lib/reporters/Reporter.js, line 84 &lt;protected&gt; _defaultReportingIntervalInSeconds :number The default reporting interval, a number in seconds.If not overridden via the {@see ReporterOptions}, defaults to 10 seconds. Type: number Inherited From: Reporter#_defaultReportingIntervalInSeconds Source: measured-reporting/lib/reporters/Reporter.js, line 100 &lt;protected&gt; _log :Logger Loggers to use, defaults to a new bunyan logger if nothing is supplied in options Type: Logger Inherited From: Reporter#_log Source: measured-reporting/lib/reporters/Reporter.js, line 91 &lt;protected&gt; _unrefTimers :boolean Flag to indicate if reporting timers should be unref'd.If not overridden via the {@see ReporterOptions}, defaults to false. Type: boolean Inherited From: Reporter#_unrefTimers Source: measured-reporting/lib/reporters/Reporter.js, line 110 Methods &lt;protected&gt; _getDimensions(metric) Parameters: Name Type Description metric MetricWrapper The Wrapped Metric Object. Inherited From: Reporter#_getDimensions Source: measured-reporting/lib/reporters/Reporter.js, line 208 Returns: The left merged default dimensions with the metric specific dimensions Type Dimensions &lt;protected&gt; _getValuesToProcessForCounter(name, counter) Maps values from a Counter to a set of metrics to report to SigFx. Parameters: Name Type Description name string The registry name counter Counter The data from the measure metric object Source: measured-signalfx-reporter/lib/reporters/SignalFxMetricsReporter.js, line 153 Returns: Returns an array of MetricValueTypeWrapper to use to build the request Type Array.&lt;MetricValueTypeWrapper&gt; &lt;protected&gt; _getValuesToProcessForGauge(name, gauge) Maps values from a Gauge to a set of metrics to report to SigFx. Parameters: Name Type Description name string The registry name gauge Gauge The Gauge Source: measured-signalfx-reporter/lib/reporters/SignalFxMetricsReporter.js, line 135 Returns: Returns an array of MetricValueTypeWrapper to use to build the request Type Array.&lt;MetricValueTypeWrapper&gt; &lt;protected&gt; _getValuesToProcessForHistogram(name, histogram) Maps and Filters values from a Histogram to a set of metrics to report to SigFx. Parameters: Name Type Description name string The registry name histogram Histogram The Histogram Source: measured-signalfx-reporter/lib/reporters/SignalFxMetricsReporter.js, line 171 Returns: Returns an array of MetricValueTypeWrapper to use to build the request Type Array.&lt;MetricValueTypeWrapper&gt; &lt;protected&gt; _getValuesToProcessForTimer(name, timer) Maps and Filters values from a Timer to a set of metrics to report to SigFx. Parameters: Name Type Description name string The registry name timer Timer The Timer Source: measured-signalfx-reporter/lib/reporters/SignalFxMetricsReporter.js, line 120 Returns: Returns an array of MetricValueTypeWrapper to use to build the request Type Array.&lt;MetricValueTypeWrapper&gt; &lt;protected&gt; _getValuesToProcessForType(name, metric) Maps Measured Metrics Object JSON outputs to their respective signal fx metrics using logic fromcom.signalfx.codahale.reporter.AggregateMetricSenderSessionWrapper in the java lib to derive naming Parameters: Name Type Description name string The registered metric base name metric Metric The metric. Source: measured-signalfx-reporter/lib/reporters/SignalFxMetricsReporter.js, line 89 Returns: an array of MetricValueTypeWrapper that can be used tobuild the SignalFx data point request Type Array.&lt;MetricValueTypeWrapper&gt; &lt;protected&gt; _processMetric(metric, currentBuiltRequest) Method for getting raw signal fx api request values from the Timer Object. Parameters: Name Type Description metric MetricWrapper metric The Wrapped Metric Object. currentBuiltRequest any The signal fx request that is being built. Source: measured-signalfx-reporter/lib/reporters/SignalFxMetricsReporter.js, line 54 Returns: the currentBuiltRequest The signal fx request that is being built with the given metric in it. Type any &lt;protected&gt; _reportMetrics(metrics) Sends metrics to signal fx, converting name and dimensions and Metric to data signal fx can ingest Parameters: Name Type Description metrics Array.&lt;MetricWrapper&gt; The array of metrics to send to signal fx. Overrides: Reporter#_reportMetrics Source: measured-signalfx-reporter/lib/reporters/SignalFxMetricsReporter.js, line 26 reportMetricOnInterval(metricKey, intervalInSeconds) Informs the reporter to report a metric on a given interval in seconds. Parameters: Name Type Description metricKey string The metric key for the metric in the metric registry. intervalInSeconds number The interval in seconds to report the metric on. Inherited From: Reporter#reportMetricOnInterval Source: measured-reporting/lib/reporters/Reporter.js, line 128 sendEvent(eventType [, category] [, dimensions] [, properties] [, timestamp]) Function exposes the event API of Signal Fx.See https://github.com/signalfx/signalfx-nodejs#sending-events for more details. Parameters: Name Type Argument Description eventType string The event type (name of the event time series). category SignalFxEventCategoryId &lt;optional&gt; the category of event. See module:SignalFxEventCategories. Value by default is USER_DEFINED. dimensions Dimensions &lt;optional&gt; a map of event dimensions, empty dictionary by default properties Object.&lt;string, string&gt; &lt;optional&gt; a map of extra properties on that event, empty dictionary by default timestamp number &lt;optional&gt; a timestamp, by default is current time. Source: measured-signalfx-reporter/lib/reporters/SignalFxMetricsReporter.js, line 227 Example const { SignalFxSelfReportingMetricsRegistry, SignalFxMetricsReporter, SignalFxEventCategories } = require('measured-signalfx-reporter'); const registry = new SignalFxSelfReportingMetricsRegistry(new SignalFxMetricsReporter(signalFxClient)); registry.sendEvent('uncaughtException', SignalFxEventCategories.ALERT); setRegistry(registry) Sets the registry, this must be called before reportMetricOnInterval. Parameters: Name Type Description registry DimensionAwareMetricsRegistry Inherited From: Reporter#setRegistry Source: measured-reporting/lib/reporters/Reporter.js, line 118 shutdown() Clears the intervals that are running to report metrics at an interval, and resets the state. Inherited From: Reporter#shutdown Source: measured-reporting/lib/reporters/Reporter.js, line 215 × Search results Close "},"SignalFxSelfReportingMetricsRegistry.html":{"id":"SignalFxSelfReportingMetricsRegistry.html","title":"Class: SignalFxSelfReportingMetricsRegistry","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Class: SignalFxSelfReportingMetricsRegistry SignalFxSelfReportingMetricsRegistry A SignalFx Self Reporting Metrics Registry that disallows the use of meters.Meters don't make sense to use with SignalFx because the rate aggregations can be done within SignalFx itself.Meters simply waste DPM (Datapoints per Minute). new SignalFxSelfReportingMetricsRegistry() Source: measured-signalfx-reporter/lib/registries/SignalFxSelfReportingMetricsRegistry.js, line 12 Extends SelfReportingMetricsRegistry Members &lt;protected&gt; _log :Logger Loggers to use, defaults to a new bunyan logger if nothing is supplied in options Type: Logger Inherited From: SelfReportingMetricsRegistry#_log Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 50 &lt;protected&gt; _registry :DimensionAwareMetricsRegistry Type: DimensionAwareMetricsRegistry Inherited From: SelfReportingMetricsRegistry#_registry Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 42 &lt;protected&gt; _reporters :Reporter Type: Reporter Inherited From: SelfReportingMetricsRegistry#_reporters Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 36 Methods getOrCreateCachedGauge(name [, dimensions] [, publishingIntervalInSeconds]) Creates a CachedGauge or gets the existing CachedGauge for a given name and dimension combo. Parameters: Name Type Argument Description name string The Metric name. valueProducingPromiseCallback. function cachedGaugeUpdateIntervalInSeconds. number dimensions Dimensions &lt;optional&gt; any custom Dimensions for the Metric. publishingIntervalInSeconds number &lt;optional&gt; a optional custom publishing interval. Inherited From: SelfReportingMetricsRegistry#getOrCreateCachedGauge Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 248 Returns: Type CachedGauge getOrCreateCounter(name [, dimensions] [, publishingIntervalInSeconds]) Creates a Counter or gets the existing Counter for a given name and dimension combo Parameters: Name Type Argument Description name string The Metric name dimensions Dimensions &lt;optional&gt; any custom Dimensions for the Metric publishingIntervalInSeconds number &lt;optional&gt; a optional custom publishing interval Inherited From: SelfReportingMetricsRegistry#getOrCreateCounter Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 177 Returns: Type Counter getOrCreateGauge(name, callback [, dimensions] [, publishingIntervalInSeconds]) Creates a Gauge or gets the existing Gauge for a given name and dimension combo Parameters: Name Type Argument Description name string The Metric name callback function The callback that will return a value to report to signal fx dimensions Dimensions &lt;optional&gt; any custom Dimensions for the Metric publishingIntervalInSeconds number &lt;optional&gt; a optional custom publishing interval Inherited From: SelfReportingMetricsRegistry#getOrCreateGauge Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 111 Returns: Type Gauge Example // https://nodejs.org/api/process.html#process_process_memoryusage // Report heap total and heap used at the default interval registry.getOrCreateGauge( 'process-memory-heap-total', () =&gt; { return process.memoryUsage().heapTotal } ); registry.getOrCreateGauge( 'process-memory-heap-used', () =&gt; { return process.memoryUsage().heapUsed } ) getOrCreateHistogram(name [, dimensions] [, publishingIntervalInSeconds]) Creates a Histogram or gets the existing Histogram for a given name and dimension combo Parameters: Name Type Argument Description name string The Metric name dimensions Dimensions &lt;optional&gt; any custom Dimensions for the Metric publishingIntervalInSeconds number &lt;optional&gt; a optional custom publishing interval Inherited From: SelfReportingMetricsRegistry#getOrCreateHistogram Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 132 Returns: Type Histogram getOrCreateMeter(name, dimensions, publishingIntervalInSeconds) Meters are not reported to SignalFx.Meters do not make sense to use with SignalFx because the same values can be calculatedusing simple counters and aggregations within SignalFx itself. Parameters: Name Type Description name string The Metric name dimensions Dimensions any custom Dimensions for the Metric publishingIntervalInSeconds number a optional custom publishing interval Overrides: SelfReportingMetricsRegistry#getOrCreateMeter Source: measured-signalfx-reporter/lib/registries/SignalFxSelfReportingMetricsRegistry.js, line 46 Returns: Type NoOpMeter | * getOrCreateSettableGauge(name [, dimensions] [, publishingIntervalInSeconds]) Creates a SettableGauge or gets the existing SettableGauge for a given name and dimension combo. Parameters: Name Type Argument Description name string The Metric name dimensions Dimensions &lt;optional&gt; any custom Dimensions for the Metric publishingIntervalInSeconds number &lt;optional&gt; a optional custom publishing interval Inherited From: SelfReportingMetricsRegistry#getOrCreateSettableGauge Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 223 Returns: Type SettableGauge getOrCreateTimer(name, dimensions, publishingIntervalInSeconds) Creates a Timer or get the existing Timer for a given name and dimension combo with a NoOpMeter. Parameters: Name Type Description name string The Metric name dimensions Dimensions any custom Dimensions for the Metric publishingIntervalInSeconds number a optional custom publishing interval Overrides: SelfReportingMetricsRegistry#getOrCreateTimer Source: measured-signalfx-reporter/lib/registries/SignalFxSelfReportingMetricsRegistry.js, line 21 Returns: Type Timer register(name, metric [, dimensions] [, publishingIntervalInSeconds]) Registers a manually created Metric. Parameters: Name Type Argument Description name string The Metric name metric Metric The Metric to register dimensions Dimensions &lt;optional&gt; any custom Dimensions for the Metric publishingIntervalInSeconds number &lt;optional&gt; a optional custom publishing interval Inherited From: SelfReportingMetricsRegistry#register Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 73 Example const settableGauge = new SettableGauge(5); // register the gauge and have it report to every 10 seconds registry.register('my-gauge', settableGauge, {}, 10); interval(() =&gt; { // such as cpu % used determineAValueThatCannotBeSync((value) =&gt; { settableGauge.update(value); }) }, 10000) sendEvent(eventType [, category] [, dimensions] [, properties] [, timestamp]) Function exposes the event API of Signal Fx.See https://github.com/signalfx/signalfx-nodejs#sending-events for more details. Parameters: Name Type Argument Description eventType string The event type (name of the event time series). category SignalFxEventCategoryId &lt;optional&gt; the category of event. See module:SignalFxEventCategories. Value by default is USER_DEFINED. dimensions Dimensions &lt;optional&gt; a map of event dimensions, empty dictionary by default properties Object.&lt;string, string&gt; &lt;optional&gt; a map of extra properties on that event, empty dictionary by default timestamp number &lt;optional&gt; a timestamp, by default is current time. Source: measured-signalfx-reporter/lib/registries/SignalFxSelfReportingMetricsRegistry.js, line 72 Example const { SignalFxSelfReportingMetricsRegistry, SignalFxMetricsReporter, SignalFxEventCategories } = require('measured-signalfx-reporter'); const registry = new SignalFxSelfReportingMetricsRegistry(new SignalFxMetricsReporter(signalFxClient)); registry.sendEvent('uncaughtException', SignalFxEventCategories.ALERT); shutdown() Calls end on all metrics in the registry that support end() and calls end on the reporter Inherited From: SelfReportingMetricsRegistry#shutdown Source: measured-reporting/lib/registries/SelfReportingMetricsRegistry.js, line 272 × Search results Close "},"Stopwatch.html":{"id":"Stopwatch.html","title":"Class: Stopwatch","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Class: Stopwatch Stopwatch A simple object for tracking elapsed time new Stopwatch( [options]) Creates a started Stopwatch Parameters: Name Type Argument Description options StopwatchProperties &lt;optional&gt; See StopwatchProperties Source: measured-core/lib/util/Stopwatch.js, line 8 Extends EventEmitter Methods end() Called to mark the end of the timer task Source: measured-core/lib/util/Stopwatch.js, line 29 Returns: the total execution time Type number × Search results Close "},"Timer.html":{"id":"Timer.html","title":"Class: Timer","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics Class: Timer Timer Timers are a combination of Meters and Histograms. They measure the rate as well as distribution of scalar events. Since they are frequently used for tracking how long certain things take, they expose an API for that: See example 1. But you can also use them as generic histograms that also track the rate of events: See example 2. new Timer( [properties]) Parameters: Name Type Argument Description properties TimerProperties &lt;optional&gt; See TimerProperties. Implements: Metric Source: measured-core/lib/metrics/Timer.js, line 36 Examples var Measured = require('measured') var timer = new Measured.Timer(); http.createServer(function(req, res) { var stopwatch = timer.start(); req.on('end', function() { stopwatch.end(); }); }); var Measured = require('measured') var timer = new Measured.Timer(); http.createServer(function(req, res) { if (req.headers['content-length']) { timer.update(parseInt(req.headers['content-length'], 10)); } }); Methods getType() The type of the Metric Impl. MetricTypes. Implements: Metric#getType Source: measured-core/lib/metrics/Timer.js, line 116 Returns: The type of the Metric Impl. Type string ref() Refs the backing timer again. Idempotent. Source: measured-core/lib/metrics/Timer.js, line 86 reset() Resets all values. Timers initialized with custom options will be reset to the default settings. Source: measured-core/lib/metrics/Timer.js, line 74 start() Source: measured-core/lib/metrics/Timer.js, line 51 Returns: Returns a Stopwatch that has been started. Type Stopwatch toJSON() toJSON output: meter: See Meter#toJSON output docs above. histogram: See Histogram#toJSON output docs above. Implements: Metric#toJSON Source: measured-core/lib/metrics/Timer.js, line 105 Returns: Type any unref() Unrefs the backing timer. The meter will not keep the event loop alive. Idempotent. Source: measured-core/lib/metrics/Timer.js, line 93 update(value) Updates the internal histogram with value and marks one event on the internal meter. Parameters: Name Type Description value number Source: measured-core/lib/metrics/Timer.js, line 66 × Search results Close "},"tutorial-SignalFx Express Full End to End Example.html":{"id":"tutorial-SignalFx Express Full End to End Example.html","title":"Tutorial: SignalFx Express Full End to End Example","body":" Measured Modules CpuUtilsinputValidatorsmeasured-coremeasured-node-metricsmeasured-reportingmeasured-signalfx-reportermetricValidatorsnode-http-request-metricsnode-os-metricsnode-process-metricsSignalFxEventCategoriestimeUnits Classes BinaryHeapCachedGaugeCollectionCounterDimensionAwareMetricsRegistryExponentiallyDecayingSampleExponentiallyMovingWeightedAverageGaugeHistogramLoggingReporterMeterNoOpMeterReporterSelfReportingMetricsRegistrySettableGaugeSignalFxMetricsReporterSignalFxSelfReportingMetricsRegistryStopwatchTimer Interfaces MetricMetricTypes Tutorials SignalFx Express Full End to End Example Global DEFAULT_NODE_OS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_NODE_PROCESS_METRICS_REPORTING_INTERVAL_IN_SECONDSDEFAULT_REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDSnodeOsMetricsnodeProcessMetrics SignalFx Express Full End to End Example Using Measured to instrument OS, Process and Express Metrics.This tutorial shows how to use the measured libraries to fully instrument OS and Node Process metrics as well as create an express middleware. The middleware will measure request count, latency distributions (req/res time histogram) and add dimensions to make it filterable by request method, response status code, request uri path. NOTE: You must add app.use(createExpressMiddleware(...)) before the use of any express bodyParsers like app.use(express.json()) because requests that are first handled by a bodyParser will not get measured. const os = require('os'); const signalfx = require('signalfx'); const express = require('express'); const { SignalFxMetricsReporter, SignalFxSelfReportingMetricsRegistry } = require('measured-signalfx-reporter'); const { createProcessMetrics, createOSMetrics, createExpressMiddleware } = require('measured-node-metrics'); const libraryMetadata = require('./package'); // get metadata from package.json const library = libraryMetadata.name; const version = libraryMetadata.version; // Report process and os stats 1x per minute const PROCESS_AND_SYSTEM_METRICS_REPORTING_INTERVAL_IN_SECONDS = 60; // Report the request count and histogram stats every 10 seconds const REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDS = 10; const defaultDimensions = { app: library, app_version: version, env: 'test' }; /** * Get your api key from a secrets provider of some kind. * * Good examples: * * &lt;li&gt; S3 with KMS * &lt;li&gt; Cerberus * &lt;li&gt; AWS Secrets Manager * &lt;li&gt; Vault * &lt;li&gt; Confidant * * Bad examples: * * &lt;li&gt; Checked into SCM in plaintext as a property * &lt;li&gt; Set as a plaintext environment variable * * @return {string} Returns the resolved Signal Fx Api Key */ const apiKeyResolver = () =&gt; { // https://diogomonica.com/2017/03/27/why-you-shouldnt-use-env-variables-for-secret-data/ return process.env.SIGNALFX_API_KEY; }; // Create the signal fx client const signalFxClient = new signalfx.Ingest(apiKeyResolver(), { userAgents: library }); // Create the signal fx reporter with the client const signalFxReporter = new SignalFxMetricsReporter(signalFxClient, { defaultDimensions: defaultDimensions, defaultReportingIntervalInSeconds: 10, logLevel: 'debug' }); // Create the self reporting metrics registry with the signal fx reporter const metricsRegistry = new SignalFxSelfReportingMetricsRegistry(signalFxReporter, { logLevel: 'debug' }); createOSMetrics(metricsRegistry, {}, PROCESS_AND_SYSTEM_METRICS_REPORTING_INTERVAL_IN_SECONDS); createProcessMetrics(metricsRegistry, {}, PROCESS_AND_SYSTEM_METRICS_REPORTING_INTERVAL_IN_SECONDS); const app = express(); // wire up the metrics middleware app.use(createExpressMiddleware(metricsRegistry, REQUEST_METRICS_REPORTING_INTERVAL_IN_SECONDS)); app.get('/hello', (req, res) =&gt; { res.send('hello world'); }); app.get('/path2', (req, res) =&gt; { res.send('path2'); }); app.listen(8080, () =&gt; log.info('Example app listening on port 8080!')); × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
